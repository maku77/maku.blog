<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>cURL on まくろぐ</title><link>https://maku.blog/tags/curl/</link><description>Recent content in cURL on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Tue, 28 Nov 2023 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/curl/index.xml" rel="self" type="application/rss+xml"/><item><title>Linuxコマンド: curl コマンドのチートシート</title><link>https://maku.blog/p/2sv4bqw/</link><pubDate>Tue, 28 Nov 2023 00:00:00 +0900</pubDate><guid>https://maku.blog/p/2sv4bqw/</guid><description>&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>curl --help all&lt;/code>&lt;/td>
 &lt;td>詳細なヘルプを表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl https://example.com&lt;/code>&lt;/td>
 &lt;td>GET リクエスト&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -i https://example.com&lt;/code>&lt;/td>
 &lt;td>レスポンスヘッダーも表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -I https://example.com&lt;/code>&lt;/td>
 &lt;td>レスポンスヘッダーだけ表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -v https://example.com&lt;/code>&lt;/td>
 &lt;td>冗長表示（リクエストとレスポンスのヘッダーを確認可能）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -H &amp;quot;Authorization: Bearer TOKEN&amp;quot; https://example.com&lt;/code>&lt;/td>
 &lt;td>リクエストヘッダーの指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -b &amp;quot;cookie1=value1; cookie2=value2&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>クッキーの指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -A &amp;quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>ユーザーエージェントの指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -L http://example.com&lt;/code>&lt;/td>
 &lt;td>リダイレクト (302) レスポンスを自動処理&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -O https://example.com/file.txt&lt;/code>&lt;/td>
 &lt;td>ファイルのダウンロード（同名で保存）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -o hoge.txt https://example.com/file.txt&lt;/code>&lt;/td>
 &lt;td>ファイルのダウンロード（別名で保存）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -# -O http://example.com/largefile.zip&lt;/code>&lt;/td>
 &lt;td>ダウンロードの進捗を表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -r 0-100 http://example.com/file.txt -o partial.txt&lt;/code>&lt;/td>
 &lt;td>ファイルの一部だけダウンロード&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass --basic http://example.com&lt;/code>&lt;/td>
 &lt;td>BASIC 認証（&lt;code>--basic&lt;/code> は省略可）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass --digest http://example.com&lt;/code>&lt;/td>
 &lt;td>Digest 認証&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -k https://example.com&lt;/code>&lt;/td>
 &lt;td>サーバー証明書の検証を無視&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl --interface eth0 http://example.com&lt;/code>&lt;/td>
 &lt;td>使用するネットワークインタフェースを指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl --connect-timeout 0.15 http://example.com&lt;/code>&lt;/td>
 &lt;td>タイムアウトの指定（秒単位）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X POST http://example.com&lt;/code>&lt;/td>
 &lt;td>POST リクエスト（データ送信しないときはメソッドの明示が必要）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -d &amp;quot;param1=value1&amp;amp;param2=value2&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>POST でデータ送信&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl --data-urlencode &amp;quot;...&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>POST でデータ送信（URL エンコード有り）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -H &amp;quot;Content-Type: application/json&amp;quot; -d '{&amp;quot;key&amp;quot;:&amp;quot;value&amp;quot;}' https://example.com&lt;/code>&lt;/td>
 &lt;td>POST でデータ送信（JSON 形式）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X POST -F &amp;quot;file=@/path/to/file.txt&amp;quot; http://example.com/upload&lt;/code>&lt;/td>
 &lt;td>POST でファイルのアップロード&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X DELETE http://example.com/resource&lt;/code>&lt;/td>
 &lt;td>DELETE リクエスト&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -4 https://example.com&lt;/code>&lt;/td>
 &lt;td>IPv4 の使用を強制&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -6 https://example.com&lt;/code>&lt;/td>
 &lt;td>IPv6 の使用を強制&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -x {proxy}:{port} https://example.com&lt;/code>&lt;/td>
 &lt;td>プロキシ経由でのアクセス&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X CUSTOMMETHOD http://example.com&lt;/code>&lt;/td>
 &lt;td>独自の HTTP メソッドを指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass -O ftp://example.com/file.txt&lt;/code>&lt;/td>
 &lt;td>FTP サーバーからファイルをダウンロード&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass ftp://example.com/dir&lt;/code>&lt;/td>
 &lt;td>FTP サーバーのディレクトリ内のファイル一覧&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -T file.txt -u user:pass --ftp-create-dirs -ssl ftp://example.com&lt;/code>&lt;/td>
 &lt;td>FTP サーバーへのアップロード&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>テスト用のサーバーとして &lt;code>https://httpbin.org&lt;/code> を使うと便利です。どのようなリクエストが送信されたかを、JSON レスポンスとして返してくれます。
&lt;ul>
&lt;li>GET メソッド用アドレス: &lt;code>https://httpbin.org/get&lt;/code>&lt;/li>
&lt;li>POST メソッド用アドレス: &lt;code>https://httpbin.org/post&lt;/code>&lt;/li>
&lt;li>DELETE メソッド用アドレス: &lt;code>https://httpbin.org/delete&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Windows のコマンドプロンプトではシングルクォートがうまく扱えないので、入れ子になったダブルクォートをエスケープする必要があります。
&lt;ul>
&lt;li>Linux の場合: &lt;code>-d '{&amp;quot;key&amp;quot;:&amp;quot;value&amp;quot;}'&lt;/code>&lt;/li>
&lt;li>Windows の場合: &lt;code>-d &amp;quot;{\&amp;quot;key\&amp;quot;:\&amp;quot;value\&amp;quot;}&amp;quot;&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Linuxコマンド: curl コマンドの使用例（GET/POST リクエスト、ファイルのダウンロード）</title><link>https://maku.blog/p/phdp2do/</link><pubDate>Fri, 03 Apr 2015 00:00:00 +0900</pubDate><guid>https://maku.blog/p/phdp2do/</guid><description>&lt;p>&lt;code>curl&lt;/code> コマンドは URL を指定してサーバー上のリソースにアクセスするためのコマンドで、Web API のテストや、ファイルのダウンロードに使用できます。
昔は &lt;code>curl&lt;/code> コマンドは Linux 用のコマンドという認識でしたが、Windows 10 には標準搭載されるようになりました。
&lt;code>curl&lt;/code> は様々なプロトコルで通信できますが、主に HTTP/HTTPS が使用されます。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../../p/2sv4bqw/">curl コマンドのチートシート&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="curl-コマンドでファイルをダウンロードする">curl コマンドでファイルをダウンロードする&lt;/h2>
&lt;p>curl コマンドはデフォルトではダウンロードしたファイルを標準出力に出力します。
&lt;strong>&lt;code>-o&lt;/code>&lt;/strong>（小文字のオー）オプションや、&lt;strong>&lt;code>-O&lt;/code>&lt;/strong>（大文字のオー）オプションを指定することで、&lt;strong>ファイルに保存する&lt;/strong> ことができます。
同時に &lt;strong>&lt;code>-L&lt;/code>&lt;/strong> オプションを指定しておくと、リダイレクトレスポンスを自動処理してくれます。&lt;/p>
&lt;h3 id="ダウンロード元と同名で保存--o">ダウンロード元と同名で保存 (-O)&lt;/h3>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">sample.zip という名前で保存&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> curl -L -O http://example.com/sample.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="別名で保存--o">別名で保存 (-o)&lt;/h3>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">#&lt;/span> カレントディレクトリに foo.zip という名前で保存
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> curl -L -o foo.zip http://example.com/sample.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">#&lt;/span> 保存先を絶対パスで指定することも可能
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> curl -L -o /tmp/foo.zip http://example.com/sample.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="curl-コマンドで-getpost-リクエストを送信する">curl コマンドで GET/POST リクエストを送信する&lt;/h2>
&lt;p>REST API などのテストに &lt;code>curl&lt;/code> コマンドを利用できます。&lt;/p>
&lt;h3 id="get-リクエスト">GET リクエスト&lt;/h3>
&lt;p>特にオプションを指定しなければ、HTTP の GET リクエストが送信されます。&lt;/p></description></item></channel></rss>