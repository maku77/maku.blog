<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OpenGL on まくろぐ</title><link>https://maku.blog/tags/opengl/</link><description>Recent content in OpenGL on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Fri, 16 Aug 2019 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/opengl/index.xml" rel="self" type="application/rss+xml"/><item><title>Python で OpenGL (1) pyGLFW のインストール</title><link>https://maku.blog/p/sfpwow9/</link><pubDate>Fri, 16 Aug 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/sfpwow9/</guid><description>&lt;p>Python で簡単に Open GL のプログラムを開発できるように、GLFW (pyGLFW) というライブラリを使用するための環境構築をしてみます。&lt;/p>
&lt;h2 id="glfw-とは">GLFW とは&lt;/h2>
&lt;p>Khronos グループが作成している OpenGL や OpenGL ES、Vulkan などの API を使用すると、クラスプラットフォームな 3D プログラムを作成することができます。
ただし、OS ごとにウィンドウの作成方法やキーハンドリングの方法は異なっているため、その部分は個別に作成する必要があります。&lt;/p>
&lt;p>&lt;a href="https://www.glfw.org/">GLFW&lt;/a> は、そのあたりの OS 依存の処理を抽象化するためラッパーライブラリで、Windows、macOS、Linux などのデスクトップ環境に対応しています。
GLFW 本家は C 言語用のライブラリとして作成していますが、Python 用のラッパーライブラリ (pyGLFW) も公開されています。&lt;/p>
&lt;p>昔は GLUT というライブラリがよく使われていましたが、今はもうメンテナンスされていないので、GLFW を使います。&lt;/p>
&lt;h2 id="pyglfw-glfw-のインストール">pyGLFW (glfw) のインストール&lt;/h2>
&lt;p>ここでは、Python 用の GLFW ラッパーライブラリである、&lt;a href="https://pypi.org/project/glfw/">pyGLFW (glfw) パッケージ&lt;/a> をインストールします。&lt;/p>
&lt;h3 id="python-用ライブラリ-glfw-のインストール">Python 用ライブラリ glfw のインストール&lt;/h3>
&lt;p>Python 用の &lt;code>glfw&lt;/code> パッケージは &lt;code>pip&lt;/code> コマンドで簡単にインストールできます。
システム全体の環境に影響しないようにするには、&lt;a href="https://maku77.github.io/python/env/virtualenv.html">virtualenv を使って仮想環境を構築&lt;/a> してからインストールするのがよいでしょう。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">virtualenv で仮想環境に切り替える場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ mkdir sample
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ virtualenv ENV
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ source ENV/bin/activate&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">glfw のインストール&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ pip install glfw&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="ランタイムライブラリのインストール">ランタイムライブラリのインストール&lt;/h3>
&lt;p>&lt;code>glfw&lt;/code> を使用したプログラムを実行するには、各 OS ごとに用意されたランタイムライブラリ (Shared library) もインストールしておく必要があります。&lt;/p></description></item><item><title>Python で OpenGL (2) PyOpenGL のインストール</title><link>https://maku.blog/p/665rua3/</link><pubDate>Fri, 16 Aug 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/665rua3/</guid><description>&lt;h2 id="pyopengl-とは">PyOpenGL とは&lt;/h2>
&lt;p>&lt;a href="../../p/sfpwow9">前回の記事&lt;/a> では、&lt;code>pyGLFW&lt;/code> を使ってウィンドウを表示するところまで行きました。
ただし、&lt;code>pyGLFW&lt;/code> がやってくれるのは、ウィンドウの作成や、そのサーフェスに描画するための OpenGL コンテキストを生成するところまでです。
実際に OpenGL コンテキストを使ってレンダリングするには、OpenGL の API が必要です。&lt;/p>
&lt;p>そのためのライブラリが &lt;a href="https://pypi.org/project/PyOpenGL/">PyOpenGL パッケージ&lt;/a> です。&lt;/p>
&lt;h2 id="pyopengl-のインストール">PyOpenGL のインストール&lt;/h2>
&lt;p>&lt;code>PyOpenGL&lt;/code> パッケージも &lt;code>pyGLFW&lt;/code> と同様、&lt;code>pip&lt;/code> コマンドで簡単にインストールすることができます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ pip install PyOpenGL&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="pyopengl-で-hello-world">PyOpenGL で Hello World&lt;/h2>
&lt;p>下記のサンプルコードは、pyGLFW (glfw) パッケージを使ってウィンドウの初期化を行い（&lt;code>main()&lt;/code>）、PyOpenGL (OpenGL) パッケージを使って OpenGL の API を呼び出しています（&lt;code>render()&lt;/code>）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">main.py&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">glfw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">OpenGL.GL&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">render&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glClearColor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glClear&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">GL_COLOR_BUFFER_BIT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">raise&lt;/span> &lt;span class="ne">RuntimeError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Could not initialize GLFW3&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">window_hint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CONTEXT_VERSION_MAJOR&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">window_hint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CONTEXT_VERSION_MINOR&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">window_hint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPENGL_FORWARD_COMPAT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GL_TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">window_hint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPENGL_PROFILE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPENGL_CORE_PROFILE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">window&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create_window&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">320&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Hello World&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">window&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">terminate&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">raise&lt;/span> &lt;span class="ne">RuntimeError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Could not create an window&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">make_context_current&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">window_should_close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">render&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">swap_buffers&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">poll_events&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">glfw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">terminate&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;__main__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、&lt;code>glClear()&lt;/code> しているだけなので、背景がクリアされるだけです。
背景色は &lt;code>glClearColor()&lt;/code> で暗めの青に設定しています。&lt;/p></description></item></channel></rss>