<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Firebase/Authentication on まくろぐ</title><link>https://maku.blog/tags/firebase/authentication/</link><description>Recent content in Firebase/Authentication on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Sun, 26 Dec 2021 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/firebase/authentication/index.xml" rel="self" type="application/rss+xml"/><item><title>Next.js で Firebase: Authentication 機能でユーザー認証できるようにする</title><link>https://maku.blog/p/8t6gq2b/</link><pubDate>Sun, 26 Dec 2021 00:00:00 +0900</pubDate><guid>https://maku.blog/p/8t6gq2b/</guid><description>&lt;h2 id="何をするか">何をするか？&lt;/h2>
&lt;p>&lt;a href="https://firebase.google.com/docs/auth">Firebase の Authentication 機能&lt;/a> を使用すると、ウェブアプリ（やモバイルアプリ）にユーザー認証機能を付けて、各種リソースへのアクセスを制御できるようになります。
例えば、「Firestore に格納されているユーザー情報の編集は、そのユーザーにのみ許可する」といったことができます。
Firebase のクライアントアプリでユーザーデータを扱う場合は、Firebase Authentication はほぼ必須の機能だといえます。&lt;/p>
&lt;p>ここでは、Next.js (React) アプリで Firebase Authentication を使い、ユーザー認証を行えるようにしてみます。
ユーザー認証に使う UI は、Firebase が用意している &lt;a href="https://firebase.google.com/docs/auth/web/firebaseui">FirebaseUI&lt;/a> を使って表示します。&lt;/p>
&lt;p>事前準備として、Firebase プロジェクトの作成は済んでおり、Next.js アプリから各種 Firestore 関連インスタンスを取得できるようになっていると想定します。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../../../p/73eq2cm">Next.js で Firebase: プロジェクトの作成と接続準備&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ログインプロバイダの設定">ログインプロバイダの設定&lt;/h2>
&lt;p>Firebase Authentication では、サインイン方法として、新規に登録するメールアドレスや電話番号を使う方法（ネイティブプロバイダ）と、既存の Google アカウントや Facebook アカウントなどを使う方法（追加のプロバイダ）が準備されています。
まずは、シンプルに「メールアドレス」でユーザー登録できるようにしてみます。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;a href="https://console.firebase.google.com/">Firebase コンソール&lt;/a> の &lt;strong>Authentication&lt;/strong> タブを選択して機能を有効化する。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ログインプロバイダ (Sign-in method) で &lt;strong>メール／パスワード&lt;/strong> を選択する。&lt;/p>

 
 &lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="700" height="343" src="../../../p/8t6gq2b/img-001_hu14103644858394531459.png" alt="/p/8t6gq2b/img-001.png" />
 &lt;/figure>

&lt;/li>
&lt;li>
&lt;p>&lt;strong>有効にする&lt;/strong> にチェックを入れて &lt;strong>保存&lt;/strong> をクリック。&lt;/p>

 
 &lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="500" height="194" src="../../../p/8t6gq2b/img-002_hu3421018065957438752.png" alt="/p/8t6gq2b/img-002.png" />
 &lt;/figure>

&lt;/li>
&lt;/ol>
&lt;p>これで、Firebase Authentication で「メールアドレス」による認証を行えるようになります。&lt;/p>
&lt;h2 id="サインイン状態を扱う-react-フックを作成する">サインイン状態を扱う React フックを作成する&lt;/h2>
&lt;p>Next.js (React) アプリから Firebase Authentication を使う場合は、サインイン状態を扱うためのカスタムフックを作成しておくと便利です。
サインインボタンなどの UI を先に作りたいところですが、ボタンを表示すべきかどうかの判断のために結局このカスタムフックが必要になるので、先にカスタムフックを作成します。&lt;/p></description></item></channel></rss>