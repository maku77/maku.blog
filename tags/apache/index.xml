<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Apache on まくろぐ</title><link>https://maku.blog/tags/apache/</link><description>Recent content in Apache on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Sat, 12 Jan 2019 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/apache/index.xml" rel="self" type="application/rss+xml"/><item><title>お名前.com の共用サーバーを Let's Encrypt で SSL 対応</title><link>https://maku.blog/p/s46j9sq/</link><pubDate>Sat, 12 Jan 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/s46j9sq/</guid><description>&lt;p>Chrome で https に対応していない Web サイトにアクセスすると、アドレスバーに「&lt;strong>保護されていない通信&lt;/strong>」という警告が出るようになりました。
Web サーバーの管理者は、https (SSL) への対応がほぼ必須になっています。
ここでは、&lt;a href="https://px.a8.net/svt/ejp?a8mat=3NCT8K+3X3R5E+50+35L2SI" rel="nofollow">お名前.com&lt;/a>
&lt;img border="0" width="1" height="1" src="https://www10.a8.net/0.gif?a8mat=3NCT8K+3X3R5E+50+35L2SI" alt="">
 の共用サーバー（SD-11、SD-12 プランなど）で、SSL を有効にし、http によるアクセスがあったときに https なアドレスにリダイレクトする設定方法を説明します。&lt;/p>
&lt;h2 id="lets-encrypt-による-ssl-対応">Let&amp;rsquo;s Encrypt による SSL 対応&lt;/h2>
&lt;p>&lt;a href="https://px.a8.net/svt/ejp?a8mat=3NCT8K+3X3R5E+50+35L2SI" rel="nofollow">お名前.com&lt;/a>
&lt;img border="0" width="1" height="1" src="https://www10.a8.net/0.gif?a8mat=3NCT8K+3X3R5E+50+35L2SI" alt="">
 の共用サーバーで Web サイトを運用している場合は、下記のコントロールパネルからポチポチやるだけで、簡単に SSL (https) によるアクセスを有効にすることができます。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cp.rentalserver.jp/">共用サーバーSD コントロールパネル https://cp.rentalserver.jp/&lt;/a>&lt;/li>
&lt;/ul>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="500" height="209" src="../../p/s46j9sq/onamae-ssl_hu17515249465528903562.png" alt="/p/s46j9sq/onamae-ssl.png" />
&lt;/figure>

&lt;p>自前の Web サーバで SSL 設定を行おうとすると、証明書の発行手続きや設定などが結構面倒ですが、このコンパネからポチポチやれば 1 分で設定完了です。
無料証明書で有名な Let&amp;rsquo;s Encrypt のサービスに対応しているので、無料で SSL 対応することができます。&lt;/p>
&lt;h2 id="http-アクセスを-https-にリダイレクトする">http アクセスを https にリダイレクトする&lt;/h2>
&lt;p>数時間待って、無事 SSL の設定が反映されると、&lt;code>https://&lt;/code> によるウェブサイトへのアクセスが可能になります。
ただし、そのままだと古い &lt;code>http://&lt;/code> のサイトも残ったままです。&lt;/p>
&lt;p>ここでは、Web サーバー (Apache) の設定ファイルである &lt;code>.htaccess&lt;/code> を修正（なければ新規作成）することで http から https へのリダイレクト設定を行います。
ここでは、下記のような手順で修正することにしましょう。&lt;/p></description></item><item><title>XAMPP/Apache の DocumentRoot を設定する</title><link>https://maku.blog/p/6h47cno/</link><pubDate>Sun, 29 Apr 2012 00:00:00 +0900</pubDate><guid>https://maku.blog/p/6h47cno/</guid><description>&lt;h2 id="httpdconf-を編集">httpd.conf を編集&lt;/h2>
&lt;p>例えば、Mac OSX にインストールした XAMPP の Apache の場合は、&lt;code>/Applications/XAMPP/xamppfiles/etc/httpd.conf&lt;/code> を編集します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">(1) DocumentRoot の変更&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">DocumentRoot &amp;#34;/Applications/XAMPP/xamppfiles/htdocs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">↓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DocumentRoot &amp;#34;/Users/maku/website/public_html&amp;#34;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">(2) 対応する Directory ディレクトリの変更&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;lt;Directory &amp;#34;/Applications/XAMPP/xamppfiles/htdocs&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">↓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;Directory &amp;#34;/Users/maku/website/public_html&amp;#34;&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="トラブルシューティング">トラブルシューティング&lt;/h2>
&lt;p>&lt;code>http://localhost/&lt;/code> にアクセスしたときに以下のようなエラーが出た場合は、&lt;code>DocumentRoot&lt;/code> に設定したディレクトリのパーミッションを確認します。&lt;/p>
&lt;pre tabindex="0">&lt;code>Access forbidden!

You don&amp;#39;t have permission to access the requested directory.
There is either no index document or the directory is read-protected.
&lt;/code>&lt;/pre>&lt;p>例えば、DocumentRoot として、&lt;code>/aaa/bbb/ccc&lt;/code> を設定した場合、&lt;code>/aaa&lt;/code>、&lt;code>/aaa/bbb&lt;/code>、&lt;code>/aaa/bbb/ccc&lt;/code> 全てに read パーミッションがついている必要があります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> chmod &lt;span class="m">0755&lt;/span> /aaa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> chmod &lt;span class="m">0755&lt;/span> /aaa/bbb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> chmod &lt;span class="m">0755&lt;/span> /aaa/bbb/ccc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>