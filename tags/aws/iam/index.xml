<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AWS/IAM on まくろぐ</title><link>https://maku.blog/tags/aws/iam/</link><description>Recent content in AWS/IAM on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Fri, 01 Oct 2021 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/aws/iam/index.xml" rel="self" type="application/rss+xml"/><item><title>AWS IAM の設定をコマンドライン (CLI) で行う</title><link>https://maku.blog/p/aov4bho/</link><pubDate>Sun, 07 Feb 2021 00:00:00 +0900</pubDate><guid>https://maku.blog/p/aov4bho/</guid><description>&lt;p>AWS CLI（&lt;code>aws&lt;/code> コマンド）を使うと、様々な IAM 系の操作をコマンドラインから実行できるようになります。
ただし、IAM の制御を行えるのは、&lt;code>AdministratorAccess&lt;/code> ポリシーなどが割り当てられ、IAM 操作の権限が付いているユーザーに限られます。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iam/index.html">iam -- AWS CLI Command Reference&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="user">ユーザー関連&lt;/h2>
&lt;h3 id="iam-ユーザーを作成する-iam-create-user">IAM ユーザーを作成する (iam create-user)&lt;/h3>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">aws iam create-user --user-name &amp;lt;ユーザー名&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;div class="xAccordion">
 &lt;input id="id-913465728" type="checkbox">
 &lt;label class="xAccordion_title" for="id-913465728">実行例&lt;/label>
 &lt;div class="xAccordion_body">
 

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">$ aws iam create-user --user-name user-1 --output yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">User&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">Arn&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arn:aws:iam::049957049344:user/user-1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">CreateDate&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2021-11-01T08:41:29+00:00&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">Path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">UserId&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">AIDAQXINMCQAPJRMFE22H&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">UserName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user-1&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


 &lt;/div>
&lt;/div>


&lt;p>&lt;a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iam/create-user.html">iam create-user&lt;/a> コマンドを使うと、指定した名前の IAM ユーザーを作成できます。
作成したユーザーの情報は、&lt;a href="#get-user">iam get-user&lt;/a> や &lt;a href="#list-users">iam list-users&lt;/a> コマンドで取得できます。
作成したユーザー用の API アクセスキーを生成するには、ひきつづき &lt;a href="#create-access-key">iam create-access-key&lt;/a> コマンドを使用します。&lt;/p>
&lt;h3 id="iam-ユーザーを削除する-iam-delete-user">IAM ユーザーを削除する (iam delete-user)&lt;/h3>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">aws iam delete-user --user-name &amp;lt;ユーザー名&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>指定したユーザーに何らかの設定情報（アクセスキーや SSH キー、MFA など）が設定されている場合は、先にそれらの情報を削除しておく必要があります。
例えば、アクセスキーが設定されている場合は、&lt;a href="#delete-access-key">delete-access-key&lt;/a> コマンドで削除してからユーザー自体を削除します。&lt;/p></description></item></channel></rss>