<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on まくろぐ</title><link>https://maku.blog/tags/linux/</link><description>Recent content in Linux on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Tue, 28 Nov 2023 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Linuxコマンド: curl コマンドのチートシート</title><link>https://maku.blog/p/2sv4bqw/</link><pubDate>Tue, 28 Nov 2023 00:00:00 +0900</pubDate><guid>https://maku.blog/p/2sv4bqw/</guid><description>&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>curl --help all&lt;/code>&lt;/td>
 &lt;td>詳細なヘルプを表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl https://example.com&lt;/code>&lt;/td>
 &lt;td>GET リクエスト&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -i https://example.com&lt;/code>&lt;/td>
 &lt;td>レスポンスヘッダーも表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -I https://example.com&lt;/code>&lt;/td>
 &lt;td>レスポンスヘッダーだけ表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -v https://example.com&lt;/code>&lt;/td>
 &lt;td>冗長表示（リクエストとレスポンスのヘッダーを確認可能）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -H &amp;quot;Authorization: Bearer TOKEN&amp;quot; https://example.com&lt;/code>&lt;/td>
 &lt;td>リクエストヘッダーの指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -b &amp;quot;cookie1=value1; cookie2=value2&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>クッキーの指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -A &amp;quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>ユーザーエージェントの指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -L http://example.com&lt;/code>&lt;/td>
 &lt;td>リダイレクト (302) レスポンスを自動処理&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -O https://example.com/file.txt&lt;/code>&lt;/td>
 &lt;td>ファイルのダウンロード（同名で保存）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -o hoge.txt https://example.com/file.txt&lt;/code>&lt;/td>
 &lt;td>ファイルのダウンロード（別名で保存）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -# -O http://example.com/largefile.zip&lt;/code>&lt;/td>
 &lt;td>ダウンロードの進捗を表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -r 0-100 http://example.com/file.txt -o partial.txt&lt;/code>&lt;/td>
 &lt;td>ファイルの一部だけダウンロード&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass --basic http://example.com&lt;/code>&lt;/td>
 &lt;td>BASIC 認証（&lt;code>--basic&lt;/code> は省略可）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass --digest http://example.com&lt;/code>&lt;/td>
 &lt;td>Digest 認証&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -k https://example.com&lt;/code>&lt;/td>
 &lt;td>サーバー証明書の検証を無視&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl --interface eth0 http://example.com&lt;/code>&lt;/td>
 &lt;td>使用するネットワークインタフェースを指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl --connect-timeout 0.15 http://example.com&lt;/code>&lt;/td>
 &lt;td>タイムアウトの指定（秒単位）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X POST http://example.com&lt;/code>&lt;/td>
 &lt;td>POST リクエスト（データ送信しないときはメソッドの明示が必要）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -d &amp;quot;param1=value1&amp;amp;param2=value2&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>POST でデータ送信&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl --data-urlencode &amp;quot;...&amp;quot; http://example.com&lt;/code>&lt;/td>
 &lt;td>POST でデータ送信（URL エンコード有り）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -H &amp;quot;Content-Type: application/json&amp;quot; -d '{&amp;quot;key&amp;quot;:&amp;quot;value&amp;quot;}' https://example.com&lt;/code>&lt;/td>
 &lt;td>POST でデータ送信（JSON 形式）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X POST -F &amp;quot;file=@/path/to/file.txt&amp;quot; http://example.com/upload&lt;/code>&lt;/td>
 &lt;td>POST でファイルのアップロード&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X DELETE http://example.com/resource&lt;/code>&lt;/td>
 &lt;td>DELETE リクエスト&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -4 https://example.com&lt;/code>&lt;/td>
 &lt;td>IPv4 の使用を強制&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -6 https://example.com&lt;/code>&lt;/td>
 &lt;td>IPv6 の使用を強制&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -x {proxy}:{port} https://example.com&lt;/code>&lt;/td>
 &lt;td>プロキシ経由でのアクセス&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -X CUSTOMMETHOD http://example.com&lt;/code>&lt;/td>
 &lt;td>独自の HTTP メソッドを指定&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass -O ftp://example.com/file.txt&lt;/code>&lt;/td>
 &lt;td>FTP サーバーからファイルをダウンロード&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -u user:pass ftp://example.com/dir&lt;/code>&lt;/td>
 &lt;td>FTP サーバーのディレクトリ内のファイル一覧&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>curl -T file.txt -u user:pass --ftp-create-dirs -ssl ftp://example.com&lt;/code>&lt;/td>
 &lt;td>FTP サーバーへのアップロード&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>テスト用のサーバーとして &lt;code>https://httpbin.org&lt;/code> を使うと便利です。どのようなリクエストが送信されたかを、JSON レスポンスとして返してくれます。
&lt;ul>
&lt;li>GET メソッド用アドレス: &lt;code>https://httpbin.org/get&lt;/code>&lt;/li>
&lt;li>POST メソッド用アドレス: &lt;code>https://httpbin.org/post&lt;/code>&lt;/li>
&lt;li>DELETE メソッド用アドレス: &lt;code>https://httpbin.org/delete&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Windows のコマンドプロンプトではシングルクォートがうまく扱えないので、入れ子になったダブルクォートをエスケープする必要があります。
&lt;ul>
&lt;li>Linux の場合: &lt;code>-d '{&amp;quot;key&amp;quot;:&amp;quot;value&amp;quot;}'&lt;/code>&lt;/li>
&lt;li>Windows の場合: &lt;code>-d &amp;quot;{\&amp;quot;key\&amp;quot;:\&amp;quot;value\&amp;quot;}&amp;quot;&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>zsh チートシート</title><link>https://maku.blog/p/vhbe8f8/</link><pubDate>Thu, 23 Nov 2023 00:00:00 +0900</pubDate><guid>https://maku.blog/p/vhbe8f8/</guid><description>&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>種類&lt;/th>
 &lt;th>キー操作&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>移動&lt;/td>
 &lt;td>&lt;code>Ctrl + B&lt;/code>&lt;/td>
 &lt;td>カーソルを左へ移動&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>移動&lt;/td>
 &lt;td>&lt;code>Ctrl + F&lt;/code>&lt;/td>
 &lt;td>カーソルを右へ移動&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>移動&lt;/td>
 &lt;td>&lt;code>Ctrl + A&lt;/code>&lt;/td>
 &lt;td>カーソルを行頭へ移動 (beggining-of-line)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>移動&lt;/td>
 &lt;td>&lt;code>Ctrl + E&lt;/code>&lt;/td>
 &lt;td>カーソルを行末へ移動 (end-of-line)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>移動&lt;/td>
 &lt;td>&lt;code>Alt + ←&lt;/code> / &lt;code>Esc, B&lt;/code>&lt;/td>
 &lt;td>カーソルを前の単語へ移動 (backward-word)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>移動&lt;/td>
 &lt;td>&lt;code>Alt + →&lt;/code> / &lt;code>Esc, F&lt;/code>&lt;/td>
 &lt;td>カーソルを後の単語へ移動 (forward-word)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>削除&lt;/td>
 &lt;td>&lt;code>Ctrl + U&lt;/code>&lt;/td>
 &lt;td>行全体を削除 (kill-hole-line)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>削除&lt;/td>
 &lt;td>&lt;code>Ctrl + K&lt;/code>&lt;/td>
 &lt;td>カーソル位置から行末までを削除 (kill-line)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>削除&lt;/td>
 &lt;td>&lt;code>Ctrl + H&lt;/code>&lt;/td>
 &lt;td>カーソルの前の 1 文字を削除 (Backspace)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>削除&lt;/td>
 &lt;td>&lt;code>Ctrl + D&lt;/code>&lt;/td>
 &lt;td>カーソル位置の 1 文字を削除 (Del)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>削除&lt;/td>
 &lt;td>&lt;code>Ctrl + W&lt;/code>&lt;/td>
 &lt;td>カーソル位置から単語の先頭までを削除 (backward-kill-word)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>削除&lt;/td>
 &lt;td>&lt;code>Esc, D&lt;/code>&lt;/td>
 &lt;td>カーソル位置から単語の末尾までを削除 (kill-word)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>編集&lt;/td>
 &lt;td>&lt;code>Ctrl + Y&lt;/code>&lt;/td>
 &lt;td>貼り付け&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>編集&lt;/td>
 &lt;td>&lt;code>Ctrl + T&lt;/code>&lt;/td>
 &lt;td>前の文字と 1 文字入れ替え (transpose-chars)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>編集&lt;/td>
 &lt;td>&lt;code>Esc, U&lt;/code>&lt;/td>
 &lt;td>カーソル位置から単語末尾までを大文字にして、カーソルを単語末尾へ移動 (up-case-word)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>編集&lt;/td>
 &lt;td>&lt;code>Esc, L&lt;/code>&lt;/td>
 &lt;td>カーソル位置から単語末尾までを小文字にして、カーソルを単語末尾へ移動 (down-case-word)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>編集&lt;/td>
 &lt;td>&lt;code>Esc, C&lt;/code>&lt;/td>
 &lt;td>カーソル位置の 1 文字を大文字にして、カーソルを単語末尾へ移動 (capitalize-word)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>編集&lt;/td>
 &lt;td>&lt;code>Esc, T&lt;/code>&lt;/td>
 &lt;td>前の単語と 1 単語入れ替え (transpose-words)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>履歴&lt;/td>
 &lt;td>&lt;code>Ctrl + P&lt;/code>&lt;/td>
 &lt;td>1 つ前のコマンド履歴を表示 (up-line-or-history)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>履歴&lt;/td>
 &lt;td>&lt;code>Ctrl + N&lt;/code>&lt;/td>
 &lt;td>1 つ後のコマンド履歴を表示 (down-line-or-history)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>履歴&lt;/td>
 &lt;td>&lt;code>Ctrl + R&lt;/code>&lt;/td>
 &lt;td>コマンド履歴のインクリメンタルサーチ (history-incremental-search-backward)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>履歴&lt;/td>
 &lt;td>&lt;code>Ctrl + O&lt;/code>&lt;/td>
 &lt;td>コマンド履歴からコマンドを実行して次の履歴を表示 (accept-line-and-down-history)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>その他&lt;/td>
 &lt;td>&lt;code>Ctrl + J&lt;/code> / &lt;code>Ctrl + M&lt;/code>&lt;/td>
 &lt;td>Enter (accept-line)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>その他&lt;/td>
 &lt;td>&lt;code>Ctrl + I&lt;/code> / &lt;code>Tab&lt;/code>&lt;/td>
 &lt;td>入力補完&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>その他&lt;/td>
 &lt;td>&lt;code>Ctrl + G&lt;/code>&lt;/td>
 &lt;td>入力を破棄して新しい入力を開始する。インクリメンタルサーチを終了するのにも使える (send-break)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>その他&lt;/td>
 &lt;td>&lt;code>Ctrl + L&lt;/code>&lt;/td>
 &lt;td>端末（ターミナル）のクリア&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>その他&lt;/td>
 &lt;td>&lt;code>Ctrl + X, U&lt;/code>&lt;/td>
 &lt;td>Undo&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>メモ
&lt;ul>
&lt;li>&lt;code>Alt + ←/→&lt;/code> で単語単位で移動して、&lt;code>Ctrl + W&lt;/code> で単語先頭までを削除すれば、任意の位置の単語を削除できます。&lt;/li>
&lt;li>&lt;code>Esc&lt;/code> の代わりに &lt;strong>&lt;code>Ctrl + [&lt;/code>&lt;/strong> を使うことで、ホームポジションを崩さずに操作できます。&lt;/li>
&lt;li>&lt;code>Ctrl + D&lt;/code> はカーソル位置の文字を削除するけど、何も入力されていない状態で入力するとシェルを閉じるので注意。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Linuxコマンド: ポートを開いているプロセスを調べる (lsof)</title><link>https://maku.blog/p/i7zokcv/</link><pubDate>Sat, 19 Aug 2023 00:00:00 +0900</pubDate><guid>https://maku.blog/p/i7zokcv/</guid><description>&lt;h2 id="迷ったらとりあえずコレ">迷ったらとりあえずコレ&lt;/h2>
&lt;p>次のように実行すると、TCP でポートを開いて LISTEN 状態になっているプロセスのコマンド名や PID の一覧を表示できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">開いている TCP ポートの一覧を表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> lsof -i tcp -s tcp:listen -P
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ControlCe 604 maku 24u IPv4 0xbf4647db74c55935 0t0 TCP *:7000 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ControlCe 604 maku 25u IPv6 0x27a96e6374c5592c 0t0 TCP *:7000 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ControlCe 604 maku 26u IPv4 0xbf46527374c55935 0t0 TCP *:5000 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ControlCe 604 maku 27u IPv6 0x27a9756374c5592c 0t0 TCP *:5000 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">deno 8572 maku 14u IPv4 0xbc6a127374c55935 0t0 TCP *:8000 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">hugo 10971 maku 6u IPv4 0xbcba127374c55935 0t0 TCP localhost:50001 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">hugo 10975 maku 6u IPv4 0xbd35a81374c55935 0t0 TCP localhost:50002 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ruby 52070 maku 9u IPv4 0xbf461d7b74c55935 0t0 TCP localhost:4000 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ruby 52070 maku 12u IPv4 0xbd38681374c55935 0t0 TCP localhost:35729 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">node 65924 maku 38u IPv6 0x27a9356374c5592c 0t0 TCP localhost:5173 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Dropbox 68519 maku 114u IPv4 0xbc67e81374c55935 0t0 TCP *:17500 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Dropbox 68519 maku 115u IPv6 0x27a8836374c5592c 0t0 TCP *:17500 (LISTEN)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>サーバー系の開発をしていると、開いているポートがどんどん増えていくので、次のような &lt;strong>&lt;code>ports&lt;/code>&lt;/strong> エイリアスを定義しておくと便利です。&lt;/p></description></item><item><title>Linuxメモ: ユーザーのデフォルトシェルを変更する (chsh)</title><link>https://maku.blog/p/cqaq7n4/</link><pubDate>Fri, 05 Aug 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/cqaq7n4/</guid><description>&lt;p>ユーザーが Linux にログインしたときに起動するデフォルトシェルは、&lt;strong>&lt;code>chsh&lt;/code>&lt;/strong> (change login shell) コマンドで変更することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">カレントユーザーのログインシェルを /bin/bash に変更する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> chsh -s /bin/bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>-s&lt;/code> オプションではシェルのフルパスを指定する必要があることに注意してください。
例えば、Bash を使いたければ、&lt;code>bash&lt;/code> ではなく &lt;code>/bin/bash&lt;/code> と入力します。
&lt;code>-s&lt;/code> オプションを省略すると、インタラクティブにシェルのパスを入力できます。&lt;/p>
&lt;aside style="display: flex; border: thin dashed gray;">
&lt;div style="align-self: stretch; writing-mode: vertical-lr; text-align: center; letter-spacing: 0.2em; color: #666; border-right: thin dashed gray; padding: 0.4em 0; line-height: 1.5;">参考&lt;/div>
&lt;div style="align-self: center; padding: 0.6em 0; line-height: 1.2 !important;">&lt;ul>
&lt;li>&lt;a href="../../p/7m5k3hx/">Linux のユーザーを管理する (useradd, userdel, passwd)&lt;/a>
&lt;ul>
&lt;li>ユーザーを追加する (&lt;code>useradd&lt;/code>) ときに、ついでにログインシェルを指定できます。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;/aside>
&lt;p>現在のシステムで選択可能なシェルの一覧は、&lt;strong>&lt;code>/etc/shells&lt;/code>&lt;/strong> ファイルで確認できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">/etc/shells（Ubuntu 22.04 の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/shells: valid login shells&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/rbash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/rbash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/dash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/dash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/tmux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/screen&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ユーザーごとのログインシェルが現在どう設定されているかは、&lt;strong>&lt;code>/etc/passwd&lt;/code>&lt;/strong> ファイルで確認できます。&lt;/p></description></item><item><title>Linux で起動しているサービスの一覧を表示する</title><link>https://maku.blog/p/co7n5jy/</link><pubDate>Sun, 17 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/co7n5jy/</guid><description>&lt;h2 id="pstree-コマンドを使う方法">pstree コマンドを使う方法&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> pstree
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">systemd─┬─ModemManager───2*[{ModemManager}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─acpid
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─2*[agetty]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─cron
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─dbus-daemon
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─fail2ban-server───4*[{fail2ban-server}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─irqbalance───{irqbalance}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─multipathd───6*[{multipathd}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─networkd-dispat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─ntpd───{ntpd}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─packagekitd───2*[{packagekitd}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─polkitd───2*[{polkitd}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─rsyslogd───3*[{rsyslogd}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─snapd───10*[{snapd}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─sshd───sshd───sh───pstree
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─sshd───sshd───sshd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─systemd───(sd-pam)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─systemd-journal
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─systemd-logind
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─systemd-network
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─systemd-resolve
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─systemd-udevd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> ├─udisksd───4*[{udisksd}]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> └─unattended-upgr───{unattended-upgr}
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>systemd&lt;/code> で各種サービスが動作していることを確認できます。&lt;/p>
&lt;h2 id="systemctl-コマンドを使う方法">systemctl コマンドを使う方法&lt;/h2>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> systemctl list-unit-files --type&lt;span class="o">=&lt;/span>service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">UNIT FILE STATE VENDOR PRESET
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">acpid.service enabled enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">apparmor.service enabled enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">apport-autoreport.service static -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">apport-forward@.service static -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">apport.service generated -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">apt-daily-upgrade.service static -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">apt-daily.service static -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">autovt@.service alias -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">blk-availability.service enabled enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">bolt.service static -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">cloud-config.service enabled enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">cloud-final.service enabled enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">cloud-init-hotplugd.service static -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...（省略）...
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> systemctl status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="service-コマンドを使う方法">service コマンドを使う方法&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> service --status-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...（省略）...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> [ + ] resolvconf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> [ - ] rsync
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> [ - ] screen-cleanup
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> [ + ] ssh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> [ + ] udev
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> [ + ] ufw
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...（省略）...
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>記号の意味:&lt;/p></description></item><item><title>Linuxメモ: sudo で管理者権限でコマンド実行できるようにする (/etc/sudoers, visudo)</title><link>https://maku.blog/p/h5v6gqz/</link><pubDate>Sun, 10 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/h5v6gqz/</guid><description>&lt;h2 id="sudo-とは">sudo とは？&lt;/h2>
&lt;p>Linux の &lt;strong>&lt;code>sudo&lt;/code>&lt;/strong> コマンドは、一時的に &lt;code>root&lt;/code> ユーザー（あるいは任意のユーザー）としてコマンドを実行できるようにするためのコマンドです。
システムの管理者的な立場の人であっても、常に &lt;code>root&lt;/code> ユーザーとして作業するのはリスクがあるため、必要に応じて &lt;code>sudo&lt;/code> でコマンド実行することが推奨されています。&lt;/p>
&lt;p>&lt;code>sudo&lt;/code> コマンドは、次のような形で実行します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo ＜管理者権限が必要なコマンド＞
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば、&lt;code>/etc/shadow&lt;/code> ファイルの閲覧は &lt;code>root&lt;/code> ユーザーにしか許可されていませんが、カレントユーザーが &lt;code>sudoers&lt;/code>（後述）に登録されていれば、次のようにして読み込むことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo cat /etc/shadow
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">[sudo] password for maku: （カレントユーザーのパスワードを入力）
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>APT パッケージのインストールでも &lt;code>sudo&lt;/code> はよく使われますね。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo apt install ansible
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">[sudo] password for maku: （カレントユーザーのパスワードを入力）
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>sudo&lt;/code> 経由でコマンドを実行するときにパスワードの入力を求められますが、このとき入力するパスワードは &lt;code>root&lt;/code> のものではなく、カレントユーザーのパスワードであることに注意してください（OpenSUSE の場合は例外的に &lt;code>root&lt;/code> のパスワード）。
つまり、&lt;code>sudo&lt;/code> は一般ユーザーが自分のパスワードで実行権限を切り替えてコマンドを実行する仕組みであり、&lt;code>sudoers&lt;/code> の設定は慎重に行わなければいけません。&lt;/p>
&lt;h2 id="etcsudoers-ファイルと-visudo-コマンド">/etc/sudoers ファイルと visudo コマンド&lt;/h2>
&lt;h3 id="etcsudoers-ファイル">/etc/sudoers ファイル&lt;/h3>
&lt;p>どのユーザーが、どのコマンドを、どのユーザーとして実行できるかを管理しているのが &lt;strong>&lt;code>/etc/sudoers&lt;/code>&lt;/strong> ファイルです。
ただし、このファイルは次のように編集ができないよう権限設定されており、直接エディタで開いて編集することはできません。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> ls -l /etc/sudoers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">-r--r----- 1 root root 1671 Feb 8 17:41 /etc/sudoers
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="visudo-コマンド">visudo コマンド&lt;/h3>
&lt;p>&lt;code>/etc/sudoers&lt;/code> ファイルを編集するには、特別に用意された &lt;strong>&lt;code>visudo&lt;/code>&lt;/strong> コマンドを使用する必要があります。
次のように実行すれば、デフォルトエディタで &lt;code>/etc/sudoers&lt;/code> ファイルを開くことができます。&lt;/p></description></item><item><title>Linux ディストリビューションのバージョンの調べ方まとめ</title><link>https://maku.blog/p/vdweubq/</link><pubDate>Sat, 09 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/vdweubq/</guid><description>&lt;p>Linux ディストリビューションのバージョン情報を調べる方法はいくつかありますが、&lt;strong>&lt;code>/etc/os-release&lt;/code>&lt;/strong> ファイルの内容を見るのが簡単です。&lt;/p>
&lt;h2 id="etcos-release-ファイル">/etc/os-release ファイル&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Ubuntu 22.04 の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> cat /etc/os-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">PRETTY_NAME=&amp;#34;Ubuntu 22.04 LTS&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME=&amp;#34;Ubuntu&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION_ID=&amp;#34;22.04&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION=&amp;#34;22.04 (Jammy Jellyfish)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION_CODENAME=jammy
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ID=ubuntu
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ID_LIKE=debian
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">HOME_URL=&amp;#34;https://www.ubuntu.com/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">SUPPORT_URL=&amp;#34;https://help.ubuntu.com/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">BUG_REPORT_URL=&amp;#34;https://bugs.launchpad.net/ubuntu/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">PRIVACY_POLICY_URL=&amp;#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">UBUNTU_CODENAME=jammy
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Debian 11 の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> cat /etc/os-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">PRETTY_NAME=&amp;#34;Debian GNU/Linux 11 (bullseye)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME=&amp;#34;Debian GNU/Linux&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION_ID=&amp;#34;11&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION=&amp;#34;11 (bullseye)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION_CODENAME=bullseye
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ID=debian
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">HOME_URL=&amp;#34;https://www.debian.org/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">SUPPORT_URL=&amp;#34;https://www.debian.org/support&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">BUG_REPORT_URL=&amp;#34;https://bugs.debian.org/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Rocky Linux 8.6 の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> cat /etc/os-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME=&amp;#34;Rocky Linux&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION=&amp;#34;8.6 (Green Obsidian)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ID=&amp;#34;rocky&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ID_LIKE=&amp;#34;rhel centos fedora&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION_ID=&amp;#34;8.6&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">PLATFORM_ID=&amp;#34;platform:el8&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">PRETTY_NAME=&amp;#34;Rocky Linux 8.6 (Green Obsidian)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ANSI_COLOR=&amp;#34;0;32&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">CPE_NAME=&amp;#34;cpe:/o:rocky:rocky:8:GA&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">HOME_URL=&amp;#34;https://rockylinux.org/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">BUG_REPORT_URL=&amp;#34;https://bugs.rockylinux.org/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ROCKY_SUPPORT_PRODUCT=&amp;#34;Rocky Linux&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ROCKY_SUPPORT_PRODUCT_VERSION=&amp;#34;8&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">REDHAT_SUPPORT_PRODUCT=&amp;#34;Rocky Linux&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">REDHAT_SUPPORT_PRODUCT_VERSION=&amp;#34;8&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">AlmaLinux 8.6 の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> cat /etc/os-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME=&amp;#34;AlmaLinux&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION=&amp;#34;8.6 (Sky Tiger)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ID=&amp;#34;almalinux&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ID_LIKE=&amp;#34;rhel centos fedora&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">VERSION_ID=&amp;#34;8.6&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">PLATFORM_ID=&amp;#34;platform:el8&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">PRETTY_NAME=&amp;#34;AlmaLinux 8.6 (Sky Tiger)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ANSI_COLOR=&amp;#34;0;34&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">LOGO=&amp;#34;fedora-logo-icon&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">CPE_NAME=&amp;#34;cpe:/o:almalinux:almalinux:8::baseos&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">HOME_URL=&amp;#34;https://almalinux.org/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">DOCUMENTATION_URL=&amp;#34;https://wiki.almalinux.org/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">BUG_REPORT_URL=&amp;#34;https://bugs.almalinux.org/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ALMALINUX_MANTISBT_PROJECT=&amp;#34;AlmaLinux-8&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ALMALINUX_MANTISBT_PROJECT_VERSION=&amp;#34;8.6&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">REDHAT_SUPPORT_PRODUCT=&amp;#34;AlmaLinux&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">REDHAT_SUPPORT_PRODUCT_VERSION=&amp;#34;8.6&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="etcsystem-release-ファイル">/etc/system-release ファイル&lt;/h2>
&lt;p>Red Hat 系 Linux において簡潔なバージョン情報が格納されたファイルです。
&lt;strong>&lt;code>/etc/system-release&lt;/code>&lt;/strong> ファイルは、ディストリビューションごとに次のようなファイルへのシンボリックリンクになっています。&lt;/p></description></item><item><title>Linuxメモ: Linux のユーザーを管理する (useradd, userdel, passwd)</title><link>https://maku.blog/p/7m5k3hx/</link><pubDate>Sat, 09 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/7m5k3hx/</guid><description>&lt;p>Linux をインストールしたばかりの状態では、通常は特権ユーザーの &lt;code>root&lt;/code> でログインできる状態になっています。
システム管理以外の日常的な作業には、&lt;code>useradd&lt;/code> コマンドで作成した一般ユーザーを用います。&lt;/p>
&lt;h2 id="ユーザーを作成する-useradd">ユーザーを作成する (useradd)&lt;/h2>
&lt;p>新しいユーザーを作成するには、&lt;strong>&lt;code>useradd&lt;/code>&lt;/strong> コマンドを使用します。
&lt;code>-m&lt;/code> オプションを指定することで、ユーザーのホームディレクトリを同時に作成することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ユーザー maku を作成する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"># useradd maku （ユーザーを作成するだけ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># useradd -m maku （ホームディレクトリを同時に作成する）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># useradd -m -s /bin/bash maku （さらに、ログインシェルを設定する）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># useradd -m -s /bin/bash -G admin maku （さらに、admin グループに所属させる）&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;ul>
&lt;li>オプションの意味
&lt;ul>
&lt;li>&lt;strong>&lt;code>-m&lt;/code>&lt;/strong> &amp;hellip; ユーザーのホームディレクトリを同時に作成します&lt;/li>
&lt;li>&lt;strong>&lt;code>-s /bin/bash&lt;/code>&lt;/strong> &amp;hellip; ログインシェルを &lt;code>/bin/bash&lt;/code> に設定します。省略した場合は、&lt;code>/etc/default/useradd&lt;/code> ファイルで定義されているシェルが設定されます（Ubuntu 22.04 の場合は &lt;code>/bin/sh&lt;/code> ですが、&lt;code>dash&lt;/code> へのシンボリックリンクです）。ユーザー生成後にログインシェルを変更したい場合は、&lt;a href="../../p/cqaq7n4/">&lt;code>chsh&lt;/code> コマンド&lt;/a> を使用します。&lt;/li>
&lt;li>&lt;strong>&lt;code>-G admin&lt;/code>&lt;/strong> &amp;hellip; ユーザーを &lt;code>admin&lt;/code> グループに所属させます（&lt;code>admin&lt;/code> は Debian/Ubuntu で管理者を表すグループです）。&lt;a href="../../p/uexfvcs/">グループの制御&lt;/a> はユーザー作成後にも行うことができます。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>&lt;code>/etc/passwd&lt;/code>&lt;/strong> ファイルを見ると、ユーザーが追加されていることを確認できます。
デフォルトでは、最初に作成したユーザーのユーザー ID は 1000 になります（その後追加するユーザーは、1001、1002、1003 となります）。&lt;/p></description></item><item><title>各種 Linux のファイアウォール設定ツール</title><link>https://maku.blog/p/ceow5cj/</link><pubDate>Sat, 09 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/ceow5cj/</guid><description>&lt;p>従来 Linux のパケットフィルタリングの設定には、iptables が使われていましたが、現在ではより直感的な操作が可能な ufw、firewalld、nftables といったツールが使われています。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>ディストリビューション&lt;/th>
 &lt;th>ファイアウォール設定ツール&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>Ubuntu 8.04 LTS 以降&lt;/td>
 &lt;td>ufw&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>CentOS 7 以降&lt;/td>
 &lt;td>firewalld&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Fedora 18 以降&lt;/td>
 &lt;td>firewalld&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Rocky Linux&lt;/td>
 &lt;td>firewalld および nftables&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>参考: &lt;a href="../../p/drar8o4/">ufw (Uncomplicated Firewall) によるファイアウォール設定&lt;/a>&lt;/li>
&lt;li>参考: &lt;a href="../../p/ij6kxeq/">firewalld によるファイアウォール設定&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>どのツールも下回りとしては Linux カーネルの Netfilter サブシステムの仕組みを利用しています。&lt;/p>
&lt;pre tabindex="0">&lt;code> ufw ---+
 |
firewalld ---+---&amp;gt; Netfilter (Linux kernel)
 |
 iptables ---+
&lt;/code>&lt;/pre></description></item><item><title>Linuxメモ: firewalld による Linux のファイアウォール設定</title><link>https://maku.blog/p/ij6kxeq/</link><pubDate>Wed, 06 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/ij6kxeq/</guid><description>&lt;p>Red Hat 系 Linux のネットワークのアクセス制御には、従来 &lt;code>iptables&lt;/code> が用いられていましたが、現在は &lt;strong>&lt;code>firewalld&lt;/code>&lt;/strong> に置き換えられています。
Fedora 18 や CentOS 7、および CentOS の後継的な位置付けの Rocky Linux 8、AlmaLinux 8 には &lt;code>firewalld&lt;/code> が標準搭載されています（&lt;code>nftables&lt;/code> というのもあります）。&lt;/p>
&lt;p>CentOS 6 の頃は &lt;code>iptables&lt;/code> が使われていました。
&lt;code>iptables&lt;/code> のルールは &lt;code>/etc/sysconfig/iptables&lt;/code> というファイルに保存され、システム再起動時にはこのファイルから設定を復帰させるという動作をしていました。
&lt;code>iptables&lt;/code> はコマンド体系が煩雑すぎるという問題があり、より直感的な設定が可能な &lt;code>firewalld&lt;/code> が作成されました。
&lt;code>firewalld&lt;/code> では「一時的な」ルール設定などにも対応しています。&lt;/p>
&lt;p>ファイアウォールの設定ツールは変化してきていますが、下回りとして Linux カーネルの Netfilter (netfilter firewall) が使用されていることに変わりはありません。&lt;/p>
&lt;h2 id="firewalld-のインストール">firewalld のインストール&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">apt でのインストール&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo apt install firewalld
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="firewalld-の使い方">firewalld の使い方&lt;/h2>
&lt;h3 id="firewalld-の起動停止と自動起動設定">firewalld の起動・停止と自動起動設定&lt;/h3>
&lt;p>&lt;code>firewalld&lt;/code> は、&lt;code>systemd&lt;/code> のサービスとして自動起動できます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> systemctl status firewalld &lt;span class="c1"># 現在の状態を確認&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> systemctl start firewalld &lt;span class="c1"># 直ちに firewalld を起動&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> systemctl stop firewalld &lt;span class="c1"># 直ちに firewalld を停止&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> systemctl &lt;span class="nb">enable&lt;/span> firewalld &lt;span class="c1"># 自動起動する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> systemctl disable firewalld &lt;span class="c1"># 自動起動しない&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="firewalld-の設定を確認する">firewalld の設定を確認する&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> firewall-cmd --list-all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="firewalld-の設定を変更する">firewalld の設定を変更する&lt;/h3>
&lt;p>firewalld で HTTP 通信を許可するには次のようにします。&lt;/p></description></item><item><title>Linuxコマンド: TCP/TDP ポートの通信状態を確認する (ss)</title><link>https://maku.blog/p/sg2m6wm/</link><pubDate>Tue, 05 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/sg2m6wm/</guid><description>&lt;p>関連コマンド: &lt;a href="../../p/p7q7n4i/">ip コマンド&lt;/a>&lt;/p>
&lt;h2 id="ss-コマンドとは">ss コマンドとは&lt;/h2>
&lt;p>Linux の &lt;strong>&lt;code>ss&lt;/code>&lt;/strong> コマンド (socket statistics) は、TCP ポートや UDP ポートの通信状態を確認するためのコマンドで、過去に使われていた &lt;code>net-tools&lt;/code> パッケージの &lt;code>netstat&lt;/code> コマンドの後継です。
Cent OS 7 ではデフォルトで &lt;code>ss&lt;/code> コマンドが採用されています。&lt;/p>
&lt;p>APT の &lt;code>iproute2&lt;/code> パッケージをインストールすると、&lt;code>ss&lt;/code> コマンドを使用できるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ss コマンドのインストール&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> apt update &lt;span class="c1"># パッケージリストの更新&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> apt install -y iproute2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>iptable2&lt;/code> パッケージをインストールすると、一緒に &lt;a href="../../p/p7q7n4i/">ip コマンド&lt;/a> などもインストールされます。&lt;/p>
&lt;h2 id="ss-サブコマンド">ss サブコマンド&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;th>対応する旧コマンド&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>ss -nat&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>TCP ポートの通信状態を確認&lt;/td>
 &lt;td>&lt;code>netstat -nat&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>ss -nlt&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>LISTEN（待ち受け）状態の TCP ポートを確認&lt;/td>
 &lt;td>&lt;code>netstat -nlt&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>ss -nau&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>UDP ポートの通信状態を確認&lt;br/>UDP ソケットの &lt;code>State&lt;/code> カラムは &lt;code>UNCONN&lt;/code> と表示される&lt;/td>
 &lt;td>&lt;code>netstat -nau&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title>Linux コマンド: ufw による Ubuntu のファイアウォール設定</title><link>https://maku.blog/p/drar8o4/</link><pubDate>Mon, 04 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/drar8o4/</guid><description>&lt;h2 id="ufw-とは">ufw とは&lt;/h2>
&lt;p>&lt;strong>ufw (Uncomplicated Firewall)&lt;/strong> は Debian/Ubuntu 系 Linux でパケットフィルタリングの設定（ファイアウォール設定）を行うためのツールです。
従来、パケットフィルタリングのツールとしては iptables が使われていましたが、iptables は設定が煩雑で扱いづらいという問題を抱えていたため、直感的な設定を行うためのツールとして ufw が開発されました。
ufw は Ubuntu 8.04 LTS 以降で使用することができます。&lt;/p>
&lt;h2 id="ufw-のサブコマンド">ufw のサブコマンド&lt;/h2>
&lt;h3 id="通常コマンド">通常コマンド&lt;/h3>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;a href="#ufw-enable">&lt;code>ufw enable&lt;/code>&lt;/a>&lt;/td>
 &lt;td>enables the firewall&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;a href="#ufw-disable">&lt;code>ufw disable&lt;/code>&lt;/a>&lt;/td>
 &lt;td>disables the firewall&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw default ARG&lt;/code>&lt;/td>
 &lt;td>set default policy&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw logging LEVEL&lt;/code>&lt;/td>
 &lt;td>set logging to LEVEL&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;a href="#ufw-allow">&lt;code>ufw allow ARGS&lt;/code>&lt;/a>&lt;/td>
 &lt;td>add allow rule&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw deny ARGS&lt;/code>&lt;/td>
 &lt;td>add deny rule&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw reject ARGS&lt;/code>&lt;/td>
 &lt;td>add reject rule&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;a href="#ufw-limit">&lt;code>ufw limit ARGS&lt;/code>&lt;/a>&lt;/td>
 &lt;td>add limit rule&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;a href="#ufw-delete">&lt;code>ufw delete RULE|NUM&lt;/code>&lt;/a>&lt;/td>
 &lt;td>delete RULE&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw insert NUM RULE&lt;/code>&lt;/td>
 &lt;td>insert RULE at NUM&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw prepend RULE&lt;/code>&lt;/td>
 &lt;td>prepend RULE&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw route RULE&lt;/code>&lt;/td>
 &lt;td>add route RULE&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw route delete RULE|NUM&lt;/code>&lt;/td>
 &lt;td>delete route RULE&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw route insert NUM RULE&lt;/code>&lt;/td>
 &lt;td>insert route RULE at NUM&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw reload&lt;/code>&lt;/td>
 &lt;td>reload firewall&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw reset&lt;/code>&lt;/td>
 &lt;td>reset firewall&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;a href="#ufw-status">&lt;code>ufw status&lt;/code>&lt;/a>&lt;/td>
 &lt;td>show firewall status&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw status numbered&lt;/code>&lt;/td>
 &lt;td>show firewall status as numbered list of RULES&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw status verbose&lt;/code>&lt;/td>
 &lt;td>show verbose firewall status&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw show ARG&lt;/code>&lt;/td>
 &lt;td>show firewall report&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw version&lt;/code>&lt;/td>
 &lt;td>display version information&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h3 id="アプリケーションプロファイル">アプリケーションプロファイル&lt;/h3>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>ufw app list&lt;/code>&lt;/td>
 &lt;td>list application profiles&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw app info PROFILE&lt;/code>&lt;/td>
 &lt;td>show information on PROFILE&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw app update PROFILE&lt;/code>&lt;/td>
 &lt;td>update PROFILE&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ufw app default ARG&lt;/code>&lt;/td>
 &lt;td>set default application policy&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="ufw-の基本的な使い方">ufw の基本的な使い方&lt;/h2>
&lt;h3 id="ufw-status">ufw で現在の設定を確認する (ufw status)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo ufw status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Status: active
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">To Action From
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">-- ------ ----
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">OpenSSH ALLOW Anywhere
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">OpenSSH (v6) ALLOW Anywhere (v6)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>1 行目の表示で、ufw によるファイアウォールが有効 (&lt;code>Status: active&lt;/code>) になっているか、無効 (&lt;code>Status: inactive&lt;/code>) になっているかを確認することができます。&lt;/p></description></item><item><title>Linuxメモ: Linux のグループを管理する (groupadd, groupdel, gpasswd)</title><link>https://maku.blog/p/uexfvcs/</link><pubDate>Mon, 04 Jul 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/uexfvcs/</guid><description>&lt;h2 id="グループの作成と削除-groupadd-groupdel">グループの作成と削除 (groupadd, groupdel)&lt;/h2>
&lt;p>Linux でグループを作成／削除するには、&lt;strong>&lt;code>groupadd&lt;/code>&lt;/strong> および &lt;strong>&lt;code>groupdel&lt;/code>&lt;/strong> コマンドを使用します。
グループ作成時にグループ ID（数値）が自動的に割り当てられますが、&lt;code>-g&lt;/code> オプションで明示することもできます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">グループ admin を作成する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo groupadd admin &lt;span class="c1"># グループ ID は自動で割り当てる&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo groupadd -g &lt;span class="m">1234&lt;/span> admin &lt;span class="c1"># グループ ID を明示する&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">グループ admin を削除する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo groupdel admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ プライマリ・グループ&lt;/span>
 &lt;span class="xNote_body">&lt;code>useradd&lt;/code> コマンドでユーザーを作成すると、デフォルトでそのユーザーは、ユーザー名と同じ名前のグループに所属することになります。
このグループをプライマリ・グループと呼びます。
例えば、&lt;code>useradd maku&lt;/code> でユーザー &lt;code>maku&lt;/code> を作成すると、同時に &lt;code>maku&lt;/code> というプライマリ・グループが作成されます。
&lt;code>groupdel&lt;/code> コマンドでプライマリ・グループを削除することはできません。&lt;/span>
&lt;/div>
&lt;h2 id="グループにユーザーを追加する-gpasswd">グループにユーザーを追加する (gpasswd)&lt;/h2>
&lt;p>Linux のグループに既存のユーザーを追加／削除するには、&lt;strong>&lt;code>gpasswd&lt;/code>&lt;/strong> コマンドを使用します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">グループ admin にユーザー maku を追加する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo gpasswd -a maku admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Adding user maku to group admin
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">グループ admin からユーザー maku を削除する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> sudo gpasswd -d maku admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>これらの設定を反映させるには、そのユーザーでログインし直す必要があります。&lt;/p></description></item><item><title>Linuxコマンド: ip コマンドの使い方</title><link>https://maku.blog/p/p7q7n4i/</link><pubDate>Thu, 16 Jun 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/p7q7n4i/</guid><description>&lt;p>関連コマンド: &lt;a href="../../p/sg2m6wm/">ss コマンド&lt;/a>&lt;/p>
&lt;h2 id="ip-コマンドとは">ip コマンドとは&lt;/h2>
&lt;p>Linux の &lt;strong>&lt;code>ip&lt;/code>&lt;/strong> コマンドを使うと、ネットワークデバイスやルーティングテーブル、ARP テーブルなどの確認・設定を行うことができます。
過去に &lt;code>net-tools&lt;/code> パッケージで提供されていた、&lt;code>ifconfig&lt;/code>、&lt;code>route&lt;/code>、&lt;code>arp&lt;/code>、&lt;code>netstat&lt;/code> コマンドは deprecated（非推奨）扱いになっています。&lt;/p>
&lt;h2 id="ip-コマンドをインストールする">ip コマンドをインストールする&lt;/h2>
&lt;p>&lt;strong>&lt;code>ip&lt;/code>&lt;/strong> コマンドは APT の &lt;strong>&lt;code>iproute2&lt;/code>&lt;/strong> パッケージに含まれています。
Docker の Ubuntu コンテナなどで &lt;code>ip&lt;/code> コマンドが見つからない場合は、次のようにインストールできます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> apt update &lt;span class="c1"># パッケージリストの更新&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> apt install -y iproute2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>iproute2 パッケージには、&lt;code>ip&lt;/code> コマンド以外にもいろいろなコマンドが含まれています（参考: iproute2 に含まれるファイルのリスト ─ &lt;a href="https://packages.debian.org/sid/amd64/iproute2/filelist">Debian&lt;/a> / &lt;a href="https://archlinux.org/packages/core/x86_64/iproute2/files/">archlinux&lt;/a>）。&lt;/p>
&lt;div class="xAccordion">
 &lt;input id="id-879615234" type="checkbox">
 &lt;label class="xAccordion_title" for="id-879615234">iproute2 のインストールで使えるようになるコマンド&lt;/label>
 &lt;div class="xAccordion_body">
&lt;ul>
&lt;li>
&lt;p>&lt;code>arpd&lt;/code> - userspace arp daemon&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>bridge&lt;/code> - show / manipulate bridge addresses and devices&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>devlink&lt;/code> - Devlink tool&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>ip&lt;/code>&lt;/strong> - show / manipulate routing, devices, policy routing and tunnels&lt;/p></description></item><item><title>Linuxメモ: Bluetooth 関連コマンドのメモ (hciconfig, bluetoothctl)</title><link>https://maku.blog/p/ter3doz/</link><pubDate>Sun, 20 Feb 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/ter3doz/</guid><description>&lt;h2 id="bluetooth-デバイスの情報を表示する-hciconfig">Bluetooth デバイスの情報を表示する (hciconfig)&lt;/h2>
&lt;p>&lt;strong>&lt;code>hciconfig&lt;/code>&lt;/strong> は、Bluetooth デバイスの情報表示や設定を行うためのコマンドです。
HCI プロトコルで Bluetooth コントローラーと通信します。
&lt;code>hciconfig&lt;/code> コマンドが見つからない場合は、&lt;strong>&lt;code>bluez&lt;/code>&lt;/strong> パッケージをインストールします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Ubuntu への bluez パッケージのインストール&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt install -y bluez
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>Bluetooth のデバイス名には &lt;code>hci0&lt;/code> や &lt;code>hci1&lt;/code> といった名前が付けられ、&lt;code>hciconfig&lt;/code> コマンドでそれらの一覧を表示することができます。
次の実行例は、Raspberry Pi 4 に USB Bluetooth ドングルを接続した状態で &lt;code>hciconfig&lt;/code> コマンドを実行したときの結果です（アドレスは一部伏せてます）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hciconfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">hci1: Type: Primary Bus: USB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> BD Address: 00:E0:4C:XX:XX:XX ACL MTU: 1021:6 SCO MTU: 255:12
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> UP RUNNING
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> RX bytes:2186 acl:0 sco:0 events:105 errors:0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> TX bytes:12322 acl:0 sco:0 commands:105 errors:0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">hci0: Type: Primary Bus: UART
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> BD Address: DC:A6:32:XX:XX:XX ACL MTU: 1021:8 SCO MTU: 64:1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> UP RUNNING
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> RX bytes:1514 acl:0 sco:0 events:90 errors:0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> TX bytes:2061 acl:0 sco:0 commands:90 errors:0
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>USB ドングルの Bluetooth デバイスが &lt;code>hci1&lt;/code> (Bus: USB)、Raspberry Pi 4 組み込みの Bluetooth デバイスが &lt;code>hci0&lt;/code> (Bus: UART) として認識されているのが分かります。
&lt;code>hciconfig&lt;/code> コマンドに &lt;code>-a (--all)&lt;/code> オプションをつけて実行すると、詳細情報を表示できます。&lt;/p></description></item><item><title>Linuxメモ: Netplan で Ubuntu のネットワーク設定を行う</title><link>https://maku.blog/p/7q3dnx8/</link><pubDate>Thu, 20 Jan 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/7q3dnx8/</guid><description>&lt;h2 id="netplan-とは">Netplan とは&lt;/h2>
&lt;p>&lt;a href="https://netplan.io">Netplan&lt;/a> は Linux のネットワーク設定を簡潔な YAML ファイルで行う仕組みで、Ubuntu 18.04 以降（正確には 17 以降）で採用されています。
昔の Ubuntu/Debian で使用されていた &lt;code>/etc/network/interfaces&lt;/code> という設定ファイルはもう使われていません。&lt;/p>
&lt;p>実際のネットワーク管理は、バックエンドで動作する NetworkManager や systemd-networkd といったネットワークデーモンが行うのですが、Netplan は YAML 設定ファイルの内容を適切な形に変換して、これらのネットワークデーモンに渡してくれます。
つまり、バックエンドでどのようなネットワークデーモンが動いているかを意識せずに、統一されたわかりやすい YAML ファイルでネットワーク設定を行うことができます。&lt;/p>
&lt;p>Netplan は次のように振る舞います。&lt;/p>
&lt;ol>
&lt;li>システム起動時に Netplan が設定ファイル (&lt;code>/etc/netplan/*.yaml&lt;/code>) を読み込んで、各ネットワークデーモン用の設定値を &lt;code>/run&lt;/code> 以下へ書き出す&lt;/li>
&lt;li>各ネットワークデーモンが渡された情報に基づいてネットワーク設定を行う&lt;/li>
&lt;/ol>


&lt;figure class="xImage">
 &lt;img style="" width="300" height="auto" src="../../p/7q3dnx8/img-001.svg" alt="/p/7q3dnx8/img-001.svg" />
 &lt;figcaption>図: netplan.io のサイトより&lt;/figcaption>
&lt;/figure>

&lt;p>バックエンドのネットワークデーモンとして何を使うかは、設定ファイルの &lt;code>renderer&lt;/code> 部分で指定できるようになっていますが、デフォルトでは次のように動作します。&lt;/p>
&lt;ul>
&lt;li>Wifi や 無線 WAN/LTE の設定 &amp;hellip; NetworkManager に渡される&lt;/li>
&lt;li>それ以外のネットワーク（有線LANなど）の設定 &amp;hellip; networkd に渡される&lt;/li>
&lt;/ul>
&lt;p>よって、通常はどのネットワークデーモンを使うかを明示する必要はありません。&lt;/p>
&lt;h2 id="設定ファイルの読み込まれる順序">設定ファイルの読み込まれる順序&lt;/h2>
&lt;p>Netplan はすべての &lt;strong>&lt;code>/etc/netplan/*.yaml&lt;/code>&lt;/strong> ファイルを読み込みます。
複数のファイルが存在する場合は、ファイル名のアルファベット順に読み込まれ、後に読み込まれたファイルの設定値が優先的に使用されます。
例えば、&lt;/p>
&lt;ul>
&lt;li>/etc/netplan/50-cloud-init.yaml&lt;/li>
&lt;li>/etc/netplan/99-custom.yaml&lt;/li>
&lt;/ul>
&lt;p>というファイルがある場合、&lt;code>50-cloud-init.yaml&lt;/code> で設定された値は &lt;code>99-custom.yaml&lt;/code> の設定値によって上書きされます。&lt;/p></description></item><item><title>Linuxコマンド: date コマンドの使い方</title><link>https://maku.blog/p/ucnv5ck/</link><pubDate>Tue, 23 Feb 2021 00:00:00 +0900</pubDate><guid>https://maku.blog/p/ucnv5ck/</guid><description>&lt;p>Linux や macOS に搭載されている &lt;code>date&lt;/code> コマンドの使い方のメモです。&lt;/p>
&lt;h2 id="日時をフォーマットして出力する">日時をフォーマットして出力する&lt;/h2>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ date +&amp;#39;%Y-%m-%d&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021-02-23&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ date +&amp;#39;%Y-%m-%d %H:%M:%S&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021-02-23 01:08:51&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="linux-と-macos-の-date-コマンドの違い">Linux と macOS の date コマンドの違い&lt;/h2>
&lt;p>Linux と macOS では、標準でインストールされている &lt;code>date&lt;/code> コマンドが次のように異なります。&lt;/p>
&lt;ul>
&lt;li>Linux &amp;hellip; GUN/Linux 系の &lt;code>date&lt;/code> コマンド&lt;/li>
&lt;li>macOS &amp;hellip; BSD 系の &lt;code>date&lt;/code> コマンド&lt;/li>
&lt;/ul>
&lt;p>そのため、&lt;code>-d&lt;/code> オプションと &lt;code>-v&lt;/code> オプションの使い方に次のような違いがあります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">1 カ月前の日付を調べる&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ date -d &amp;#39;-1 month&amp;#39; # GNU/Linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ date -d &amp;#39;1 month ago&amp;#39; # GNU/Linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ date -v-1m # macOS&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">1 日前の日付を調べる&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ date -d &amp;#39;-1 day&amp;#39; # GNU/Linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ date -v-1d # macOS&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Linuxコマンド: curl コマンドの使用例（GET/POST リクエスト、ファイルのダウンロード）</title><link>https://maku.blog/p/phdp2do/</link><pubDate>Fri, 03 Apr 2015 00:00:00 +0900</pubDate><guid>https://maku.blog/p/phdp2do/</guid><description>&lt;p>&lt;code>curl&lt;/code> コマンドは URL を指定してサーバー上のリソースにアクセスするためのコマンドで、Web API のテストや、ファイルのダウンロードに使用できます。
昔は &lt;code>curl&lt;/code> コマンドは Linux 用のコマンドという認識でしたが、Windows 10 には標準搭載されるようになりました。
&lt;code>curl&lt;/code> は様々なプロトコルで通信できますが、主に HTTP/HTTPS が使用されます。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../../p/2sv4bqw/">curl コマンドのチートシート&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="curl-コマンドでファイルをダウンロードする">curl コマンドでファイルをダウンロードする&lt;/h2>
&lt;p>curl コマンドはデフォルトではダウンロードしたファイルを標準出力に出力します。
&lt;strong>&lt;code>-o&lt;/code>&lt;/strong>（小文字のオー）オプションや、&lt;strong>&lt;code>-O&lt;/code>&lt;/strong>（大文字のオー）オプションを指定することで、&lt;strong>ファイルに保存する&lt;/strong> ことができます。
同時に &lt;strong>&lt;code>-L&lt;/code>&lt;/strong> オプションを指定しておくと、リダイレクトレスポンスを自動処理してくれます。&lt;/p>
&lt;h3 id="ダウンロード元と同名で保存--o">ダウンロード元と同名で保存 (-O)&lt;/h3>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">sample.zip という名前で保存&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> curl -L -O http://example.com/sample.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="別名で保存--o">別名で保存 (-o)&lt;/h3>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">#&lt;/span> カレントディレクトリに foo.zip という名前で保存
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> curl -L -o foo.zip http://example.com/sample.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">#&lt;/span> 保存先を絶対パスで指定することも可能
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> curl -L -o /tmp/foo.zip http://example.com/sample.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="curl-コマンドで-getpost-リクエストを送信する">curl コマンドで GET/POST リクエストを送信する&lt;/h2>
&lt;p>REST API などのテストに &lt;code>curl&lt;/code> コマンドを利用できます。&lt;/p>
&lt;h3 id="get-リクエスト">GET リクエスト&lt;/h3>
&lt;p>特にオプションを指定しなければ、HTTP の GET リクエストが送信されます。&lt;/p></description></item><item><title>Linuxメモ: apt (apt-get) コマンドの使い方メモ</title><link>https://maku.blog/p/rdq2cnx/</link><pubDate>Tue, 21 Feb 2012 00:00:00 +0900</pubDate><guid>https://maku.blog/p/rdq2cnx/</guid><description>&lt;h2 id="apt-と-dpkg-の違い">apt と dpkg の違い&lt;/h2>
&lt;p>Debian/Ubuntu 系 Linux のパッケージ管理には &lt;code>apt&lt;/code> (&lt;code>apt-get&lt;/code>) コマンドを使いますが、 Low-Level なパッケージ管理コマンドとして &lt;code>dpkg&lt;/code> コマンドも備えています。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="https://wiki.debian.org/DebianPackageManagement">DebianPackageManagement - Debian Wiki&lt;/a>&lt;/li>
&lt;li>参考: &lt;a href="https://wiki.debian.org/AptCLI">AptCLI - Debian Wiki&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;code>dpkg&lt;/code> コマンドは純粋にシステムにパッケージをインストールする部分のみを担うため、インターネットからパッケージをダウンロードしたり、依存関係を自動解決したりする仕組みは備えていません。
そこで、&lt;code>apt&lt;/code> は &lt;code>dpkg&lt;/code> をラップする形でこれらの機能を提供します。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>dpkg&lt;/strong> &amp;hellip; Debian/Ubuntu にパッケージをインストールする仕組み&lt;/li>
&lt;li>&lt;strong>apt&lt;/strong> &amp;hellip; パッケージの依存関係を解決してダウンロードし、パッケージをインストールする仕組み（ただし、インストールには内部的に dpkg が使われる）&lt;/li>
&lt;/ul>
&lt;h2 id="apt-と-apt-get-の違い">apt と apt-get の違い&lt;/h2>
&lt;p>2016 年にリリースされた Ubuntu 16.04 の頃から、&lt;code>apt-get&lt;/code> コマンドの代わりに &lt;code>apt&lt;/code> コマンドが使われるようになりました。
2020 年にリリースされた Ubuntu 20.04 でも &lt;code>apt-get&lt;/code>、&lt;code>apt-cache&lt;/code> コマンドは使用可能ですが、今後は主に &lt;code>apt&lt;/code> コマンドを使っていくことになりそうです。&lt;/p>
&lt;p>&lt;code>apt&lt;/code> はもともと Linux Mint ユーザーによって作られたコマンドで、これまで &lt;code>apt-get&lt;/code> や &lt;code>apt-cache&lt;/code> などに散らばっていたコマンド群を整理して使いやすくしています。&lt;/p>
&lt;ul>
&lt;li>&lt;code>apt-get install&lt;/code> → &lt;code>apt install&lt;/code>&lt;/li>
&lt;li>&lt;code>apt-get remove&lt;/code> → &lt;code>apt remove&lt;/code>&lt;/li>
&lt;li>&lt;code>apt-cache search&lt;/code> → &lt;code>apt search&lt;/code>&lt;/li>
&lt;li>&lt;code>apt-cache show&lt;/code> → &lt;code>apt show&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;code>apt&lt;/code> によるパッケージのインストール中にはプログレスバーが表示されるなど、表示上の見やすさも考慮されています。
&lt;code>apt&lt;/code> が進化している段階では、&lt;code>apt-get&lt;/code> が廃止されてしまうことはないでしょうが、まずはパッケージ管理は &lt;code>apt&lt;/code> でできるだけ済ませ、どうしても &lt;code>apt-get&lt;/code>、&lt;code>apt-cache&lt;/code> が必要な場合にはそちらを使う、という考え方でよいと思います。&lt;/p></description></item><item><title>Linuxメモ: デバイスドライバ作成の雑多メモ</title><link>https://maku.blog/p/tm4iwbq/</link><pubDate>Wed, 08 Feb 2012 00:00:00 +0900</pubDate><guid>https://maku.blog/p/tm4iwbq/</guid><description>&lt;ul>
&lt;li>デバイスドライバは kernel 空間で動作するプログラムで、kernel の機能を使って実装することができる。一方、通常のプログラムはユーザランドで動作する。&lt;/li>
&lt;li>デバイスドライバは kernel 自体に組み込んでしまう方法と、ローダブルモジュールとして動的にロード (insmod)、アンロード (rmmod) できるようにする方法がある。&lt;/li>
&lt;li>ユーザランドで動作する普通のプログラムが、デバイスドライバの機能を使うには、デバイスファイルを介してアクセスする。&lt;/li>
&lt;li>デバイスファイルの操作は、open、close、read、write のような基本的なファイル操作関数を使用する。&lt;/li>
&lt;/ul></description></item><item><title>Linuxコマンド: テンポラリディレクトリを作成する (mktemp)</title><link>https://maku.blog/p/oo32y2x/</link><pubDate>Thu, 30 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/oo32y2x/</guid><description>&lt;p>&lt;code>mktemp&lt;/code> コマンドを使用して、一時ディレクトリを作成することができます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ mktemp -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/tmp/tmp.LE04SMiEzq&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>mktemp&lt;/code> コマンドは、作成したファイルやディレクトリのパスを表示するので、シェルスクリプト内で以下のようにすれば、そのパスを変数に格納することができます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">tempdir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>mktemp -d&lt;span class="sb">`&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Linuxコマンド: ディレクトリのサイズを調べる (du)</title><link>https://maku.blog/p/95pkhzc/</link><pubDate>Wed, 29 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/95pkhzc/</guid><description>&lt;p>&lt;code>du&lt;/code> コマンドを使って、ディレクトリ内のファイルの合計サイズを調べることができます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ du -hs mydir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">685M mydir&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>各オプションは次のような効果があります。&lt;/p>
&lt;ul>
&lt;li>&lt;code>-h (--human-readable)&lt;/code> &amp;hellip; 人に読みやすい単位でサイズ表示します（例: 1K、234M、2G）&lt;/li>
&lt;li>&lt;code>-s (--summarize)&lt;/code> &amp;hellip; 合計サイズのみを表示します&lt;/li>
&lt;/ul>
&lt;p>サイズ部分だけを表示したい場合は、&lt;code>cut&lt;/code> コマンドで 1 番目のフィールドを切り出してしまうのが手っ取り早いです。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ du -hs mydir | cut -f1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">685M&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Linux の system 関数で任意のプログラムを実行する</title><link>https://maku.blog/p/neegpac/</link><pubDate>Wed, 22 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/neegpac/</guid><description>&lt;p>Linux の &lt;code>system&lt;/code> 関数は、プログラムの起動に失敗すると -1 を返します。
また、戻り値を &lt;code>WEXITSTATUS&lt;/code> マクロにかけると、呼び出したプログラム自体の終了コード（正常時は 0）を取得することができます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdlib.h&amp;gt;&lt;/span>&lt;span class="cp"> &lt;/span>&lt;span class="c1">// system(), WEXITSTATUS
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">bool&lt;/span> &lt;span class="nf">doSystem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stderr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ERROR: Cannot execute [%s]&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">exitStatus&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">WEXITSTATUS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">exitStatus&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stderr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ERROR: [%s] returns error %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">exitStatus&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Linuxコマンド: ファイルの MIME メディアタイプを調べる (file)</title><link>https://maku.blog/p/6i7dvxj/</link><pubDate>Mon, 20 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/6i7dvxj/</guid><description>&lt;p>&lt;code>file&lt;/code> コマンドに &lt;code>-i&lt;/code> オプションを付けて実行すると、そのファイルの MIME タイプを調べることができます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ file -i sample.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample.txt: text/plain; charset=us-ascii&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Linuxコマンド: ファイルの内容を8進数や16進数でダンプする (od)</title><link>https://maku.blog/p/cw7ekxc/</link><pubDate>Mon, 20 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/cw7ekxc/</guid><description>&lt;h2 id="od-コマンドの基本8-進数でダンプする">od コマンドの基本（8 進数でダンプする）&lt;/h2>
&lt;p>&lt;code>od&lt;/code> (octal dump) コマンドを使用すると、ファイルの内容を 8 進数や 16 進数でダンプすることができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ファイル内容を 8 進数でダンプする&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ od sample.jar | head -5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0000000 045520 002003 000024 000010 000010 122216 037257 000000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0000020 000000 000000 000000 000000 000000 000024 000000 042515
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0000040 040524 044455 043116 046457 047101 043111 051505 027124
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0000060 043115 106505 005313 030302 042420 001767 103771 040374
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0000100 072502 121341 133273 020473 145340 106255 044315 007207&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>先頭のカラムはアドレスを示しています。&lt;/p>
&lt;p>アドレスの後ろからは、6 文字ずつに区切って 8 進数のデータが並びます。
8 進数では 1 文字が 3 ビットなので、6 文字で最大 18 ビットを示すことができますが、&lt;code>od&lt;/code> コマンドの出力では、その内の 16 ビット（= 2 バイト）を使用しています。
頭の 2 ビットは必ず 0 でパディングされているので、各カラムの先頭の数字は 0 か 1 になります（アスキーコードのテキストなら必ず 0 でしょう）。&lt;/p></description></item><item><title>Linuxメモ: デバイスドライバのライセンスについて</title><link>https://maku.blog/p/89tt5ie/</link><pubDate>Sun, 19 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/89tt5ie/</guid><description>&lt;p>デバイスドライバを Linux カーネルに直接取り込む（静的リンクする）場合は GPL になります。
Linux カーネル自体が GPL なので、ドライバも GPL になるということです。
このようなドライバはランレベル 1 でロードされます。&lt;/p>
&lt;p>カーネルモジュール（ローダブルモジュール）としてドライバを動的にロードする場合は、ライセンスは開発者が決めることができます。
通常はランレベル 3 になった時点で、&lt;code>insmod&lt;/code> や &lt;code>modprobe&lt;/code> コマンドでロードします。&lt;/p>
&lt;p>カーネルモジュールとして作成するドライバのライセンスは、
コードの中で以下のように &lt;code>MODULE_LICENSE&lt;/code> マクロを使用して指定します。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">MODULE_LICENSE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Dual BSD/GPL&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ライセンスは以下のものから選択することができます。&lt;/p>
&lt;ul>
&lt;li>GPL&lt;/li>
&lt;li>GPL v2&lt;/li>
&lt;li>GPL and additional rights&lt;/li>
&lt;li>Dual BSD/GPL&lt;/li>
&lt;li>Dual MIT/GPL&lt;/li>
&lt;li>Dual MPL/GPL&lt;/li>
&lt;li>Proprietary # default&lt;/li>
&lt;/ul></description></item><item><title>Linuxメモ: syslog のログの保存先の設定</title><link>https://maku.blog/p/rm78k9i/</link><pubDate>Sun, 20 Feb 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/rm78k9i/</guid><description>&lt;p>&lt;code>/etc/syslog.conf&lt;/code> に以下のように記述されていれば、debug レベルのログは &lt;code>/var/log/debug&lt;/code> に、info, notice, warn レベルのログは &lt;code>/var/log/messages&lt;/code> に記録されます。&lt;/p>
&lt;pre tabindex="0">&lt;code>*.=debug; \
 auth,authpriv.none;\
 news.none;mail.none -/var/log/debug
*.=info;*.=notice;*.=warn;\
 auth,authpriv.none;\
 cron,daemon.none;\
 mail,news.none -/var/log/messages
&lt;/code>&lt;/pre></description></item><item><title>Linuxコマンド: パッチファイルを作成・適用する (diff, patch)</title><link>https://maku.blog/p/nyehhfd/</link><pubDate>Fri, 11 May 2007 00:00:00 +0900</pubDate><guid>https://maku.blog/p/nyehhfd/</guid><description>&lt;h2 id="パッチの基本-diffpatch">パッチの基本 (diff/patch)&lt;/h2>
&lt;h3 id="パッチファイルの作成">パッチファイルの作成&lt;/h3>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">sample.cpp&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostraem&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;AAA&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ew&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sample&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostraem&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;BBB&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>例えば、上記のような &lt;code>sample.cpp&lt;/code> の内容を &lt;code>new/sample.cpp&lt;/code> に変更するためのパッチファイルを作成するには、次のように &lt;code>diff&lt;/code> コマンドを実行します。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ diff -u sample.cpp new/sample.cpp &amp;gt; sample.patch&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>-u&lt;/code> オプションは unified diff 形式で差分を出力することを示しています（他の形式でも出力可能ですが、&lt;code>patch&lt;/code> 用のパッチファイルを作成するときは、ほとんどの場合 unified diff 形式が使用されるようです）。&lt;/p>
&lt;p>これで、次のようなパッチファイルが生成されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">sample.patch&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl">&lt;span class="gd">--- sample.cpp 2007-05-11 20:36:13.265625000 +0900
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gd">&lt;/span>&lt;span class="gi">+++ new/sample.cpp 2007-05-11 20:26:31.875000000 +0900
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span>&lt;span class="gu">@@ -1,6 +1,6 @@
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span> #include &amp;lt;iostraem&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> int main() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gd">- std::cout &amp;lt;&amp;lt; &amp;#34;AAA&amp;#34; &amp;lt;&amp;lt; std::endl;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gd">&lt;/span>&lt;span class="gi">+ std::cout &amp;lt;&amp;lt; &amp;#34;BBB&amp;#34; &amp;lt;&amp;lt; std::endl;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span> return 0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>差分を表示している各行の 1 文字目は次のような意味を持っています。&lt;/p></description></item></channel></rss>