<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>プログラミング on まくろぐ</title><link>https://maku.blog/tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/</link><description>Recent content in プログラミング on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Mon, 09 Dec 2019 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/index.xml" rel="self" type="application/rss+xml"/><item><title>プログラムでレインボーカラー（虹色）のグラデーションを作成するには</title><link>https://maku.blog/p/4cbbh6o/</link><pubDate>Mon, 09 Dec 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/4cbbh6o/</guid><description>&lt;p>とあるコーディングにおいて、色を滑らかに変化させる必要があったのでメモメモ。&lt;/p>
&lt;h2 id="rgb-ではなく-hsv-で考える">RGB ではなく HSV で考える&lt;/h2>
&lt;p>何らかのプログラミング言語から虹色のグラデーションを作る必要がある場合、RGB の色空間で色調整を行うのは大変ですが、HSV の色空間で考えると簡単に表現することができます。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="160" height="160" src="../../p/4cbbh6o/hsv.png" alt="/p/4cbbh6o/hsv.png" />
 &lt;figcaption>図: HSV 色空間&lt;/figcaption>
&lt;/figure>

&lt;ul>
&lt;li>参考: &lt;a href="https://ja.wikipedia.org/wiki/HSV%E8%89%B2%E7%A9%BA%E9%96%93">HSV 色空間 - Wikipedia&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>HSV はそれぞれ下記のような情報を表しており、&lt;/p>
&lt;ul>
&lt;li>色相 (Hue): 0～360&lt;/li>
&lt;li>彩度 (Saturation・Chroma): 0～1&lt;/li>
&lt;li>明度 (Value・Brightness): 0～1&lt;/li>
&lt;/ul>
&lt;p>このうち、色相 (Hue) の値を 0～360 の間で変化させてやることでレインボーカラーを表現することができます。&lt;/p>
&lt;h2 id="プログラムのサンプル">プログラムのサンプル&lt;/h2>


&lt;figure class="xImage">
 &lt;img style="" width="240" height="79" src="../../p/4cbbh6o/rainbow-bar.png" alt="/p/4cbbh6o/rainbow-bar.png" />
 &lt;figcaption>図: 虹色グラデーションの描画&lt;/figcaption>
&lt;/figure>

&lt;p>例えば、Android では、&lt;code>android.graphics.Color.HSVToColor()&lt;/code> という関数を使用すると、HSV 色空間における値を、描画に使用するカラーデータに変換することができます。&lt;/p>
&lt;p>下記の &lt;code>ColorGenerator&lt;/code> クラスの &lt;code>nextColor()&lt;/code> メソッドを連続して呼び出すと、徐々に変わっていく色をひとつずつ取り出すことができます。
やっていることは、メソッドの呼び出しごとに、色相 (Hue) の値を少しずつ変化させているだけです。
色相 (Hue) が、何度の &lt;code>nextColor()&lt;/code> 呼び出しで一周するかは、コンストラクタの &lt;code>steps&lt;/code> パラメータで指定できるようにしています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ColorGenerator.kt&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">ColorGenerator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">val&lt;/span> &lt;span class="py">steps&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">initialHue&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Float&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0.0F&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">hueStep&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Float&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">360F&lt;/span> &lt;span class="p">/&lt;/span> &lt;span class="n">steps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">var&lt;/span> &lt;span class="py">currentHue&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">initialHue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fun&lt;/span> &lt;span class="nf">nextColor&lt;/span>&lt;span class="p">():&lt;/span> &lt;span class="n">Int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">hsv&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">floatArrayOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">currentHue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1.0F&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1.0F&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">color&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nc">Color&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">HSVToColor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">255&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hsv&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">currentHue&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">currentHue&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">hueStep&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">%&lt;/span> &lt;span class="m">360F&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">color&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>次のコードは、このクラスを使って、虹色のグラデーション（細い矩形の連続）を描画するコードの抜粋です。
ここでは、色を 30 段階に分けて描画しています。&lt;/p></description></item><item><title>大規模なコードを読み解くコツ（コードリーディング）</title><link>https://maku.blog/p/b34f2vu/</link><pubDate>Sat, 12 May 2007 00:00:00 +0900</pubDate><guid>https://maku.blog/p/b34f2vu/</guid><description>&lt;h2 id="階層構造の意味をメモする">階層構造の意味をメモする&lt;/h2>
&lt;p>大規模なプロジェクトのソースコードを読む場合は、まずはディレクトリがどのようなポリシーで分けられているのか、各ディレクトリ内のコードの役割などのメモを作成していくことをオススメします。&lt;/p>
&lt;p>役割のわからないディレクトリについては、そのままにしておいて、わかった時点で詳細を追加していけば OK です。&lt;/p>
&lt;pre tabindex="0">&lt;code>project
 +-- tools（ほげほげ用のツール）
 +-- src
 +-- hogeui（ほげほげインタフェースに関するクラス）
 +-- foobar（？）
&lt;/code>&lt;/pre></description></item></channel></rss>