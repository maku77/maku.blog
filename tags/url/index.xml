<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>URL on まくろぐ</title><link>https://maku.blog/tags/url/</link><description>Recent content in URL on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Wed, 22 Jun 2022 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/url/index.xml" rel="self" type="application/rss+xml"/><item><title>Node.js で URL のパスを結合する (url-join)</title><link>https://maku.blog/p/oj9nzgt/</link><pubDate>Wed, 22 Jun 2022 00:00:00 +0900</pubDate><guid>https://maku.blog/p/oj9nzgt/</guid><description>&lt;p>José F. Romaniello 氏 (jfromaniello) が公開している NPM パッケージの &lt;a href="https://www.npmjs.com/package/url-join">url-join&lt;/a> を使うと、バラバラになった URL のパスをうまいこと結合してくれます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">url-join のインストール&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> npm install url-join
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">使用例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">urlJoin&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;url-join&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">urlJoin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://example.com&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;/b/c&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">//=&amp;gt; https://example.com/a/b/c
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">urlJoin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://example.com/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;/a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;/b/c/&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">//=&amp;gt; https://example.com/a/b/c/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">urlJoin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://example.com&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;/foo&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;?q=123&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">//=&amp;gt; https://example.com/foo?q=123
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">urlJoin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://example.com&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;foo/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;/?q=123&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">//=&amp;gt; https://example.com/foo?q=123
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>URL の末尾にクエリ文字列 (&lt;code>?q=123&lt;/code>) があるときは、パス部分の末尾の &lt;code>/&lt;/code> は消されちゃうみたいですね。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ path.join は URL 結合には使えない&lt;/span>
 &lt;span class="xNote_body">&lt;code>path&lt;/code> モジュールの &lt;code>path.join&lt;/code> は、ローカルファイルシステム用のパス結合関数なので、URL の結合には使ってはいけません。
例えば、Windows 環境ではバックスラッシュが使われてしまったりします。&lt;/span>
&lt;/div></description></item></channel></rss>