<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Boto3 on まくろぐ</title><link>https://maku.blog/tags/boto3/</link><description>Recent content in Boto3 on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Tue, 02 Nov 2021 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/tags/boto3/index.xml" rel="self" type="application/rss+xml"/><item><title>DynamoDB を Python で操作する (boto3)</title><link>https://maku.blog/p/wht5epz/</link><pubDate>Tue, 02 Nov 2021 00:00:00 +0900</pubDate><guid>https://maku.blog/p/wht5epz/</guid><description>&lt;p>（AWS SDK を使うときは、&lt;a href="https://docs.aws.amazon.com/ja_jp/cli/latest/userguide/cli-configure-quickstart.html">aws configure&lt;/a> によるアクセスキーの設定は完了しているものと想定します）&lt;/p>
&lt;h2 id="boto3-のインストール">Boto3 のインストール&lt;/h2>
&lt;p>Python 用の AWS SDK として &lt;a href="https://aws.amazon.com/jp/sdk-for-python/">Boto3&lt;/a> が用意されているので、これをインストールして使います。
PC のグローバル環境を汚さないように、&lt;a href="https://maku77.github.io/python/env/venv.html">venv による仮想環境を作って作業する&lt;/a> ことをオススメします。&lt;/p>
&lt;p>まず、仮想環境を作ってそこに入ります。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ mkdir myapp &amp;amp;&amp;amp; cd myapp # アプリ用のディレクトリを作成
$ python3 -m venv .venv # 仮想環境の作成
$ source .venv/bin/activate # 仮想環境に入る
&lt;/code>&lt;/pre>&lt;p>仮想環境 (&lt;code>.venv&lt;/code>) 内に &lt;strong>&lt;code>boto3&lt;/code>&lt;/strong> パッケージをインストールします。&lt;/p>
&lt;pre tabindex="0">&lt;code>(.venv) $ python3 -m pip install boto3
&lt;/code>&lt;/pre>&lt;p>これで準備完了です。簡単！&lt;/p>
&lt;h2 id="高レベル-api-と低レベル-api">高レベル API と低レベル API&lt;/h2>
&lt;p>Boto3 の API は、抽象度の高い API と、低い API の二種類が用意されています。&lt;/p>
&lt;dl>
&lt;dt>高レベル API（リソース API）&lt;/dt>
&lt;dd>各 AWS リソースを、オブジェクト指向なコードで扱うことができる。&lt;code>boto3.resource(リソース名)&lt;/code> でインスタンスを取得できる。（参考: &lt;a href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/resources.html">Resources&lt;/a>）&lt;/dd>
&lt;dt>低レベル API（クライアント API）&lt;/dt>
&lt;dd>AWS のサービス API と 1:1 で対応する構成になっており、各種 API の戻り値は単純な dict オブジェクト。&lt;code>boto3.client(リソース名)&lt;/code> でインスタンスを取得できる。（参考: &lt;a href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/clients.html">Low-level clients&lt;/a>、&lt;a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/core/session.html#boto3.session.Session.client">client 関数&lt;/a>）&lt;/dd>
&lt;/dl>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">boto3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 高レベル API を使うとき&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dynamodb&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">boto3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">resource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dynamodb&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 低レベル API を使うとき&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dynamodb_client&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">boto3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dynamodb&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>リソース API は、内部でクライアント API を使って実装されています。&lt;/p></description></item></channel></rss>