<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>MongoDB クライアント (mongo シェル) on まくろぐ</title><link>https://maku.blog/p/oanzbmx/</link><description>Recent content in MongoDB クライアント (mongo シェル) on まくろぐ</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Thu, 28 Dec 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://maku.blog/p/oanzbmx/index.xml" rel="self" type="application/rss+xml"/><item><title>mongo シェルの基本的な使い方</title><link>https://maku.blog/p/pwx5kf7/</link><pubDate>Mon, 13 Apr 2015 00:00:00 +0000</pubDate><guid>https://maku.blog/p/pwx5kf7/</guid><description>MongoDB サーバーへの接続 mongo シェルで MongoDB サーバーへ接続するには次の用に実行します。 先に MongoDB サーバーを起動 しておく必要があります）。
$ mongo # 単純に接続する場合 $ mongo mydb # 使用するデータベース名を指定する場合 ポート番号（デフォルトは 27017）や接続先の IP アドレスを指定することもできます。 下記はすべて正しい接続方法です。
$ mongo --port 40001 $ mongo --port 40001 mydb $ mongo localhost:40001 $ mongo localhost:40001/mydb $ mongo 192.168.0.100 $ mongo 192.168.0.100/mydb $ mongo 192.168.0.100:40001/mydb ヘルプの表示 (help) mongo シェルを起動したあとに、help コマンドを実行するとヘルプを表示することができます。
&amp;gt; help db.help() help on db methods db.mycoll.help() help on collection methods sh.help() sharding helpers rs.help() replica set helpers help admin administrative help help connect connecting to a db help help keys key shortcuts help misc misc things to know help mr mapreduce show dbs show database names show collections show collections in current database show users show users in current database show profile show most recent system.</description></item><item><title>mongo シェルで JavaScript ファイル（スクリプト）を実行する</title><link>https://maku.blog/p/2thipwb/</link><pubDate>Mon, 31 Mar 2014 00:00:00 +0000</pubDate><guid>https://maku.blog/p/2thipwb/</guid><description>例えば、input.js というスクリプトを mongo シェルで実行するには以下のようにします。 ここでは、mydb という名前のデータベースの books コレクションに、テスト用のドキュメントを追加しています。
$ mongo mydb input.js input.js db.books.insert({title: &amp;#39;Title 1&amp;#39;}); db.books.insert({title: &amp;#39;Title 2&amp;#39;}); db.books.insert({title: &amp;#39;Title 3&amp;#39;}); ドキュメントには書いてありませんが、標準入力から読み込ませることもできるようです。 この方法を使うと、mongo コマンドのオプションのフォーマット的に、データベース名を省略してスクリプトファイル名を指定できるようになるので、スクリプトの中でデータベースを切り替えることができます。
$ mongo &amp;lt; input2.js $ mongo --port 40001 &amp;lt; input2.js $ mongo localhost:40001 &amp;lt; input2.js input2.js use testdb; db.books.insert({title: &amp;#39;Title 1&amp;#39;, tags: [&amp;#39;AAA&amp;#39;, &amp;#39;BBB&amp;#39;]}); db.books.insert({title: &amp;#39;Title 2&amp;#39;, tags: [&amp;#39;BBB&amp;#39;, &amp;#39;CCC&amp;#39;]}); db.books.insert({title: &amp;#39;Title 3&amp;#39;, tags: [&amp;#39;CCC&amp;#39;, &amp;#39;AAA&amp;#39;]});</description></item><item><title>MongoDB と mongosh のチートシート</title><link>https://maku.blog/p/j4c4vnq/</link><pubDate>Thu, 28 Dec 2023 00:00:00 +0000</pubDate><guid>https://maku.blog/p/j4c4vnq/</guid><description>全般（mongosh で接続した後のコマンド） コマンド 説明 db 現在のデータベース名を表示 use &amp;lt;db&amp;gt; 現在のデータベースを切り替える show databases (dbs) データベースの一覧を表示 show collections (tables) コレクションの一覧を表示 show users ユーザーの一覧を表示 show log ログの出力 db.stats() データベースの統計情報を表示 db.&amp;lt;coll&amp;gt;.stats() コレクションの統計情報を表示 db.createCollection(&amp;quot;&amp;lt;coll&amp;gt;&amp;quot;) コレクションを作成（オプション指定付きで作成したいとき） db.getCollectionInfos() コレクション情報を JS 配列として取得 db.getCollectionNames() コレクション名の一覧を JS 配列として取得 ドキュメントの検索 (Find) find の基本 コレクション内のドキュメントを検索するには、find() メソッドの第 1 引数に検索フィルターを指定します。
すべてのドキュメントを取得する db.&amp;lt;coll&amp;gt;.find() db.&amp;lt;coll&amp;gt;.find({}) name フィールドの値が value に一致するドキュメントを検索する db.&amp;lt;coll&amp;gt;.find({ name: &amp;#34;value&amp;#34; }) awards.wins フィールドが 100 より大きいドキュメントを検索する db.&amp;lt;coll&amp;gt;.find({ &amp;#34;awards.wins&amp;#34;: { $gt: 100 } }) languages フィールドに jp あるいは en を含むドキュメントを検索する db.</description></item><item><title>mongo シェルで find の結果をインデントして見やすく表示する (pretty)</title><link>https://maku.blog/p/uvusqb7/</link><pubDate>Mon, 31 Mar 2014 00:00:00 +0000</pubDate><guid>https://maku.blog/p/uvusqb7/</guid><description>mongo シェルで find() を実行した結果を見やすいように整形するには、実行結果に対して pretty() を適用します。
&amp;gt; db.books.find().pretty() { &amp;#34;_id&amp;#34; : ObjectId(&amp;#34;533973de50b35840de2dda25&amp;#34;), &amp;#34;title&amp;#34; : &amp;#34;Title 1&amp;#34;, &amp;#34;tags&amp;#34; : [ &amp;#34;AAA&amp;#34;, &amp;#34;BBB&amp;#34; ] } { &amp;#34;_id&amp;#34; : ObjectId(&amp;#34;533973de50b35840de2dda26&amp;#34;), &amp;#34;title&amp;#34; : &amp;#34;Title 2&amp;#34;, &amp;#34;tags&amp;#34; : [ &amp;#34;BBB&amp;#34;, &amp;#34;CCC&amp;#34; ] } { &amp;#34;_id&amp;#34; : ObjectId(&amp;#34;533973de50b35840de2dda27&amp;#34;), &amp;#34;title&amp;#34; : &amp;#34;Title 3&amp;#34;, &amp;#34;tags&amp;#34; : [ &amp;#34;CCC&amp;#34;, &amp;#34;AAA&amp;#34; ] }</description></item><item><title>mongo シェルで MapReduce を実行する</title><link>https://maku.blog/p/qvkkcuj/</link><pubDate>Mon, 31 Mar 2014 00:00:00 +0000</pubDate><guid>https://maku.blog/p/qvkkcuj/</guid><description>mongo シェルを使って、下記のような books コレクションに対して MapReduce をかけて、タグ情報のリスト（tags コレクション）を生成する方法を示します。
{ title: &amp;#39;Title 1&amp;#39;, tags: [&amp;#39;AAA&amp;#39;, &amp;#39;BBB&amp;#39;] } { title: &amp;#39;Title 2&amp;#39;, tags: [&amp;#39;BBB&amp;#39;, &amp;#39;CCC&amp;#39;] } { title: &amp;#39;Title 3&amp;#39;, tags: [&amp;#39;CCC&amp;#39;, &amp;#39;AAA&amp;#39;] } 作成される tags コレクションは、以下のようになることを想定しています。
{ &amp;#34;_id&amp;#34; : &amp;#34;AAA&amp;#34;, &amp;#34;value&amp;#34; : 2 } { &amp;#34;_id&amp;#34; : &amp;#34;BBB&amp;#34;, &amp;#34;value&amp;#34; : 2 } { &amp;#34;_id&amp;#34; : &amp;#34;CCC&amp;#34;, &amp;#34;value&amp;#34; : 2 } まずは、サンプルデータとなる books コレクションを作成します。
books.js use testdb; // books コレクションの初期化 db.books.drop(); db.books.save({title: &amp;#39;Title 1&amp;#39;, tags: [&amp;#39;AAA&amp;#39;, &amp;#39;BBB&amp;#39;]}); db.</description></item><item><title>mongo シェルで各フィールドの型を調べる (typeof, instanceof)</title><link>https://maku.blog/p/yejmu4v/</link><pubDate>Tue, 22 Oct 2013 00:00:00 +0000</pubDate><guid>https://maku.blog/p/yejmu4v/</guid><description>mongo シェルで、各フィールドの型（タイプ）を調べたいときは、typeof や instanceof を使用します。
フィールドの型を調べる typeof mydoc._id 指定した型のフィールドかどうか調べる mydoc._id instanceof ObjectId 参考 Data Types in the mongo Shell — MongoDB Manual</description></item></channel></rss>