<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Amazon EC2 関連記事 on まくろぐ</title><link>https://maku.blog/p/cxcozak/</link><description>Recent content in Amazon EC2 関連記事 on まくろぐ</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Tue, 02 Mar 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://maku.blog/p/cxcozak/index.xml" rel="self" type="application/rss+xml"/><item><title>Amazon EC2 で Hello World (1) キーペアの作成</title><link>https://maku.blog/p/pcp3doy/</link><pubDate>Tue, 02 Mar 2021 00:00:00 +0000</pubDate><guid>https://maku.blog/p/pcp3doy/</guid><description>EC2 を使う前に SSH キーペアを作成しておく 立ち上げた EC2 インスタンスは SSH で接続して操作するため、まずはキーペア（公開鍵＋秘密鍵）を作成して、その公開鍵を EC2 に登録しておく必要があります。 一度公開鍵を登録すると、EC2 インスタンスを作成するときに、割り当てる公開鍵をプルダウンから選択できるようになります。
EC2 コンソールからキーペアを作成する SSH 接続用のキーペアは、ローカルで作成して EC2 に登録することもできますし、EC2 コンソール上で新規作成することもできます。 EC2 上で作成すると、公開鍵が自動的に EC2 に登録された状態になるのでちょっとだけ楽です。 ここでは、次のように EC2 上でキーペアを作成します。
EC2 マネージメントコンソール を開く サイドバーから キーペア を選択し、キーペアを作成 をクリック キーペアの作成画面で名前とファイル形式を入力し、キーペアを作成 をクリック 名前: ec2key など自由に入力 ファイル形式:（使用する SSH クライアントに合わせて選択） pem 形式 &amp;hellip; OpenSSH を使う場合（主に Linux/macOS） ppk 形式 &amp;hellip; PuTTY を使う場合（主に Windows） すると、自動的に ec2key.pem（秘密鍵）のダウンロードが始まるので、~/.ssh ディレクトリなどに確実に保存します。 この キーファイルを再度ダウンロードすることはできないので注意してください。
EC2 コンソール上に次のように表示されていれば、今後 EC2 インスタンスを生成するときにこのキーを選択できます。</description></item><item><title>Amazon EC2 で Hello World (2) EC2 インスタンスの起動と接続</title><link>https://maku.blog/p/whu7hr3/</link><pubDate>Tue, 02 Mar 2021 00:00:00 +0000</pubDate><guid>https://maku.blog/p/whu7hr3/</guid><description>EC2 インスタンスの起動 EC2 インスタンスに接続するための キーペアを作成 したら、実際に EC2 インスタンスを起動してみます。 ここでは、マシンイメージ (AMI) として EC2 用に最適化された Amazon Linux 2 を選択することにします。
EC2 マネージメントコンソール を開く サイドバーの インスタンス を選択し、インスタンスを起動 ボタンを押す Amazon マシンイメージ (AMI) の選択画面で、Amazon Linux 2 を選択 インスタンスタイプの選択画面で、一番安い t2.nano や、一年間の無料枠がある t2.micro を選択（料金の参考: EC2Instances.info） 確認と作成 ボタンを押す 使用するキーペアを選択する画面が表示されるので、あらかじめ設定しておいた キーペアを選択して、インスタンスの作成 ボタンを押す 図: キーペアの選択 あとは数分待てば、EC2 インスタンスが起動します。
EC2 インスタンスへの SSH 接続 EC2 インスタンスが無事起動したら、SSH で接続してみます。 接続用のユーザー名やアドレスは、次のようにして確認することができます。
EC2 マネージメントコンソール を開く サイドバーの インスタンス を選択し、対象の EC2 インスタンスを選択 接続 ボタンを押す すると、次のような感じで接続先のユーザー名（ec2-user）や DNS アドレス（ec2-XXXXX) を確認することができます。</description></item><item><title>Amazon EC2 をコマンドライン (CLI) で操作する</title><link>https://maku.blog/p/zkx9ju6/</link><pubDate>Mon, 22 Feb 2021 00:00:00 +0000</pubDate><guid>https://maku.blog/p/zkx9ju6/</guid><description>EC2 で使用可能なリージョンの一覧を取得する (ec2 describe-regions) $ aws ec2 describe-regions 実行結果 (YAML形式） Regions:- Endpoint:ec2.eu-north-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:eu-north-1- Endpoint:ec2.ap-south-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:ap-south-1- Endpoint:ec2.eu-west-3.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:eu-west-3- Endpoint:ec2.eu-west-2.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:eu-west-2- Endpoint:ec2.eu-west-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:eu-west-1- Endpoint:ec2.ap-northeast-3.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:ap-northeast-3- Endpoint:ec2.ap-northeast-2.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:ap-northeast-2- Endpoint:ec2.ap-northeast-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:ap-northeast-1- Endpoint:ec2.sa-east-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:sa-east-1- Endpoint:ec2.ca-central-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:ca-central-1- Endpoint:ec2.ap-southeast-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:ap-southeast-1- Endpoint:ec2.ap-southeast-2.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:ap-southeast-2- Endpoint:ec2.eu-central-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:eu-central-1- Endpoint:ec2.us-east-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:us-east-1- Endpoint:ec2.us-east-2.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:us-east-2- Endpoint:ec2.us-west-1.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:us-west-1- Endpoint:ec2.us-west-2.amazonaws.comOptInStatus:opt-in-not-requiredRegionName:us-west-2 EC2 インスタンスの情報を取得する (ec2 describe-instances) 作成済みの EC2 インスタンスの一覧、あるいは指定した EC2 インスタンスの情報を取得します。
$ aws ec2 describe-instances 実行結果（YAML形式） Reservations:- Groups:[]Instances:- AmiLaunchIndex:0Architecture:x86_64BlockDeviceMappings:- DeviceName:/dev/xvdaEbs:AttachTime:&amp;#39;2021-03-02T14:26:39+00:00&amp;#39;DeleteOnTermination:trueStatus:attachedVolumeId:vol-3b75f0f9090990420CapacityReservationSpecification:CapacityReservationPreference:openClientToken:&amp;#39;&amp;#39;CpuOptions:CoreCount:1ThreadsPerCore:1EbsOptimized:falseEnaSupport:trueEnclaveOptions:Enabled:falseHibernationOptions:Configured:falseHypervisor:xenImageId:ami-e2e9e713809d28faaInstanceId:i-757968a71071691b7InstanceType:t2.nanoKeyName:ec2keyLaunchTime:&amp;#39;2021-03-02T15:32:17+00:00&amp;#39;MetadataOptions:HttpEndpoint:enabledHttpPutResponseHopLimit:1HttpTokens:optionalState:appliedMonitoring:State:disabledNetworkInterfaces:- Attachment:AttachTime:&amp;#39;2021-03-02T14:26:38+00:00&amp;#39;AttachmentId:eni-attach-c1c18b4c61083b1eaDeleteOnTermination:trueDeviceIndex:0NetworkCardIndex:0Status:attachedDescription:&amp;#39;&amp;#39;Groups:- GroupId:sg-650f7192f60271eb7GroupName:launch-wizard-1InterfaceType:interfaceIpv6Addresses:[]MacAddress:0a:a0:bf:37:7f:c1NetworkInterfaceId:eni-c8aea6d54ac8cc0d0OwnerId:&amp;#39;049344049957&amp;#39;PrivateDnsName:ip-172-31-0-95.ap-northeast-1.compute.internalPrivateIpAddress:172.31.0.95PrivateIpAddresses:- Primary:truePrivateDnsName:ip-172-31-0-95.ap-northeast-1.compute.internalPrivateIpAddress:172.31.0.95SourceDestCheck:trueStatus:in-useSubnetId:subnet-13e65081VpcId:vpc-af6e084dPlacement:AvailabilityZone:ap-northeast-1cGroupName:&amp;#39;&amp;#39;Tenancy:defaultPrivateDnsName:ip-172-31-0-95.ap-northeast-1.compute.internalPrivateIpAddress:172.31.0.95ProductCodes:[]PublicDnsName:&amp;#39;&amp;#39;RootDeviceName:/dev/xvdaRootDeviceType:ebsSecurityGroups:- GroupId:sg-650f7192f60271eb7GroupName:launch-wizard-1SourceDestCheck:trueState:Code:80Name:stoppedStateReason:Code:Client.UserInitiatedShutdownMessage: &amp;#39;Client.UserInitiatedShutdown:User initiated shutdown&amp;#39;StateTransitionReason:User initiated (2021-03-03 16:24:03 GMT)SubnetId:subnet-6508113eTags:- Key:NameValue:maku-test-ec2VirtualizationType:hvmVpcId:vpc-af6e084dOwnerId:&amp;#39;493440499570&amp;#39;ReservationId:r-09d469440a8ee4861 AMI の情報を取得する (ec2 describe-images) $ aws ec2 describe-images 作成した Amazon マシンイメージ (AMI) の一覧を表示することができます。</description></item></channel></rss>