<!doctype html><html lang=ja-jp><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>DynamoDB Local で DynamoDB のローカルテスト環境を作る｜まくろぐ</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-V7PSCLD1ML"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-V7PSCLD1ML")</script><meta property="og:site_name" content="まくろぐ"><meta property="og:title" content="DynamoDB Local で DynamoDB のローカルテスト環境を作る"><meta property="og:type" content="website"><meta property="og:url" content="https://maku.blog/p/rdq4eq2/"><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://maku.blog/img/site-logo.png"><meta property="og:image:width" content="1436"><meta property="og:image:height" content="746"><meta property="og:description" content="DynamoDB Local とは DynamoDB Local を使うと、Amazon DynamoDB サービスを模倣するローカルサーバーを立ち上げることができます。 DynamoDB Local サーバーは、デフォルトでは http://localhost:8000 で起動し、ここに対して AWS CLI や AWS SDK で接続して操作します。
DynamoDB ウェブサービスで複雑なデータ処理を行うときは、あらかじめ DynamoDB Local を使ってテストを行っておくと安心です。 DynamoDB の操作のために試行錯誤しても AWS の利用料金がかかることはありません。
DynamoDB Local のインストール 実行ファイルのダウンロード DynamoDB Local には、Java の実行ファイル (JAR) や、それを含む Docker コンテナとして提供されています。 Java のインストールされた環境では、JAR ファイルをダウンロードして起動するのが手っ取り早いです。 下記から ZIP ファイルでダウンロードできます。
DynamoDB Local のダウンロード ダウンロードした ZIP ファイルを展開すると、次のような構成のディレクトリが展開されます。
アーカイブの内容 dynamodb_local_latest/ +-- DynamoDBLocal_lib/ ... 本体が使う依存ライブラリ +-- DynamoDBLocal.jar ... 本体 +-- その他のドキュメント 起動に必要なのは、DynamoDBLocal_lib ディレクトリと DynamoDBLocal.jar だけなので、この 2 つを任意のディレクトリにコピーします。 ここでは、次のようなディレクトリにコピーすることにします（Windows であれば、$HOME は %USERPROFILE% に置き換えてください）。"><meta property="fb:app_id" content="1572235596285254"><link rel=stylesheet href=../../css/main.min.8e4d1fe682dcd83823bf8d57806770522d714cc9208ed3f2c654af103d944951.css><link rel=icon sizes="16x16 32x32 48x48 64x64" href=../../assets/favicon/favicon.ico><link rel=icon sizes=192x192 href=../../assets/favicon/192x192.png><link rel=apple-touch-icon href=../../assets/favicon/180x180.png><script src=../../assets/js/ext-links.js defer></script>
<script src=../../assets/js/sidebar.js defer></script><style>.codoc-support{display:inline-block;margin:.5rem 0 0!important;padding:12px!important;width:210px!important;max-width:100%}.codoc-support .codoc-support-title{font-size:smaller!important;white-space:nowrap;margin-bottom:12px!important}.codoc-support .codoc-btn{width:180px!important}</style><script src=https://codoc.jp/js/cms.js data-css=black data-usercode=tp6ZPzTj3w defer></script></head><body><div id=xRoot><div id=xSiteHeader><a href=../../>まくろぐ</a></div><aside><div class=xBreadcrumb><span class=xBreadcrumb_item><a href=../../>&#x1F3E0;</a></span>
<span class=xBreadcrumb_item><a href=../../p/3ftx6b2/>技術系</a></span>
<span class=xBreadcrumb_item><a href=../../p/7s7hs4e/>AWS</a></span>
<span class=xBreadcrumb_item><a href=../../p/3jt3bjr/>DynamoDB</a></span>
<span class=xBreadcrumb_item>DynamoDB Local で DynamoDB のローカルテスト環境を作る</span></div></aside><div id=xContainer><nav id=xMenu aria-label=メニュー><div id=sidebar style=height:100%><div id=sidebar_notFixed><a href=../../><img src=https://maku.blog/img/site-logo-sidebar.png alt=サイトロゴ></a><div class=xMenu_box data-sticky><form action=https://cse.google.com/cse target=_blank><div class=xSearchBox><input type=hidden name=cx value=partner-pub-6317852277883092:6890083468>
<input type=hidden name=ie value=UTF-8>
<input type=search name=q placeholder=サイト内検索 size=30 autocomplete=off>
<input type=submit value=検索></div></form><div class=xMenu_box_body></div></div><div class=xMenu_box data-sticky><h3 class=xMenu_box_title><a href=../../latest/>新着</a></h3><div class=xMenu_box_body><div class=xBoxLink><a href=../../p/iuvuyzd/>Meilisearch を本番環境で使用する（マスターキーと API キーを理解する）
<time>2024-02-15</time></a></div><div class=xBoxLink><a href=../../p/kos367z/>nginx-proxy コンテナで簡単にリバースプロキシを立ち上げる
<time>2024-02-12</time></a></div><div class=xBoxLink><a href=../../p/k8htq7s/>2024-02-10 ソロモンの鍵
<time>2024-02-11</time></a></div><div class=xBoxLink><a href=../../p/wgsz2wn/>Python で Confluence の情報を取得する
<time>2024-02-05</time></a></div><div class=xBoxLink><a href=../../p/gii3wtb/>MongoDB のインデックスについて
<time>2024-02-02</time></a></div></div></div><div class=xMenu_box data-sticky><h3 class=xMenu_box_title><a href=../../sitemap/>フォルダ</a></h3><div class=xMenu_box_body><div class=xNavTree><ul><li><a class=xNavTree-dir href=../../p/3ftx6b2/>技術系</a><ul><li><a class=xNavTree-dir href=../../p/ujqinda/>プログラミング</a><li><a class=xNavTree-dir href=../../p/vrhjtds/>Azure</a><li><a class=xNavTree-dir href=../../p/ndbcxgb/>Meilisearch</a><li><a class=xNavTree-dir href=../../p/xdsom3a/>Nginx（Web サーバー）</a><li><a class=xNavTree-dir href=../../p/e58h5in/>雑多な技術メモ</a><li><a class=xNavTree-dir href=../../p/nd3cmt3/>ネットワーク</a><li><a class=xNavTree-dir href=../../p/j3fmwym/>D3.js</a><li><a class=xNavTree-dir href=../../p/ruk3gu9/>Linux</a><li><a class=xNavTree-dir href=../../p/td962u6/>Svelte</a><li><a class=xNavTree-dir href=../../p/fsancxy/>SVG</a><li><a class=xNavTree-dir href=../../p/669r7r2/>Astro</a><li><a class=xNavTree-dir href=../../p/y29x85e/>Terraform</a><li><a class=xNavTree-dir href=../../p/7s7hs4e/>AWS</a><ul><li><a class=xNavTree-dir href=../../p/cenio8m/>AWS 一般／環境／設定など</a><li><a class=xNavTree-dir href=../../p/vigdnzf/>CLI</a><li><a class=xNavTree-dir href=../../p/q7fov5c/>S3</a><li><a class=xNavTree-dir href=../../p/wn52kog/>IAM</a><li><a class=xNavTree-dir href=../../p/eyeq2do/>Lambda</a><li><a class=xNavTree-dir href=../../p/cxcozak/>EC2</a><li><a class=xNavTree-dir href=../../p/au8is4e/>CodeBuild</a><li><a class=xNavTree-dir href=../../p/sdq2cnx/>CloudFormation/SAM/CDK</a><li><a class=xNavTree-dir href=../../p/yz2h95y/>Cognito</a><li><a class=xNavTree-dir href=../../p/wqamv5d/>API Gateway</a><li><a class=xNavTree-dir href=../../p/3jt3bjr/>DynamoDB</a><ul></ul><li><a class=xNavTree-dir href=../../p/5o2cnw8/>SSM</a><li><a class=xNavTree-dir href=../../p/3nybkv6/>AWS KMS</a><li><a class=xNavTree-dir href=../../p/dxhs2bk/>AppSync</a><li><a class=xNavTree-dir href=../../p/szcbzgt/>AWS のトラブルシューティング</a></ul><li><a class=xNavTree-dir href=../../p/c9sar9p/>Cloudflare</a><li><a class=xNavTree-dir href=../../p/inh3k2j/>Visual Studio Code</a><li><a class=xNavTree-dir href=../../p/cm9nyco/>GraphQL</a><li><a class=xNavTree-dir href=../../p/dj28oy5/>Docker 関連メモ</a><li><a class=xNavTree-dir href=../../p/8t6hr3d/>Ansible</a><li><a class=xNavTree-dir href=../../p/5q4fr3d/>GitHub</a><li><a class=xNavTree-dir href=../../p/9xv5548/>Jekyll</a><li><a class=xNavTree-dir href=../../p/6p3dox9/>Firebase</a><li><a class=xNavTree-dir href=../../p/somcgdw/>macOS</a><li><a class=xNavTree-dir href=../../p/y42o4hw/>Windows</a><li><a class=xNavTree-dir href=../../p/jto2isn/>HTML/CSS のメモ</a><li><a class=xNavTree-dir href=../../p/ibs96hs/>フォント/文字コード/Locale/Unicode</a><li><a class=xNavTree-dir href=../../p/xb5w4in/>デザインパターン/UML</a><li><a class=xNavTree-dir href=../../p/zbgbb5u/>PlantUML</a><li><a class=xNavTree-dir href=../../p/jxvi6vv/>Excel のメモ</a><li><a class=xNavTree-dir href=../../p/7ipkgyk/>機械学習／ディープラーニング</a></ul><li><a class=xNavTree-dir href=../../p/qb73pxx/>日記・コラム</a><li><a class=xNavTree-dir href=../../p/zb9ocav/>ツール</a><li><a class=xNavTree-dir href=../../p/35odek9/>読書</a><li><a class=xNavTree-dir href=../../p/ajj5753/>遊び</a><li><a class=xNavTree-dir href=../../p/syy4ryp/>設定</a><li><a class=xNavTree-dir href=../../p/tsjyzrn/>雑多</a><li><a class=xNavTree-dir href=../../p/hnoamfo/>管理人</a></ul></div></div></div><div class=xMenu_box data-sticky><h3 class=xMenu_box_title><a href=../../tags/>タグ</a></h3><div class=xMenu_box_body><div id=local-tag-container><div class=xMenu_tag><a href=../../tags/%E8%AA%AD%E6%9B%B8/>読書 (82)</a></div><div class=xMenu_tag><a href=../../tags/aws/>AWS (62)</a></div><div class=xMenu_tag><a href=../../tags/azure/>Azure (58)</a></div><div class=xMenu_tag><a href=../../tags/typescript/>TypeScript (58)</a></div><div class=xMenu_tag><a href=../../tags/%E6%97%A5%E8%A8%98/>日記 (55)</a></div><div class=xMenu_tag><a href=../../tags/next.js/>Next.js (38)</a></div><div class=xMenu_tag><a href=../../tags/graphql/>GraphQL (35)</a></div><div class=xMenu_tag><a href=../../tags/react/>React (30)</a></div><div class=xMenu_tag><a href=../../tags/chatbot/>Chatbot (28)</a></div><div class=xMenu_tag><a href=../../tags/linux/>Linux (28)</a></div><div class=xMenu_tag><a href=../../tags/gnuplot/>gnuplot (27)</a></div><div class=xMenu_tag><a href=../../tags/aws/cdk/>AWS/CDK (26)</a></div><div class=xMenu_tag><a href=../../tags/github/>GitHub (24)</a></div><div class=xMenu_tag><a href=../../tags/d3.js/>D3.js (23)</a></div><div class=xMenu_tag><a href=../../tags/ansible/>Ansible (21)</a></div><div class=xMenu_tag><a href=../../tags/bot-builder-sdk/>Bot Builder SDK (21)</a></div><div class=xMenu_tag><a href=../../tags/node.js/>Node.js (19)</a></div><div class=xMenu_tag><a href=../../tags/aws/dynamodb/>AWS/DynamoDB (18)</a></div><div class=xMenu_tag><a href=../../tags/mongodb/>MongoDB (18)</a></div><div class=xMenu_tag><a href=../../tags/aws/cloudformation/>AWS/CloudFormation (16)</a></div><div class=xMenu_tag><a href=../../tags/electron/>Electron (15)</a></div><div class=xMenu_tag><a href=../../tags/svelte/>Svelte (15)</a></div><div class=xMenu_tag><a href=../../tags/vs-code/>VS Code (15)</a></div><div class=xMenu_tag><a href=../../tags/aws/cognito/>AWS/Cognito (14)</a></div><div class=xMenu_tag><a href=../../tags/protocol-buffers/>Protocol Buffers (14)</a></div><div class=xMenu_tag><a href=../../tags/javascript/>JavaScript (13)</a></div><div class=xMenu_tag><a href=../../tags/nginx/>nginx (13)</a></div><div class=xMenu_tag><a href=../../tags/python/>Python (11)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%B2%E3%83%BC%E3%83%A0/>ゲーム (11)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0/>プログラム (11)</a></div><div class=xMenu_tag><a href=../../tags/android/>Android (10)</a></div><div class=xMenu_tag><a href=../../tags/aws/lambda/>AWS/Lambda (10)</a></div><div class=xMenu_tag><a href=../../tags/ssh/>SSH (10)</a></div><div class=xMenu_tag><a href=../../tags/svg/>SVG (10)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%93%E3%83%AA%E3%83%A4%E3%83%BC%E3%83%89/>ビリヤード (10)</a></div><div class=xMenu_tag><a href=../../tags/%E6%95%B0%E5%AD%A6/>数学 (10)</a></div><div class=xMenu_tag><a href=../../tags/docker/>Docker (9)</a></div><div class=xMenu_tag><a href=../../tags/java/>Java (9)</a></div><div class=xMenu_tag><a href=../../tags/uml/>UML (9)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%BB%E3%83%9F%E3%83%8A%E3%83%BC%E8%AC%9B%E6%BC%94%E4%BC%9A/>セミナー／講演会 (9)</a></div><div class=xMenu_tag><a href=../../tags/3d/>3D (8)</a></div><div class=xMenu_tag><a href=../../tags/aws/sam/>AWS/SAM (8)</a></div><div class=xMenu_tag><a href=../../tags/cheatsheet/>チートシート／リファレンス (8)</a></div><div class=xMenu_tag><a href=../../tags/deno/>Deno (8)</a></div><div class=xMenu_tag><a href=../../tags/firebase/firestore/>Firebase/Firestore (8)</a></div><div class=xMenu_tag><a href=../../tags/unity/>Unity (8)</a></div><div class=xMenu_tag><a href=../../tags/webgl/>WebGL (8)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%A2%E3%82%A4%E3%83%87%E3%82%A2/>アイデア (8)</a></div><div class=xMenu_tag><a href=../../tags/%E4%BB%95%E4%BA%8B/>仕事 (8)</a></div><div class=xMenu_tag><a href=../../tags/apollo/>Apollo (7)</a></div><div class=xMenu_tag><a href=../../tags/azure-cli/>Azure CLI (7)</a></div><div class=xMenu_tag><a href=../../tags/azure-pipelines/>Azure Pipelines (7)</a></div><div class=xMenu_tag><a href=../../tags/jade/>Jade (7)</a></div><div class=xMenu_tag><a href=../../tags/material-ui/>Material-UI (7)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3/>デザインパターン (7)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF/>ネットワーク (7)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%A9%E3%82%A4%E3%83%95%E3%83%8F%E3%83%83%E3%82%AF/>ライフハック (7)</a></div><div class=xMenu_tag><a href=../../tags/%E6%8A%80%E8%A1%93/>技術 (7)</a></div><div class=xMenu_tag><a href=../../tags/aws/api-gateway/>AWS/API Gateway (6)</a></div><div class=xMenu_tag><a href=../../tags/aws/cli/>AWS/CLI (6)</a></div><div class=xMenu_tag><a href=../../tags/azure-storage/>Azure Storage (6)</a></div><div class=xMenu_tag><a href=../../tags/doxygen/>Doxygen (6)</a></div><div class=xMenu_tag><a href=../../tags/firebase/cloudfunctions/>Firebase/CloudFunctions (6)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%84%E3%83%BC%E3%83%AB/>ツール (6)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%A6%E3%83%8B%E3%83%83%E3%83%88%E3%83%86%E3%82%B9%E3%83%88/>ユニットテスト (6)</a></div><div class=xMenu_tag><a href=../../tags/azure-table-storage/>Azure Table Storage (5)</a></div><div class=xMenu_tag><a href=../../tags/c/c++/>C/C++ (5)</a></div><div class=xMenu_tag><a href=../../tags/github-actions/>GitHub Actions (5)</a></div><div class=xMenu_tag><a href=../../tags/luis/>LUIS (5)</a></div><div class=xMenu_tag><a href=../../tags/qna-maker/>QnA Maker (5)</a></div><div class=xMenu_tag><a href=../../tags/security/>security (5)</a></div><div class=xMenu_tag><a href=../../tags/%E3%81%8A%E7%B5%B5%E3%81%8B%E3%81%8D/>お絵かき (5)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/>セキュリティ (5)</a></div><div class=xMenu_tag><a href=../../tags/%E6%8A%95%E8%B3%87/>投資 (5)</a></div><div class=xMenu_tag><a href=../../tags/%E7%94%9F%E3%81%8D%E6%96%B9/>生き方 (5)</a></div><div class=xMenu_tag><a href=../../tags/aws/ssm/>AWS/SSM (4)</a></div><div class=xMenu_tag><a href=../../tags/eslint/>ESLint (4)</a></div><div class=xMenu_tag><a href=../../tags/firebase/>Firebase (4)</a></div><div class=xMenu_tag><a href=../../tags/github-pages/>GitHub Pages (4)</a></div><div class=xMenu_tag><a href=../../tags/html/css/>HTML/CSS (4)</a></div><div class=xMenu_tag><a href=../../tags/jekyll/>Jekyll (4)</a></div><div class=xMenu_tag><a href=../../tags/json/>JSON (4)</a></div><div class=xMenu_tag><a href=../../tags/lets-encrypt/>Let's Encrypt (4)</a></div><div class=xMenu_tag><a href=../../tags/sql/>SQL (4)</a></div><div class=xMenu_tag><a href=../../tags/ssl/>ssl (4)</a></div><div class=xMenu_tag><a href=../../tags/windows/>Windows (4)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF/>エディタ (4)</a></div><div class=xMenu_tag><a href=../../tags/azure-functions/>Azure Functions (3)</a></div><div class=xMenu_tag><a href=../../tags/cosmos-db/>Cosmos DB (3)</a></div><div class=xMenu_tag><a href=../../tags/grpc/>gRPC (3)</a></div><div class=xMenu_tag><a href=../../tags/hugo/>Hugo (3)</a></div><div class=xMenu_tag><a href=../../tags/kotlin/>Kotlin (3)</a></div><div class=xMenu_tag><a href=../../tags/mac/>mac (3)</a></div><div class=xMenu_tag><a href=../../tags/pc%E8%A8%AD%E5%AE%9A/>PC設定 (3)</a></div><div class=xMenu_tag><a href=../../tags/powershell/>PowerShell (3)</a></div><div class=xMenu_tag><a href=../../tags/prettier/>Prettier (3)</a></div><div class=xMenu_tag><a href=../../tags/sqlite/>SQLite (3)</a></div><div class=xMenu_tag><a href=../../tags/textlint/>textlint (3)</a></div><div class=xMenu_tag><a href=../../tags/tv/>TV (3)</a></div><div class=xMenu_tag><a href=../../tags/yaml/>YAML (3)</a></div><div class=xMenu_tag><a href=../../tags/%E3%81%8A%E3%81%A7%E3%81%8B%E3%81%91/>おでかけ (3)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%A2%E3%83%97%E3%83%AA/>アプリ (3)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0/>アルゴリズム (3)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%9C%E3%83%83%E3%83%88/>チャットボット (3)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%9C%E3%83%BC%E3%83%89%E3%82%B2%E3%83%BC%E3%83%A0/>ボードゲーム (3)</a></div><div class=xMenu_tag><a href=../../tags/%E5%83%8D%E3%81%8D%E6%96%B9/>働き方 (3)</a></div><div class=xMenu_tag><a href=../../tags/%E7%A7%80%E4%B8%B8/>秀丸 (3)</a></div><div class=xMenu_tag><a href=../../tags/%E8%87%AA%E5%88%86/>自分 (3)</a></div><div class=xMenu_tag><a href=../../tags/apache/>Apache (2)</a></div><div class=xMenu_tag><a href=../../tags/arib/>ARIB (2)</a></div><div class=xMenu_tag><a href=../../tags/astro/>Astro (2)</a></div><div class=xMenu_tag><a href=../../tags/aws/amplify/>AWS/Amplify (2)</a></div><div class=xMenu_tag><a href=../../tags/aws/appsync/>AWS/AppSync (2)</a></div><div class=xMenu_tag><a href=../../tags/aws/codebuild/>AWS/CodeBuild (2)</a></div><div class=xMenu_tag><a href=../../tags/aws/iam/>AWS/IAM (2)</a></div><div class=xMenu_tag><a href=../../tags/aws/kms/>AWS/KMS (2)</a></div><div class=xMenu_tag><a href=../../tags/aws/s3/>AWS/S3 (2)</a></div><div class=xMenu_tag><a href=../../tags/aws/sdk/>AWS/SDK (2)</a></div><div class=xMenu_tag><a href=../../tags/azure-app-service/>Azure App Service (2)</a></div><div class=xMenu_tag><a href=../../tags/cloudflare/>Cloudflare (2)</a></div><div class=xMenu_tag><a href=../../tags/curl/>cURL (2)</a></div><div class=xMenu_tag><a href=../../tags/excel/>Excel (2)</a></div><div class=xMenu_tag><a href=../../tags/firebase/authentication/>Firebase/Authentication (2)</a></div><div class=xMenu_tag><a href=../../tags/gimp/>Gimp (2)</a></div><div class=xMenu_tag><a href=../../tags/go/>Go (2)</a></div><div class=xMenu_tag><a href=../../tags/http/>HTTP (2)</a></div><div class=xMenu_tag><a href=../../tags/meilisearch/>Meilisearch (2)</a></div><div class=xMenu_tag><a href=../../tags/mui/>MUI (2)</a></div><div class=xMenu_tag><a href=../../tags/npm/>npm (2)</a></div><div class=xMenu_tag><a href=../../tags/oauth/>OAuth (2)</a></div><div class=xMenu_tag><a href=../../tags/opengl/>OpenGL (2)</a></div><div class=xMenu_tag><a href=../../tags/rsync/>rsync (2)</a></div><div class=xMenu_tag><a href=../../tags/scp/>scp (2)</a></div><div class=xMenu_tag><a href=../../tags/slack/>Slack (2)</a></div><div class=xMenu_tag><a href=../../tags/teraterm/>TeraTerm (2)</a></div><div class=xMenu_tag><a href=../../tags/unicode/>Unicode (2)</a></div><div class=xMenu_tag><a href=../../tags/vercel/>Vercel (2)</a></div><div class=xMenu_tag><a href=../../tags/zip/>zip (2)</a></div><div class=xMenu_tag><a href=../../tags/%E3%81%8A%E5%90%8D%E5%89%8D.com/>お名前.com (2)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC/>エミュレーター (2)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88/>フォント (2)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/>プログラミング (2)</a></div><div class=xMenu_tag><a href=../../tags/%E5%9C%A7%E7%B8%AE%E5%B1%95%E9%96%8B/>圧縮・展開 (2)</a></div><div class=xMenu_tag><a href=../../tags/%E6%96%87%E5%AD%97%E5%88%97/>文字列 (2)</a></div><div class=xMenu_tag><a href=../../tags/.net/>.NET (1)</a></div><div class=xMenu_tag><a href=../../tags/androidstudio/>AndroidStudio (1)</a></div><div class=xMenu_tag><a href=../../tags/apollo-server/>Apollo Server (1)</a></div><div class=xMenu_tag><a href=../../tags/atomic-design/>Atomic Design (1)</a></div><div class=xMenu_tag><a href=../../tags/blender/>Blender (1)</a></div><div class=xMenu_tag><a href=../../tags/bluetooth/>Bluetooth (1)</a></div><div class=xMenu_tag><a href=../../tags/bootstrap/>Bootstrap (1)</a></div><div class=xMenu_tag><a href=../../tags/bot-framework/>Bot Framework (1)</a></div><div class=xMenu_tag><a href=../../tags/boto3/>boto3 (1)</a></div><div class=xMenu_tag><a href=../../tags/certbot/>Certbot (1)</a></div><div class=xMenu_tag><a href=../../tags/chatgpt/>ChatGPT (1)</a></div><div class=xMenu_tag><a href=../../tags/confluence/>confluence (1)</a></div><div class=xMenu_tag><a href=../../tags/css/>CSS (1)</a></div><div class=xMenu_tag><a href=../../tags/ctf/>CTF (1)</a></div><div class=xMenu_tag><a href=../../tags/d3js/>D3.js (1)</a></div><div class=xMenu_tag><a href=../../tags/dns/>DNS (1)</a></div><div class=xMenu_tag><a href=../../tags/dvb/>DVB (1)</a></div><div class=xMenu_tag><a href=../../tags/editorconfig/>EditorConfig (1)</a></div><div class=xMenu_tag><a href=../../tags/evernote/>Evernote (1)</a></div><div class=xMenu_tag><a href=../../tags/git/>Git (1)</a></div><div class=xMenu_tag><a href=../../tags/golang/>Golang (1)</a></div><div class=xMenu_tag><a href=../../tags/google-analytics/>Google Analytics (1)</a></div><div class=xMenu_tag><a href=../../tags/groovy/>Groovy (1)</a></div><div class=xMenu_tag><a href=../../tags/html/>HTML (1)</a></div><div class=xMenu_tag><a href=../../tags/igdb/>IGDB (1)</a></div><div class=xMenu_tag><a href=../../tags/iso/>ISO (1)</a></div><div class=xMenu_tag><a href=../../tags/jest/>Jest (1)</a></div><div class=xMenu_tag><a href=../../tags/jira/>jira (1)</a></div><div class=xMenu_tag><a href=../../tags/lsof/>lsof (1)</a></div><div class=xMenu_tag><a href=../../tags/macos/>macOS (1)</a></div><div class=xMenu_tag><a href=../../tags/ml/>機械学習/ディープラーニング (1)</a></div><div class=xMenu_tag><a href=../../tags/parcel/>Parcel (1)</a></div><div class=xMenu_tag><a href=../../tags/raspberrypi/>RaspberryPi (1)</a></div><div class=xMenu_tag><a href=../../tags/rclone/>rclone (1)</a></div><div class=xMenu_tag><a href=../../tags/regexp/>正規表現 (1)</a></div><div class=xMenu_tag><a href=../../tags/sbom/>sbom (1)</a></div><div class=xMenu_tag><a href=../../tags/stylelint/>Stylelint (1)</a></div><div class=xMenu_tag><a href=../../tags/teams/>Teams (1)</a></div><div class=xMenu_tag><a href=../../tags/terraform/>Terraform (1)</a></div><div class=xMenu_tag><a href=../../tags/tex/>TeX (1)</a></div><div class=xMenu_tag><a href=../../tags/ubuntu/>Ubuntu (1)</a></div><div class=xMenu_tag><a href=../../tags/url/>URL (1)</a></div><div class=xMenu_tag><a href=../../tags/vim/>Vim (1)</a></div><div class=xMenu_tag><a href=../../tags/vps/>VPS (1)</a></div><div class=xMenu_tag><a href=../../tags/web/>Web (1)</a></div><div class=xMenu_tag><a href=../../tags/webpack/>webpack (1)</a></div><div class=xMenu_tag><a href=../../tags/wsl/>WSL (1)</a></div><div class=xMenu_tag><a href=../../tags/%E3%82%A2%E3%82%B8%E3%83%A3%E3%82%A4%E3%83%AB/>アジャイル (1)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%90%E3%83%83%E3%83%81%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB/>バッチファイル (1)</a></div><div class=xMenu_tag><a href=../../tags/%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E8%A8%AD%E5%AE%9A/>プロキシ設定 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E4%BA%BA%E7%94%9F%E7%94%9F%E3%81%8D%E6%96%B9/>人生・生き方 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E6%96%87%E5%AD%97%E3%82%B3%E3%83%BC%E3%83%89/>文字コード (1)</a></div><div class=xMenu_tag><a href=../../tags/%E6%96%87%E6%88%BF%E5%85%B7/>文房具 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E6%96%99%E7%90%86/>料理 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86/>画像処理 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E8%A8%80%E8%91%89/>言葉 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E8%A8%AD%E5%AE%9A/>設定 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E8%AA%8D%E8%A8%BC/>認証 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E9%80%9F%E8%AA%AD/>速読 (1)</a></div><div class=xMenu_tag><a href=../../tags/%E9%9F%B3%E5%A3%B0%E8%AA%8D%E8%AD%98/>音声認識 (1)</a></div></div><a href=../../tags/ style="display:block;padding:.2em .4em;margin:.3em;font-size:smaller">すべて表示 …</a></div></div><script>const NUM_TAGS=10;function getRandomItemsFromArray(e,t){const n=e.sort(()=>Math.random()-.5);return n.slice(0,t)}const containerElem=document.getElementById("local-tag-container"),tagElems=document.querySelectorAll(".xMenu_tag"),tagArray=Array.from(tagElems),shuffledTags=getRandomItemsFromArray(tagArray,NUM_TAGS);containerElem.innerHTML="",shuffledTags.forEach(e=>containerElem.appendChild(e))</script><div class=xMenu_box data-sticky><br></div></div><div id=sidebar_fixed style=position:-webkit-sticky;position:sticky;top:4rem></div></div></nav><main id=xMain><div id=redirect-notification style=display:none;font-size:smaller;padding:1em>Web サイトの URL が変わりました。ブックマークの変更をお願いします。<br>変更前: <s>https://memoja.net</s><br>変更後: <a href=https://toushi.maku.blog>https://toushi.maku.blog</a><br></div><script>const url=new URL(document.location);if(url.searchParams.get("redirected_from")==="memoja.net"){const e=document.getElementById("redirect-notification");e.style.display="block",url.searchParams.delete("redirected_from"),history.replaceState({},"",url)}</script><article class=xArticle itemscope itemtype=https://schema.org/BlogPosting><aside><div class=xPrevNextLink><div class=xPrevNextLink_prev><a href=../../p/38bpqjp/>DynamoDB の未整理・雑多メモ</a></div><div class=xPrevNextLink_next><a href=../../p/zkzamw8/>DynamoDB をコマンドライン (CLI) で操作する</a></div></div></aside><header class=xArticle_headerBox><div><span class=xArticle_headerBox_breadcrumb><a href=../../>&#x1F3E0;</a></span>
<span class=xArticle_headerBox_breadcrumb><a href=../../p/3ftx6b2/>技術系</a></span>
<span class=xArticle_headerBox_breadcrumb><a href=../../p/7s7hs4e/>AWS</a></span>
<span class=xArticle_headerBox_breadcrumb><a href=../../p/3jt3bjr/>DynamoDB</a></span></div><div style=display:flex;margin-top:.8em><div style=width:80px;margin-right:.5em><img src=../../p/7s7hs4e/_index.svg style=width:80px;height:80px alt=カテゴリーアイコン></div><div style=flex:1><h1 itemprop=headline class=xArticle_headerBox_title><a itemprop=mainEntityOfPage href=../../p/rdq4eq2/>DynamoDB Local で DynamoDB のローカルテスト環境を作る</a></h1><div class=xPageTags><span class=xPageTags_item><a href=../../tags/aws/>AWS</a></span>
<span class=xPageTags_item><a href=../../tags/aws/dynamodb/>AWS/DynamoDB</a></span></div></div></div><span class=xPageDate>更新: <time itemprop=dateModified datetime=2021-02-23>2021-02-23</time><br>作成: <time itemprop=datePublished datetime=2021-02-23>2021-02-23</time></span></header><div itemprop=articleBody class=xArticle_content><nav id=TableOfContents><ul><li><a href=#dynamodb-local-とは>DynamoDB Local とは</a></li><li><a href=#dynamodb-local-のインストール>DynamoDB Local のインストール</a><ul><li><a href=#実行ファイルのダウンロード>実行ファイルのダウンロード</a></li><li><a href=#起動用スクリプトエイリアスの作成>起動用スクリプト（エイリアス）の作成</a></li></ul></li><li><a href=#dynamodb-local-を使用する>DynamoDB Local を使用する</a><ul><li><a href=#dynamodb-local-サーバーを起動する>DynamoDB Local サーバーを起動する</a></li><li><a href=#dynamodb-local-に接続する>DynamoDB Local に接続する</a></li></ul></li><li><a href=#おまけ間違ってウェブサービス側の-dynamodb-を操作しないようにする>（おまけ）間違ってウェブサービス側の DynamoDB を操作しないようにする</a></li><li><a href=#おまけプロキシ環境下で-http-301-エラーになる場合>（おまけ）プロキシ環境下で HTTP 301 エラーになる場合</a></li></ul></nav><h2 id=dynamodb-local-とは>DynamoDB Local とは</h2><p>DynamoDB Local を使うと、Amazon DynamoDB サービスを模倣するローカルサーバーを立ち上げることができます。
DynamoDB Local サーバーは、デフォルトでは <code>http://localhost:8000</code> で起動し、ここに対して AWS CLI や AWS SDK で接続して操作します。</p><p>DynamoDB ウェブサービスで複雑なデータ処理を行うときは、あらかじめ DynamoDB Local を使ってテストを行っておくと安心です。
DynamoDB の操作のために試行錯誤しても AWS の利用料金がかかることはありません。</p><h2 id=dynamodb-local-のインストール>DynamoDB Local のインストール</h2><h3 id=実行ファイルのダウンロード>実行ファイルのダウンロード</h3><p>DynamoDB Local には、Java の実行ファイル (JAR) や、それを含む Docker コンテナとして提供されています。
Java のインストールされた環境では、JAR ファイルをダウンロードして起動するのが手っ取り早いです。
下記から ZIP ファイルでダウンロードできます。</p><ul><li><a href=https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html>DynamoDB Local のダウンロード</a></li></ul><p>ダウンロードした ZIP ファイルを展開すると、次のような構成のディレクトリが展開されます。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>アーカイブの内容</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>dynamodb_local_latest/
</span></span><span class=line><span class=cl>  +-- DynamoDBLocal_lib/  ... 本体が使う依存ライブラリ
</span></span><span class=line><span class=cl>  +-- DynamoDBLocal.jar   ... 本体
</span></span><span class=line><span class=cl>  +-- その他のドキュメント</span></span></code></pre></div></div></figure><p>起動に必要なのは、<code>DynamoDBLocal_lib</code> ディレクトリと <code>DynamoDBLocal.jar</code> だけなので、この 2 つを任意のディレクトリにコピーします。
ここでは、次のようなディレクトリにコピーすることにします（Windows であれば、<code>$HOME</code> は <code>%USERPROFILE%</code> に置き換えてください）。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>適当な場所にコピー</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>$HOME/mybin/dynamodb-local/
</span></span><span class=line><span class=cl>  +-- DynamoDBLocal_lib/
</span></span><span class=line><span class=cl>  +-- DynamoDBLocal.jar</span></span></code></pre></div></div></figure><h3 id=起動用スクリプトエイリアスの作成>起動用スクリプト（エイリアス）の作成</h3><p>インストール自体はこれで終わりですが、DynamoDB Local サーバーを簡単に起動できるようにするために、<strong><code>dynamodb-local</code></strong> というコマンドラインエイリアスを定義しておきます。</p><h4 id=macos--linux-の場合>macOS / Linux の場合</h4><figure class=xCodeBlock><figcaption class=xCodeBlock_title>~/.bash_profile</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>DYNAMODB</span><span class=o>=</span>~/mybin/dynamodb-local
</span></span><span class=line><span class=cl><span class=nb>alias</span> dynamodb-local<span class=o>=</span><span class=s1>&#39;java -Djava.library.path=$DYNAMODB/DynamoDBLocal_lib -jar $DYNAMODB/DynamoDBLocal.jar -sharedDb -dbPath $DYNAMODB&#39;</span></span></span></code></pre></div></div></figure><h4 id=windows-の場合>Windows の場合</h4><p>Windows の場合は、サーバー起動用のバッチファイルを作ってしまうのが楽かもしれません。
例えば、環境変数 <code>PATH</code> に <code>%USERPROFILE%\mybin</code> のパスを追加し、次のようなバッチファイルを作成します。
やっていることは、上記の macOS / Linux の場合と同様ですが、コマンドライン引数を受け取れるように末尾に <code>%*</code> を追加してます。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>%USERPROFILE%\mybin\dynamodb-local.cmd</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-bat data-lang=bat><span class=line><span class=cl><span class=p>@</span><span class=k>echo</span> off
</span></span><span class=line><span class=cl><span class=k>setlocal</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nv>DYNAMODB</span><span class=p>=</span><span class=nv>%USERPROFILE%</span>\mybin\dynamodb-local
</span></span><span class=line><span class=cl>java -Djava.library.path=<span class=nv>%DYNAMODB%</span>\DynamoDBLocal_lib -jar <span class=nv>%DYNAMODB%</span>\DynamoDBLocal.jar -sharedDb -dbPath <span class=nv>%DYNAMODB%</span> <span class=nv>%*</span></span></span></code></pre></div></div></figure><p>これで、どのディレクトリからでも <code>dynamodb-local</code> コマンドを実行するだけで、DyanmoDB Local サーバーを起動できるようになります。
上記の例では、<code>DynamoDBLocal.jar</code> に次のようなオプションを渡しています。</p><ul><li><strong><code>-sharedDb</code></strong> &mldr; 使用するアクセスキーとリージョンごとにデータベースファイル (<code>.db</code>) を作らず、<code>shared-local-instance.db</code> という単一のファイルを作成する。</li><li><strong><code>-dbPath $DYNAMODB</code></strong> &mldr; 上記の <code>.db</code> ファイルをカレントディレクトリに生成せず、実行ファイルと同じ場所に生成する。</li></ul><h2 id=dynamodb-local-を使用する>DynamoDB Local を使用する</h2><h3 id=dynamodb-local-サーバーを起動する>DynamoDB Local サーバーを起動する</h3><p>ここまでの設定が完了していれば、任意のディレクトリから次のように DynamoDB Local サーバーを起動することができます（終了は <code>Ctrl + C</code> です）。</p><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>$ dynamodb-local
</span></span><span class=line><span class=cl>Initializing DynamoDB Local with the following configuration:
</span></span><span class=line><span class=cl>Port: 8000
</span></span><span class=line><span class=cl>InMemory: false
</span></span><span class=line><span class=cl>DbPath: null
</span></span><span class=line><span class=cl>SharedDb: true
</span></span><span class=line><span class=cl>shouldDelayTransientStatuses: false
</span></span><span class=line><span class=cl>CorsParams: *</span></span></code></pre></div></div></figure><p>サーバー起動時には、上記のようにコンフィグ値が表示され、ポート番号が 8000 番であることや、CORS アクセスが全て許可されている (<code>*</code>)、といったことが分かります。
これらの設定は、<code>-port</code> オプションや <code>-cors</code> オプションで変更することができます。</p><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>$ dynamodb-local -port 8123</span></span></code></pre></div></div></figure><p>コマンドラインオプションの詳細は、次のようにしてヘルプを表示するか、<a href=https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/DynamoDBLocal.UsageNotes.html>こちらのサイト</a> で確認できます。</p><p><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>$ dynamodb-local --help</span></span></code></pre></div></div></figure><div class=xAccordion><input id=id-546897321 type=checkbox>
<label class=xAccordion_title for=id-546897321>実行結果</label><div class=xAccordion_body><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>usage: java -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar
</span></span><span class=line><span class=cl>            [-port &lt;port-no.&gt;] [-inMemory] [-delayTransientStatuses]
</span></span><span class=line><span class=cl>            [-dbPath &lt;path&gt;][-sharedDb] [-cors &lt;allow-list&gt;]
</span></span><span class=line><span class=cl> -cors &lt;arg&gt;                Enable CORS support for javascript against a
</span></span><span class=line><span class=cl>                            specific allow-list list the domains separated
</span></span><span class=line><span class=cl>                            by , use &#39;*&#39; for public access (default is
</span></span><span class=line><span class=cl>                            &#39;*&#39;)
</span></span><span class=line><span class=cl> -dbPath &lt;path&gt;             Specify the location of your database file.
</span></span><span class=line><span class=cl>                            Default is the current directory.
</span></span><span class=line><span class=cl> -delayTransientStatuses    When specified, DynamoDB Local will introduce
</span></span><span class=line><span class=cl>                            delays to hold various transient table and
</span></span><span class=line><span class=cl>                            index statuses so that it simulates actual
</span></span><span class=line><span class=cl>                            service more closely. Currently works only for
</span></span><span class=line><span class=cl>                            CREATING and DELETING online index statuses.
</span></span><span class=line><span class=cl> -help                      Display DynamoDB Local usage and options.
</span></span><span class=line><span class=cl> -inMemory                  When specified, DynamoDB Local will run in
</span></span><span class=line><span class=cl>                            memory.
</span></span><span class=line><span class=cl> -optimizeDbBeforeStartup   Optimize the underlying backing store database
</span></span><span class=line><span class=cl>                            tables before starting up the server
</span></span><span class=line><span class=cl> -port &lt;port-no.&gt;           Specify a port number. Default is 8000
</span></span><span class=line><span class=cl> -sharedDb                  When specified, DynamoDB Local will use a
</span></span><span class=line><span class=cl>                            single database instead of separate databases
</span></span><span class=line><span class=cl>                            for each credential and region. As a result,
</span></span><span class=line><span class=cl>                            all clients will interact with the same set of
</span></span><span class=line><span class=cl>                            tables, regardless of their region and
</span></span><span class=line><span class=cl>                            credential configuration. (Useful for
</span></span><span class=line><span class=cl>                            interacting with Local through the JS Shell in
</span></span><span class=line><span class=cl>                            addition to other SDKs)</span></span></code></pre></div></div></figure></div></div></p><h3 id=dynamodb-local-に接続する>DynamoDB Local に接続する</h3><p>DynamoDB Local サーバーを起動したら、AWS CLI（<code>aws</code> コマンド）で接続してみます。
基本的には DynamoDB ウェブサービスを操作するときと同様ですが、<strong><code>--endpoint-url</code></strong> オプションでサーバーのアドレスを指定する必要があります。</p><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>$ aws dynamodb list-tables --endpoint-url http://localhost:8000
</span></span><span class=line><span class=cl>TableNames:
</span></span><span class=line><span class=cl>- Games
</span></span><span class=line><span class=cl>- Musics</span></span></code></pre></div></div></figure><div class=xNote><span class=xNote_title>☝️ --region local オプション</span>
<span class=xNote_body><code>--endpoint-url http://localhost:8000</code> の代わりに、<strong><code>--region local</code></strong> でも DynamoDB Local に接続できるみたいです。
ただし、ポート番号を <code>8000</code> 以外に変えた場合は接続できないので、<code>--endpoint-url</code> の方を使っておいた方が安心かもしれません。</span></div><h2 id=おまけ間違ってウェブサービス側の-dynamodb-を操作しないようにする>（おまけ）間違ってウェブサービス側の DynamoDB を操作しないようにする</h2><p>AWS CLI（<code>aws</code> コマンド）を使う時に、<code>--endpoint-url</code> オプションを指定し忘れると、ウェブサービス側の DynamoDB を操作することになります。
このような誤操作でウェブサービス側のデータを更新してしまうのが心配なときは、次のようにアクセスキーに偽物の情報（ここでは <code>fake</code>）をセットした状態で AWS CLI コマンドを実行するようにします。</p><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>AWS_ACCESS_KEY_ID</span><span class=o>=</span>fake
</span></span><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>AWS_SECRET_ACCESS_KEY</span><span class=o>=</span>fake
</span></span><span class=line><span class=cl>$ aws dynamodb list-tables --endpoint-url http://localhost:8000
</span></span><span class=line><span class=cl>TableNames:
</span></span><span class=line><span class=cl>- Games
</span></span><span class=line><span class=cl>- Musics</span></span></code></pre></div></div></figure><p>このように設定すると、DynamoDB Local サーバーへのアクセスは可能なままで、ウェブサービス側の DynamoDB へのアクセスは認証エラーで弾かれるようになります。</p><p>ちなみに、<code>aws dynamodb</code> コマンドの <code>--endpoint-url</code> オプションに関しては、現状は環境変数などでデフォルト値を設定しておくことはできないようです。
下記は、<a href=https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/DynamoDBLocal.UsageNotes.html>DynamoDB ローカル使用に関する注意事項 - Amazon DynamoDB</a> からの抜粋です。</p><blockquote><p>注記：AWS CLI では、ダウンロード可能なバージョンの DynamoDB をデフォルトのエンドポイントとして使用することはできません。そのため、各 &ndash;endpoint-url コマンドで AWS CLI を指定する必要があります。</p></blockquote><p>毎回 <code>--endpoint-url</code> を指定するのも面倒なので、何らかの自動化を行いたい場合は、素直に AWS SDK を使って Node.js や Python のスクリプトを作った方がよさそうです。
SDK が生成するアクセス用インスタンスには、エンドポイント URL を指定できるようになっています。</p><h2 id=おまけプロキシ環境下で-http-301-エラーになる場合>（おまけ）プロキシ環境下で HTTP 301 エラーになる場合</h2><p>社内のプロキシ環境内から AWS CLI で DynamoDB Local に接続するとき、次のようなエラーが発生することがあります。</p><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>$ aws dynamodb list-tables --endpoint-url http://localhost:8000
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>An error occurred (301) when calling the ListTables operation: &lt;HTML&gt;
</span></span><span class=line><span class=cl>&lt;HEAD&gt;&lt;TITLE&gt;Redirection&lt;/TITLE&gt;&lt;/HEAD&gt;
</span></span><span class=line><span class=cl>&lt;BODY&gt;&lt;H1&gt;Redirect&lt;/H1&gt;&lt;/BODY&gt;</span></span></code></pre></div></div></figure><p>これは、<code>http_proxy</code> 環境変数が設定されていることが直接の原因になっています。　
この環境変数を外すか、次のように <code>localhost</code> をプロキシ対象外に設定することで接続できるようになります。</p><figure class=xCodeBlock><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>### Linux の場合
</span></span><span class=line><span class=cl>$ export NO_PROXY=localhost
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### Windows の場合
</span></span><span class=line><span class=cl>$ setx NO_PROXY localhost</span></span></code></pre></div></div></figure><aside style="display:flex;border:thin dashed gray"><div style="align-self:stretch;writing-mode:vertical-lr;text-align:center;letter-spacing:.2em;color:#666;border-right:thin dashed gray;padding:.4em 0;line-height:1.5">参考</div><div style="align-self:center;padding:.6em 0;line-height:1.2!important"><ul><li><a href=https://docs.aws.amazon.com/ja_jp/sdk-for-javascript/v3/developer-guide/dynamodb-examples.html>Amazon DynamoDB — AWS SDK for JavaScript</a></li><li><a href=https://boto3.amazonaws.com/v1/documentation/api/latest/guide/dynamodb.html>Amazon DynamoDB — Boto3 Docs documentation</a></li></ul></div></aside><meta itemprop=author content="まく"><span itemprop=publisher itemscope itemtype=https://schema.org/Organization><meta itemprop=name content="まく"></span><h3 style="border-bottom:1px solid gray">関連記事</h3><ul><li><a href=../../p/zkzamw8/>DynamoDB をコマンドライン (CLI) で操作する</a></li><li><a href=../../p/ct4ckt3/>AWS のコスト情報をコマンドライン (CLI) で取得する</a></li><li><a href=../../p/bwamw8i/>AWS CodeBuild をコマンドライン (CLI) から操作する</a></li><li><a href=../../p/zkx9ju6/>Amazon EC2 をコマンドライン (CLI) で操作する</a></li><li><a href=../../p/4ju5eow/>AWS S3 をコマンドライン (CLI) で操作する</a></li><li><a href=../../p/aov4bho/>AWS IAM の設定をコマンドライン (CLI) で行う</a></li><li><a href=../../p/j5iu7it/>AWS の初期設定: AWS CLI と認証情報の設定</a></li></ul><div class=xPageTags><span class=xPageTags_item><a href=../../tags/aws/>AWS</a></span>
<span class=xPageTags_item><a href=../../tags/aws/dynamodb/>AWS/DynamoDB</a></span></div></div><div style=text-align:right><div id=codoc-entry-4gYwTntzzw class=codoc-entries data-without-body=1 data-support-button-text="（っ'-')╮シュッ=͟͟͞͞ 💵" data-show-like=0 data-show-about-codoc=0 data-show-powered-by=0 data-support-message=まくに投げ銭できるよ></div></div><div class=xArticle_up><a href=../../p/3jt3bjr/><span class=xArticle_up_label>AWS DynamoDB 関連記事</span><br>へ戻る</a></div><aside><div class=xPrevNextLink><div class=xPrevNextLink_prev><a href=../../p/38bpqjp/>DynamoDB の未整理・雑多メモ</a></div><div class=xPrevNextLink_next><a href=../../p/zkzamw8/>DynamoDB をコマンドライン (CLI) で操作する</a></div></div></aside></article><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-6317852277883092 data-ad-slot=8636867067></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></main></div><aside><div class=xBreadcrumb><span class=xBreadcrumb_item><a href=../../>&#x1F3E0;</a></span>
<span class=xBreadcrumb_item><a href=../../p/3ftx6b2/>技術系</a></span>
<span class=xBreadcrumb_item><a href=../../p/7s7hs4e/>AWS</a></span>
<span class=xBreadcrumb_item><a href=../../p/3jt3bjr/>DynamoDB</a></span>
<span class=xBreadcrumb_item>DynamoDB Local で DynamoDB のローカルテスト環境を作る</span></div></aside><div id=xSiteFooter><a href=../../>まくろぐ</a></div><div id=xSiteFooter2><a href=../../sitemap/>サイトマップ</a> ｜
<a target=_blank href=https://forms.gle/xdUszEv4f5CEqH947>まくへのメッセージ</a></div></div><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"まくろぐ","item":"https://maku.blog/"},{"@type":"ListItem","position":2,"name":"技術系","item":"https://maku.blog/p/3ftx6b2/"},{"@type":"ListItem","position":3,"name":"AWS","item":"https://maku.blog/p/7s7hs4e/"},{"@type":"ListItem","position":4,"name":"DynamoDB","item":"https://maku.blog/p/3jt3bjr/"},{"@type":"ListItem","position":5,"name":"DynamoDB Local で DynamoDB のローカルテスト環境を作る","item":"https://maku.blog/p/rdq4eq2/"}]}</script></body></html>