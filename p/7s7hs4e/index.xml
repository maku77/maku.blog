<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AWS 関連メモ on まくろぐ</title><link>https://maku.blog/p/7s7hs4e/</link><description>Recent content in AWS 関連メモ on まくろぐ</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Mon, 18 Apr 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://maku.blog/p/7s7hs4e/index.xml" rel="self" type="application/rss+xml"/><item><title>AWS SNS トピックから通知されるイベントデータの例</title><link>https://maku.blog/p/qcpybnx/</link><pubDate>Mon, 19 Apr 2021 00:00:00 +0000</pubDate><guid>https://maku.blog/p/qcpybnx/</guid><description>AWS SNS トピックからメッセージが発行されたときに、サブスクライバー（Lambda 関数など）にどのようなイベントデータが配信されるかの例です。
基本的なメッセージの構造 Lambda 関数で受け取る場合 SNS トピックに対して Lambda 関数をサブスクライブしておくと、Lambda 関数の第一引数 (event) で、次のようなオブジェクトを受信できます。 重要な情報は、Records[0].Sns の下に格納されています。
{ &amp;#34;Records&amp;#34;: [ { &amp;#34;EventSource&amp;#34;: &amp;#34;aws:sns&amp;#34;, &amp;#34;EventVersion&amp;#34;: &amp;#34;1.0&amp;#34;, &amp;#34;EventSubscriptionArn&amp;#34;: &amp;#34;arn:aws:sns:ap-northeast-1:123456789012:mytopic:0884-5d81c0db-4e13-829f-596f7ea9f8ad&amp;#34;, &amp;#34;Sns&amp;#34;: { &amp;#34;Type&amp;#34;: &amp;#34;Notification&amp;#34;, ... &amp;#34;Subject&amp;#34;: &amp;#34;Message Title&amp;#34;, &amp;#34;Message&amp;#34;: &amp;#34;Message Body&amp;#34;, ... } } ] } メールで受け取る場合 SNS トピックに「JSON 形式のメール」をサブスクライブしておくと、SNS のメッセージが発行されたときに、次のような内容のメールが届きます。
{ &amp;#34;Type&amp;#34;: &amp;#34;Notification&amp;#34;, ... &amp;#34;Subject&amp;#34;: &amp;#34;Message Title&amp;#34;, &amp;#34;Message&amp;#34;: &amp;#34;Message Body&amp;#34;, ... } Lambda 関数の第一引数で渡される event オブジェクトで表現すると、event.Records[0].Sns に相当する部分の情報がメールで送られてきます。
具体的な SNS メッセージの例 下記の例では、Records[0].Sns 以下の情報のみを示しています（JSON 形式のメールで送られる内容です）。</description></item></channel></rss>