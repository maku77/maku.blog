<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>LUIS のメモ on まくろぐ</title><link>https://maku.blog/p/d8apqgw/</link><description>Recent content in LUIS のメモ on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Wed, 03 Jul 2019 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/p/d8apqgw/index.xml" rel="self" type="application/rss+xml"/><item><title>LUIS (1) LUIS とは？</title><link>https://maku.blog/p/mkwnnsz/</link><pubDate>Wed, 13 Mar 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/mkwnnsz/</guid><description>&lt;h2 id="luis-でできること">LUIS でできること&lt;/h2>
&lt;p>Microsoft が提供している LUIS (Language Understanding Intelligent Service) サービスを使用すると、&lt;strong>自然言語による文章（発話テキスト）を、コンピュータが理解しやすい形式に翻訳&lt;/strong>することができます。
主にチャットボットのバックエンドとして使用されることが想定されているようです。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="500" height="248" src="../../p/mkwnnsz/about_hu4502758311235892470.png" alt="/p/mkwnnsz/about.png" />
&lt;/figure>

&lt;ul>
&lt;li>&lt;a href="https://www.luis.ai/">LUIS (Language Understanding) - Cognitive Services - Microsoft Azure&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://westus.dev.cognitive.microsoft.com/docs/services/5819c76f40a6350ce09de1ac/operations/5819c77140a63516d81aee78">LUIS - Endpoint API&lt;/a> メインのクエリ用 REST API&lt;/li>
&lt;li>&lt;a href="https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5890b47c39e2bb052c5b9c2f">LUIS - Authoring API&lt;/a> アプリ管理用の REST API&lt;/li>
&lt;/ul>
&lt;p>LUIS は、入力した発話テキストを&lt;strong>インテントとエンティティ&lt;/strong>に分解します。&lt;/p>
&lt;ul>
&lt;li>&lt;b>インテント&lt;/b> … 意図、目的。ユーザが何をしたいのかを表す。&lt;/li>
&lt;li>&lt;b>エンティティ&lt;/b> … 文章の中のプレースホルダに当たる部分の値。求めているものや、条件などを示す部分。&lt;/li>
&lt;/ul>
&lt;p>例えば、下記のような入力テキストがあったとすると、&lt;/p>
&lt;pre tabindex="0">&lt;code>15時から4人で使える部屋はない？
&lt;/code>&lt;/pre>&lt;p>LUIS は次のようなインテント＋エンティティの情報に翻訳します。&lt;/p>
&lt;ul>
&lt;li>&lt;b>インテント&lt;/b>: SearchMeetingRoom&lt;/li>
&lt;li>&lt;b>エンティティ&lt;/b>: Time=15時、People=4人&lt;/li>
&lt;/ul>
&lt;p>チャットボットのプログラムは、この翻訳された情報を見て、「ミーティングルームを探す」処理を、パラメータ「15時」、「4人」で行えばよいことになります。
LUIS は上記のような翻訳処理を行うためのサービスなので、その先のミーティングルームの検索処理などは独自に実装する必要があります。&lt;/p>
&lt;p>LUIS の Web サイト上では、このような発話例 (Utterance) と、インテント、エンティティの情報を登録していくことで、モデルの学習を進めることができます。&lt;/p>
&lt;h2 id="luis-のモデルを公開する">LUIS のモデルを公開する&lt;/h2>
&lt;p>LUIS ポータル上で作成した自然言語解析のモデルを、Web API (REST API) の形で使用できるようにするには、下記のようなステップを踏みます（&lt;a href="../../p/2t6xrbm">QnA Maker&lt;/a> のサービスと同様の手順です）。&lt;/p></description></item><item><title>LUIS (2) LUIS のオーサリングキー、エンドポイントキーとは</title><link>https://maku.blog/p/mdyedwq/</link><pubDate>Thu, 14 Mar 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/mdyedwq/</guid><description>&lt;p>LUIS アプリで使用するキーの種類には、&lt;strong>オーサリングキー (Authoring Key)&lt;/strong> と&lt;strong>エンドポイントキー (Endpoint Key)&lt;/strong> の 2 種類があります。&lt;/p>
&lt;h2 id="オーサリングキー-authoring-key">オーサリングキー (Authoring Key)&lt;/h2>
&lt;p>オーサリングキーは LUIS アカウントの作成時に自動的に作成される、無料のキーです。
オーサリングキーはリージョン内で共通であり、1 つだけ作成されます。
最初に作成されるので、&lt;strong>スターターキー (Starter Key)&lt;/strong>、&lt;strong>作成者キー&lt;/strong>とも呼ばれます。&lt;/p>
&lt;p>オーサリングキーは、LUIS アカウントに結び付けられているので、LUIS 右上のアカウント名をクリックし、&lt;samp>Settings&lt;/samp> を選択することで確認できるようになっています。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="500" height="201" src="../../p/mdyedwq/keys-authoring_hu17279724544393363218.png" alt="/p/mdyedwq/keys-authoring.png" />
&lt;/figure>

&lt;p>オーサリングキーは、&lt;strong>LUIS アプリ自体の作成や、公開、コラボレーターの管理、バージョン管理など&lt;/strong>を行うときに必要になります。
つまり、あなたが作成する LUIS アプリの管理用のキーであり、LUIS の Web サイトで行えることほぼすべてをこのキーを使ったオーサリング API 経由で行えます。&lt;/p>
&lt;p>LUIS ポータル上にログインして作業している間は、オーサリングキーの存在を意識しなくても LUIS アプリの管理を行うことができますが、&lt;strong>Web API を使って LUIS アプリの管理作業を自動化したいときなどにオーサリングキーが必要&lt;/strong>になります。&lt;/p>
&lt;p>作成した個々の LUIS アプリに対するクエリ実行のためにもオーサリングキーを使用できますが、これは実装中のテスト用途に限られます（権限の強いオーサリングキーを、公開アプリからのクエリ用途に使うのは避けるべきです）。
実運用でのクエリ実行は、後述のエンドポイントキーを使用します。&lt;/p>
&lt;p>ちなみに、オーサリングキーは Microsoft のユーザアカウントごとに割り当てられるものです。
LUIS アプリのコラボレータとして登録されたユーザは、自分のオーサリングキーを使って LUIS アプリの管理を行います。&lt;/p>
&lt;h2 id="エンドポイントキー-endpoint-key">エンドポイントキー (Endpoint Key)&lt;/h2>
&lt;p>運用環境で LUIS アプリに対するクエリ実行を行うには、Azure の LUIS リソースとして作成されたエンドポイント URL とエンドポイントキーを使用します。
&lt;a href="https://portal.azure.com/">Azure ポータル&lt;/a> にログインして、LUIS リソースを作成することでエンドポイントキーを取得できます。&lt;/p></description></item><item><title>LUIS (3) Node.js から LUIS の API を利用する</title><link>https://maku.blog/p/tewj3gs/</link><pubDate>Thu, 14 Mar 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/tewj3gs/</guid><description>&lt;h2 id="luis-api-を呼び出すためのエンドポイント情報を調べる">LUIS API を呼び出すためのエンドポイント情報を調べる&lt;/h2>
&lt;h3 id="luis-アプリの-publish">LUIS アプリの Publish&lt;/h3>
&lt;p>REST API 経由で LUIS アプリによる発話解析を行うには、LUIS ポータル上で対象の LUIS アプリを &lt;samp>Train&lt;/samp> し、&lt;samp>Publish&lt;/samp> しておく必要があります（LUIS アプリというのは、いわゆる訓練されたモデルのことだと考えるとよいです）。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="600" height="277" src="../../p/tewj3gs/luis-from-nodejs_hu13038768852223937414.png" alt="/p/tewj3gs/luis-from-nodejs.png" />
&lt;/figure>

&lt;h3 id="api-実行用のエンドポイント-url-とキーを確認する">API 実行用のエンドポイント URL とキーを確認する&lt;/h3>
&lt;p>Publish 処理が完了すると、&lt;strong>エンドポイント URL&lt;/strong> と &lt;strong>エンドポイントキー (Endpoint key)&lt;/strong> を使って、LUIS アプリに対してクエリ要求を投げることができるようになります。
テスト用途であれば、LUIS ポータル上で最初に作成される &lt;strong>オーサリングキー (Authoring key)&lt;/strong> でもクエリを実行できますが、最終的なユーザ環境でのクエリ実行には Azure 上で作成したリソースに付けられたエンドポイント URL とエンドポイントキーのペアを使用する必要があります。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../../p/mdyedwq">オーサリングキー、エンドポイントキーとは&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>LUIS の REST API を呼び出すための URL は、下記のような情報から構成されています（下記例の ID はデタラメです）。&lt;/p>
&lt;ul>
&lt;li>Application ID: &lt;code>5c548551-f6ba-4fc8-c695-529ac194317d&lt;/code>&lt;/li>
&lt;li>Application version: &lt;code>0.1&lt;/code>&lt;/li>
&lt;li>エンドポイントキー: &lt;code>ff824a1409f929c8e2a15301ccff431d&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Application ID と Application version は、&lt;samp>MANAGE&lt;/samp> タブの &lt;samp>Application Information&lt;/samp> のページで確認することができます。&lt;/p></description></item><item><title>LUIS (4) botbuilder-ai ライブラリを使って LUIS の API を利用する</title><link>https://maku.blog/p/dtwckb9/</link><pubDate>Thu, 18 Apr 2019 00:00:00 +0900</pubDate><guid>https://maku.blog/p/dtwckb9/</guid><description>&lt;p>&lt;a href="../../p/tewj3gs">こちらの記事（Node.js から LUIS の API を利用する）&lt;/a> では、自力で LUIS の REST API を呼び出すための URL を構築していました。
ここでは、&lt;strong>&lt;code>botbuilder-ai&lt;/code>&lt;/strong> パッケージを使用して、もっと手軽に LUIS の機能を呼び出してみます。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">残念ながら &lt;code>botbuilder-ai&lt;/code> が提供している &lt;code>LuisRecognizer&lt;/code> などのクラスは、チャットボットの実装に使用する &lt;code>TurnContext&lt;/code> オブジェクトに依存した設計になっています。
そのため、単純なコンソールアプリケーションから &lt;code>botbuilder-ai&lt;/code> パッケージを使用することは難しく、チャットボットの実装でしか利用できません。&lt;/span>
&lt;/div>

&lt;h2 id="luis-のエンドポイント情報接続情報を確認しておく">LUIS のエンドポイント情報（接続情報）を確認しておく&lt;/h2>
&lt;p>LUIS API を使用するには、下記のような LUIS アプリの APP ID やエンドポイント情報が必要です。&lt;/p>
&lt;ul>
&lt;li>&lt;b>APP ID:&lt;/b> &lt;code>c39eb4df-fbcf-224f-b8b7-a0ee445d11b3&lt;/code>&lt;/li>
&lt;li>&lt;b>エンドポイント:&lt;/b> &lt;code>https://japaneast.api.cognitive.microsoft.com&lt;/code>&lt;/li>
&lt;li>&lt;b>エンドポイントキー（サブスクリプションキー）:&lt;/b> &lt;code>c9162c5c0b5edff5270feb6145618acb&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>APP ID とエンドポイントキーは、&lt;a href="https://luis.ai/">LUIS ポータル&lt;/a> から対象のアプリケーションを開き、下記のように確認できます。&lt;/p>
&lt;ul>
&lt;li>&lt;b>APP ID:&lt;/b> &lt;samp>MANAGE&lt;/samp>タブ → &lt;samp>Application Information&lt;/samp>&lt;/li>
&lt;li>&lt;b>エンドポイント:&lt;/b> &lt;samp>MANAGE&lt;/samp>タブ → &lt;samp>Keys and Endpoints&lt;/samp> → &lt;samp>Endpoint&lt;/samp> カラムの URL の前半部分。&lt;/li>
&lt;li>&lt;b>エンドポイントキー:&lt;/b> &lt;samp>MANAGE&lt;/samp>タブ → &lt;samp>Keys and Endpoints&lt;/samp> → &lt;samp>Key 1&lt;/samp> カラム&lt;/li>
&lt;/ul>
&lt;p>LUIS のエンドポイントキーは、&lt;a href="https://portal.azure.com/">Azure ポータル&lt;/a> に作成した &lt;samp>LUIS リソース&lt;/samp> の &lt;samp>キー&lt;/samp> の項目に表示されるものと同じです。
念のため、同一のものが表示されているか確認しておくとよいでしょう。&lt;/p></description></item></channel></rss>