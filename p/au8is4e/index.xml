<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AWS CodeBuild のメモ on まくろぐ</title><link>https://maku.blog/p/au8is4e/</link><description>Recent content in AWS CodeBuild のメモ on まくろぐ</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Mon, 22 Feb 2021 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/p/au8is4e/index.xml" rel="self" type="application/rss+xml"/><item><title>AWS CodeBuild をコマンドライン (CLI) から操作する</title><link>https://maku.blog/p/bwamw8i/</link><pubDate>Mon, 22 Feb 2021 00:00:00 +0900</pubDate><guid>https://maku.blog/p/bwamw8i/</guid><description>CodeBuild プロジェクトの一覧を取得する (codebuild list-projects) $ aws codebuild list-projects 例: すべてのプロジェクト名を取得 $ aws codebuild list-projects projects: - app1-codebuild - app2-codebuild - app3-codebuild 出力結果をソートするには、次のオプションが使用できます。
sort-by &amp;hellip; NAME / CREATED_TIME / LAST_MODIFIED_TIME のいずれかを指定 sort-order .. ASCENDING / DESCENDING のいずれかを指定 例: 最近作られたプロジェクトを 5 件表示 $ aws codebuild list-projects --sort-by CREATED_TIME --sort-order DESCENDING --max-items 5 実行結果 NextToken: eyJuZXh0VG9rZW4iOiBudWxsLCAiYm90b190cnVuY2F0ZV9hbW91bnQiOiA1fQ== projects: - myapp25-codebuild - myapp24-codebuild - myapp23-codebuild - myapp22-codebuild - myapp21-codebuild NextToken は、続きのエントリを取得したいときに、--starting-token オプションで指定します。
☝️ 出力形式 (YAML or JSON) を変えたいとき AWS CLI の出力形式は、デフォルトでは ~/.</description></item><item><title>AWS CodeBuild で Hello World（GitHub との連携）</title><link>https://maku.blog/p/xdnu3ah/</link><pubDate>Tue, 26 Jan 2021 00:00:00 +0900</pubDate><guid>https://maku.blog/p/xdnu3ah/</guid><description>何をやるか？ CodeBuild は AWS が提供するビルドサービスです。 例えば、GitHub に buildspec.yml というビルド方法を記述したファイルを置いておくと、GitHub へのコードプッシュ時に、その設定通りビルドを行ってくれます。 GitHub Actions や Azure Pipelines といったサービスと同様です。
ここでは、CodeBuild 導入の第一歩として、次のような構成でセットアップしてみます。
ソースプロバイダ : GitHub（の適当なテストリポジトリ） ビルド内容 : "Hello World" と echo 表示する つまり、テスト用の GitHub リポジトリに何らかのファイルをプッシュしたときに、CodeBuild によるビルドを開始するところまでです。
ソースプロバイダとしては、GitHub だけではなく、AWS CodeCommit、Bitbucket、GitHub Enterpise といった Git リポジトリを選択できますが、おそらく GitHub が一番よく使われているので、ここでは GitHub を使うことにします。
最初の一歩はできるだけ簡単に済ませることが肝心です！
アカウントとリポジトリを準備する まず最低限の準備として、下記のアカウントは用意できているとします。
AWS アカウント GitHub アカウント 次に、GitHub にテスト用の リポジトリを作成 しておきます。 ここでは、リポジトリ名は hello-codebuild とでもしておきます。 README.md を自動生成しておくと、後のテストが楽です。
CodeBuild にビルドプロジェクトを作成する 次のようにして、CodeBuild に新規ビルドプロジェクトを作成します。
AWS CodeBuild console を開きます。 ビルド (CodeBuild) → ビルドプロジェクト → ビルドプロジェクトを作成する と選択します。 以下のような内容を入力してビルドプロジェクトを作成します。 プロジェクト名 : build-hello（名前は自由） ソースプロバイダ : GitHub → 作成しておいた hello-codebuild リポジトリを指定 ウェブフック : コードの変更がこのレポジトリにプッシュされるたびに再構築する にチェックを入れる（これで GitHub へのプッシュ時にビルドトリガがかかります） 環境イメージ : マネージド型イメージ → Amazon Linux 2 → ランタイムやイメージは適当に選択 サービスロール : 新しいサービスロール → codebuild-build-hello-service-role（デフォルト） ビルド仕様 : buildspec ファイルを使用する 以下のような感じでビルドプロジェクトが作成されれば成功です。</description></item></channel></rss>