<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>デザインパターン/UMLのメモ on まくろぐ</title><link>https://maku.blog/p/xb5w4in/</link><description>Recent content in デザインパターン/UMLのメモ on まくろぐ</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Tue, 23 Oct 2018 00:00:00 +0900</lastBuildDate><atom:link href="https://maku.blog/p/xb5w4in/index.xml" rel="self" type="application/rss+xml"/><item><title>１時間で分かる GoF デザインパターン</title><link>https://maku.blog/p/7gmjvza/</link><pubDate>Tue, 13 May 2008 00:00:00 +0900</pubDate><guid>https://maku.blog/p/7gmjvza/</guid><description>&lt;div class="xAmazon">
 &lt;a href="https://www.amazon.co.jp/exec/obidos/ASIN/4797311126/maku04-22/ref=nosim/" target="_blank">
 &lt;div class="xAmazon_image">
 &lt;img src="https://images-na.ssl-images-amazon.com/images/I/61zDpaqhh7L.jpg" alt="オブジェクト指向における再利用のためのデザインパターン">
 &lt;/div>
 &lt;div class="xAmazon_info">
 &lt;div class="xAmazon_info_title">オブジェクト指向における再利用のためのデザインパターン&lt;/div>
 &lt;div class="xAmazon_info_author">エリック ガンマ, ラルフ ジョンソン, リチャード ヘルム, ジョン ブリシディース&lt;/div>
 &lt;div class="xAmazon_info_publisher">ソフトバンククリエイティブ&lt;/div>
 &lt;div class="xAmazon_info_icon">&lt;img src="data:image/gif;base64,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" alt="アマゾンのロゴ">&lt;/div>
 &lt;/div>
 &lt;/a>
&lt;/div>
&lt;div class="xAmazon">
 &lt;a href="https://www.amazon.co.jp/exec/obidos/ASIN/4797327030/maku04-22/ref=nosim/" target="_blank">
 &lt;div class="xAmazon_image">
 &lt;img src="https://images-na.ssl-images-amazon.com/images/I/71aAui0y3bL.jpg" alt="増補改訂版Java言語で学ぶデザインパターン入門">
 &lt;/div>
 &lt;div class="xAmazon_info">
 &lt;div class="xAmazon_info_title">増補改訂版Java言語で学ぶデザインパターン入門&lt;/div>
 &lt;div class="xAmazon_info_author">結城 浩&lt;/div>
 &lt;div class="xAmazon_info_publisher">ソフトバンククリエイティブ&lt;/div>
 &lt;div class="xAmazon_info_icon">&lt;img src="data:image/gif;base64,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" alt="アマゾンのロゴ">&lt;/div>
 &lt;/div>
 &lt;/a>
&lt;/div>
&lt;p>デザインパターンの輪講をしたときのメモ。&lt;/p>
&lt;h2 id="生成に関するパターン-creational-patterns">生成に関するパターン (Creational Patterns)&lt;/h2>
&lt;h3 id="1-abstract-factory-パターン">(1) Abstract Factory パターン&lt;/h3>
&lt;p>同種の複数のオブジェクト生成を concrete factory クラスとして種類ごとにまとめ、実際の生成は abstract factory クラスの抽象化されたインタフェース経由で行う。&lt;strong>一貫した種類のインスタンスを作ることができる&lt;/strong>。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実装イメージ&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">TvFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tvFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SonyTvFactory&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// Sony 製の TV を作るための TvFactory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">tvFactory&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">CreatePanel&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// SonyPanel を生成&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">tvFactory&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">CreateTuner&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// SonyTuner を生成&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">...&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>どのような手順で factory method を呼び出すかを定義すると、それは Builder パターンになる。&lt;/p>
&lt;h3 id="2-builder-パターン">(2) Builder パターン&lt;/h3>
&lt;p>オブジェクトの&lt;strong>生成手順を共通化&lt;/strong>して使いまわし、異なるオブジェクトを作成。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実装イメージ&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Product&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Director&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="n">CreateProduct&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Builder&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">CreateStep1&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">CreateStep2&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">CreateStep3&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">GetProduct&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のメソッドに異なる Builder オブジェクトを渡せば、異なる Product が生成される。ただし、作成手順は共通化されている。&lt;/p></description></item><item><title>UML ダイアグラムの一覧と分類</title><link>https://maku.blog/p/yzs49gv/</link><pubDate>Tue, 23 Oct 2018 00:00:00 +0900</pubDate><guid>https://maku.blog/p/yzs49gv/</guid><description>&lt;h2 id="構造図-structual-diagrams">構造図 (structual diagrams)&lt;/h2>
&lt;ol>
&lt;li>&lt;b>クラス図&lt;/b>: クラス、特性、関係&lt;/li>
&lt;li>&lt;b>コンポーネント図&lt;/b>: コンポーネントの構造と接続&lt;/li>
&lt;li>&lt;b>コンポジット構造図（複合構造図）&lt;/b>: クラスのランタイム分割&lt;/li>
&lt;li>&lt;b>配置図&lt;/b>: ノードへの成果物の配置&lt;/li>
&lt;li>&lt;b>オブジェクト図&lt;/b>: インスタンスの接続の基本例&lt;/li>
&lt;li>&lt;b>パッケージ図&lt;/b>: コンパイル時の階層構造&lt;/li>
&lt;/ol>
&lt;h2 id="振る舞い図-behavioral-diagrams">振る舞い図 (behavioral diagrams)&lt;/h2>
&lt;ol>
&lt;li>&lt;b>アクティビティ図&lt;/b>: 手続き的なまたは並行な振る舞い&lt;/li>
&lt;li>&lt;b>ユースケース図&lt;/b>: ユーザーがシステムとどう対話（相互作用）するか&lt;/li>
&lt;li>&lt;b>ステートマシン図（状態マシン図）&lt;/b>: オブジェクトの存続期間にイベントがオブジェクトに加える変更の内容&lt;/li>
&lt;li>&lt;b>相互作用図&lt;/b>
&lt;ol>
&lt;li>&lt;b>シーケンス図&lt;/b>: オブジェクト間の相互作用（シーケンスを重視）&lt;/li>
&lt;li>&lt;b>コミュニケーション図&lt;/b>: オブジェクト間の相互作用（リンクを重視）UML1ではコラボレーション図と呼ばれていた&lt;/li>
&lt;li>&lt;b>タイミング図&lt;/b>: オブジェクト間の相互作用（タイミングを重視）(UML2)&lt;/li>
&lt;li>&lt;b>相互作用概要図&lt;/b>: シーケンス図とアクティビティ図を合わせたもの (UML2)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol></description></item><item><title>デザインパターン: MVC パターンのメモ</title><link>https://maku.blog/p/cps3nt8/</link><pubDate>Fri, 12 Oct 2018 00:00:00 +0900</pubDate><guid>https://maku.blog/p/cps3nt8/</guid><description>&lt;h2 id="mvc-パターンの構造">MVC パターンの構造&lt;/h2>
&lt;h3 id="オブジェクト図">オブジェクト図&lt;/h3>


&lt;figure class="xImage">
 &lt;img style="" width="341" height="184" src="../../p/cps3nt8/mvc-object.png" alt="/p/cps3nt8/mvc-object.png" />
 &lt;figcaption> &lt;span class="xImage_codeLink">≪&lt;a href="mvc-object.puml.txt">生成コード&amp;#x1F4D6;&lt;/a>≫&lt;/span>&lt;/figcaption>
&lt;/figure>

&lt;h3 id="シーケンス図">シーケンス図&lt;/h3>


&lt;figure class="xImage">
 &lt;img style="" width="365" height="346" src="../../p/cps3nt8/mvc-sequence.png" alt="/p/cps3nt8/mvc-sequence.png" />
 &lt;figcaption>図: シーケンス図 &lt;span class="xImage_codeLink">≪&lt;a href="mvc-sequence.puml.txt">生成コード&amp;#x1F4D6;&lt;/a>≫&lt;/span>&lt;/figcaption>
&lt;/figure>

&lt;h3 id="m-model">M (Model)&lt;/h3>
&lt;p>&lt;strong>処理。ビジネス・ロジック。&lt;/strong>&lt;/p>
&lt;p>アプリケーションが使用するデータを保持し、アプリケーション固有の処理を実行する。
外部のストレージ（データベース）に保存するためのインタフェースなどを備えていてもよい。&lt;/p>
&lt;p>特に、保持するデータを参照するための public インタフェースだけを備えているものを Model ということもある。J2EE デザインパターンでは、純粋にデータのみを保持するものを Value Object と呼んでいる。&lt;/p>
&lt;p>&lt;strong>View、Controller とは関連性を持たないのが望ましい。&lt;/strong>
Model オブジェクトは、自分自身がどのように表示されるかを知らない。&lt;/p>
&lt;p>&lt;strong>特定の実行環境に依存しないのが望ましい。&lt;/strong>
例えば、特定のフレームワーク上に構築されたアプリケーションであっても、Model クラスだけは別のフレームワークでも使用できるようにするべき。つまり、フレームワークに特化したインタフェースを備えてはいけない。&lt;/p>
&lt;h3 id="v-view">V (View)&lt;/h3>
&lt;p>&lt;strong>表示。プレゼンテーション・ロジック。&lt;/strong>&lt;/p>
&lt;p>データを目に見える形で表示するためのコード。ウィンドウアプリケーションでは、ウィンドウ内に表示するウィジット等の表示、Web アプリケーションでは、HTML の出力などが View に当たる。&lt;/p>
&lt;h3 id="c-controller">C (Controller)&lt;/h3>
&lt;p>&lt;strong>入力。インタラクション・ロジック。&lt;/strong>&lt;/p>
&lt;p>ユーザやシステムからのイベントを受けとり、Model や View の作成、更新、相互作用を管理する。&lt;/p>
&lt;h2 id="mvc-パターンの-pros-and-cons">MVC パターンの Pros and Cons&lt;/h2>
&lt;ul>
&lt;li>利点 (Pros.)
&lt;ul>
&lt;li>UI コードにビジネスロジックが入るのを防ぐことができる。&lt;/li>
&lt;li>ユニットテストしやすい。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>欠点 (Cons.)
&lt;ul>
&lt;li>スケールしない（UI は個々に作成できるが、モデルを分離しにくい）&lt;/li>
&lt;li>Contoller が肥大化しやすい（View からの処理がすべて Controller 経由になる）&lt;/li>
&lt;li>SOLID 原則の S (Single responsibility principle) と I (Interface segregation principle) に違反してしまう。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="view-と-controller-の関連">View と Controller の関連&lt;/h2>
&lt;p>多くの GUI toolkit では、V (View) と C (Controller) は複雑に絡み合っている。なぜなら、C (Controller) は、それ自体が画面上に表示される widget であることが多いから。&lt;/p></description></item><item><title>デザインパターン: MVP パターンのメモ</title><link>https://maku.blog/p/5wu6fbv/</link><pubDate>Fri, 12 Oct 2018 00:00:00 +0900</pubDate><guid>https://maku.blog/p/5wu6fbv/</guid><description>&lt;p>MVP (Model-View-Presenter) パターンでは、MVC (Model-View-Controller) パターンと異なり、View と Model が直接やり取りせず、すべて Presenter 経由でのやり取りになります（亜種としてデータバインディングを使用するケースもあります）。&lt;/p>
&lt;h2 id="mvp-パターンの構造">MVP パターンの構造&lt;/h2>
&lt;h4 id="オブジェクト図">オブジェクト図&lt;/h4>


&lt;figure class="xImage">
 &lt;img style="" width="714" height="102" src="../../p/5wu6fbv/mvp-object.png" alt="/p/5wu6fbv/mvp-object.png" />
 &lt;figcaption> &lt;span class="xImage_codeLink">≪&lt;a href="mvp-object.puml.txt">生成コード&amp;#x1F4D6;&lt;/a>≫&lt;/span>&lt;/figcaption>
&lt;/figure>

&lt;h4 id="シーケンス図">シーケンス図&lt;/h4>


&lt;figure class="xImage">
 &lt;img style="" width="836" height="358" src="../../p/5wu6fbv/mvp-sequence.png" alt="/p/5wu6fbv/mvp-sequence.png" />
 &lt;figcaption> &lt;span class="xImage_codeLink">≪&lt;a href="mvp-sequence.puml.txt">生成コード&amp;#x1F4D6;&lt;/a>≫&lt;/span>&lt;/figcaption>
&lt;/figure>

&lt;h2 id="mvp-の構成要素">MVP の構成要素&lt;/h2>
&lt;ul>
&lt;li>&lt;b>View&lt;/b>: 描画ロジックを持つ。自分自身が能動的に描画処理を行うことはなく、Presenter からの要求で描画処理を行うため、Passive View と呼ばれる。Presenter に言われたとおりに、渡されたデータを描画するだけ。ユーザの入力を受け、Presenter へ通知する。&lt;/li>
&lt;li>&lt;b>Presenter&lt;/b>: ユーザイベントをハンドルし、具体的なアクションを実行する (Proxy)。データを Model から取得し、View が扱える形に加工して描画情報として渡す。&lt;/li>
&lt;li>&lt;b>Model&lt;/b>: ビジネスロジックとデータ保持（およびデータ取得処理）を担う。DB や Web サービスと通信してデータを取得する役割を持つ。必要に応じて Presenter へ変更通知を送る。&lt;/li>
&lt;/ul>
&lt;h2 id="mvp-の-pros-and-cons">MVP の Pros and Cons&lt;/h2>
&lt;ul>
&lt;li>Pros.
&lt;ul>
&lt;li>複雑なタスクをシンプルなタスクに分割できる。&lt;/li>
&lt;li>クラスが小さくなり、不具合が入りにくくデバッグしやすくなる。&lt;/li>
&lt;li>ユニットテストできる。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Cons.
&lt;ul>
&lt;li>各レイヤを繋ぐ退屈な作業が必要。&lt;/li>
&lt;li>Model が特定のユースケースに結びついてしまい再利用しにくい。&lt;/li>
&lt;li>View と Presenter が特定のデータ形式により結び付けられてしまう（Model の提供するデータを Presenter 経由で View に渡すときにデータの依存ができる）。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="mvp-の各コンポーネントの生成過程">MVP の各コンポーネントの生成過程&lt;/h2>
&lt;p>MVP パターンを導入しようとするときに、最初に迷うのがオブジェクトの所有関係をどうするかだと思います。
下記は MVP の一般的なオブジェクトの生成過程です。&lt;/p>
&lt;ol>
&lt;li>アプリを起動すると &lt;strong>View が生成される&lt;/strong>。&lt;/li>
&lt;li>&lt;strong>View は&lt;/strong>自分自身を制御してもらうための &lt;strong>Presenter を生成する&lt;/strong>。Presenter に自分自身の参照を渡しておく（これは、Presenter から View を制御してもらう必要があるため）。&lt;/li>
&lt;li>&lt;strong>Presenter は&lt;/strong>ビジネスロジックを実行するための &lt;strong>Model を生成する&lt;/strong>。&lt;/li>
&lt;/ol>
&lt;p>Presenter は、View や Model の参照を持つ必要があるわけですが、このとき View の具象クラスの参照を保持するのではなく、インタフェース型の参照（IView的な）として保持するのがポイントです。
こうすることにより、Presenter の単体テストが可能になります（View のモックを作成する）。&lt;/p></description></item><item><title>Kent Beck の CollectingParameter パターン</title><link>https://maku.blog/p/8yhxet9/</link><pubDate>Sun, 10 Apr 2011 00:00:00 +0900</pubDate><guid>https://maku.blog/p/8yhxet9/</guid><description>&lt;h2 id="collecting-parameter-の特徴">Collecting Parameter の特徴&lt;/h2>
&lt;p>巡回するオブジェクトの戻り値をベースに目的のデータを構築するのではなく、パラメータに渡したオブジェクトを使ってデータを構築する。&lt;/p>
&lt;ul>
&lt;li>戻り値となるオブジェクトのインスタンス化を防ぐことができるので、コードの実行速度が上がる。&lt;/li>
&lt;li>戻り値をベースにしたデータ構築よりも、より柔軟なタイミングでデータの構築が行える（例えば、メソッドの実行途中で結果を append できる）ようになり、コードを分割しやすくなる。&lt;/li>
&lt;/ul>
&lt;p>参考文献: &lt;a target="_blank" href="https://www.amazon.co.jp/dp/4822282384?tag=maku04-22">『パターン思考リファクタリング入門』&lt;/a>
 第10章 累積処理&lt;/p>
&lt;h2 id="collecting-parameter-を使わない場合の実装例">Collecting Parameter を使わない場合の実装例&lt;/h2>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">extractText&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">StringBuilder&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">StringBuilder&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">while&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nodeList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">next&lt;/span>&lt;span class="p">())&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">toString&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 戻り値をベースにしたデータ構築&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">toString&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="collecting-parameter-を使う場合の実装例">Collecting Parameter を使う場合の実装例&lt;/h2>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">extractText&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">StringBuilder&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">StringBuilder&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">while&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nodeList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">next&lt;/span>&lt;span class="p">())&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getText&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// パラメータをベースにデータ構築&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">toString&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>巡回される要素の方で、Collecting Parameter を使ってデータを構築します。&lt;/p></description></item></channel></rss>